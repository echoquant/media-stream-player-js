diff --git a/dist/media-stream-library.min.js b/dist/media-stream-library.min.js
index 367847ce0ddbef78fdb0c6486f6f733d85284fc1..fd1127340a664d443d6b263de4be7e2ef21b0e1b 100644
--- a/dist/media-stream-library.min.js
+++ b/dist/media-stream-library.min.js
@@ -1,2 +1,2 @@
 /*! For license information please see media-stream-library.min.js.LICENSE.txt */
-!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.mediaStreamLibrary=t():e.mediaStreamLibrary=t()}(self,(function(){return(()=>{var e={7997:(e,t,r)=>{var n=r(2695);t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(n++,"%c"===e&&(i=n))})),t.splice(i,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&void 0!==n&&"env"in n&&(e=n.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=r(4069)(t);const{formatters:i}=e.exports;i.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},4069:(e,t,r)=>{e.exports=function(e){function t(e){let r,i,o,s=null;function a(...e){if(!a.enabled)return;const n=a,i=Number(new Date),o=i-(r||i);n.diff=o,n.prev=r,n.curr=i,r=i,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let s=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((r,i)=>{if("%%"===r)return"%";s++;const o=t.formatters[i];if("function"==typeof o){const t=e[s];r=o.call(n,t),e.splice(s,1),s--}return r})),t.formatArgs.call(n,e),(n.log||t.log).apply(n,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=n,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(i!==t.namespaces&&(i=t.namespaces,o=t.enabled(e)),o),set:e=>{s=e}}),"function"==typeof t.init&&t.init(a),a}function n(e,r){const n=t(this.namespace+(void 0===r?":":r)+e);return n.log=this.log,n}function i(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names.map(i),...t.skips.map(i).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let r;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(r=0;r<i;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(6117),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((r=>{t[r]=e[r]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}},7378:(e,t)=>{"use strict";t.byteLength=function(e){var t=u(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,o=u(e),s=o[0],a=o[1],c=new i(function(e,t,r){return 3*(t+r)/4-r}(0,s,a)),l=0,h=a>0?s-4:s;for(r=0;r<h;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],c[l++]=t>>16&255,c[l++]=t>>8&255,c[l++]=255&t;return 2===a&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,c[l++]=255&t),1===a&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,c[l++]=t>>8&255,c[l++]=255&t),c},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],s=16383,a=0,u=n-i;a<u;a+=s)o.push(c(e,a,a+s>u?u:a+s));return 1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),o.join("")};for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,a=o.length;s<a;++s)r[s]=o[s],n[o.charCodeAt(s)]=s;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function c(e,t,n){for(var i,o,s=[],a=t;a<n;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return s.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},7866:(e,t,r)=>{"use strict";const n=r(7378),i=r(9258),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=u,t.SlowBuffer=function(e){return+e!=e&&(e=0),u.alloc(+e)},t.INSPECT_MAX_BYTES=50;const s=2147483647;function a(e){if(e>s)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,u.prototype),t}function u(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return h(e)}return c(e,t,r)}function c(e,t,r){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!u.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const r=0|m(e,t);let n=a(r);const i=n.write(e,t);return i!==r&&(n=n.slice(0,i)),n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(J(e,Uint8Array)){const t=new Uint8Array(e);return d(t.buffer,t.byteOffset,t.byteLength)}return f(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(J(e,ArrayBuffer)||e&&J(e.buffer,ArrayBuffer))return d(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(J(e,SharedArrayBuffer)||e&&J(e.buffer,SharedArrayBuffer)))return d(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return u.from(n,t,r);const i=function(e){if(u.isBuffer(e)){const t=0|p(e.length),r=a(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||K(e.length)?a(0):f(e):"Buffer"===e.type&&Array.isArray(e.data)?f(e.data):void 0}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return u.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function h(e){return l(e),a(e<0?0:0|p(e))}function f(e){const t=e.length<0?0:0|p(e.length),r=a(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function d(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,u.prototype),n}function p(e){if(e>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|e}function m(e,t){if(u.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||J(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return G(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return V(e).length;default:if(i)return n?-1:G(e).length;t=(""+t).toLowerCase(),i=!0}}function g(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return P(this,t,r);case"utf8":case"utf-8":return T(this,t,r);case"ascii":return k(this,t,r);case"latin1":case"binary":return O(this,t,r);case"base64":return R(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function y(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function b(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),K(r=+r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=u.from(t,n)),u.isBuffer(t))return 0===t.length?-1:v(e,t,r,n,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):v(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function v(e,t,r,n,i){let o,s=1,a=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,a/=2,u/=2,r/=2}function c(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){let n=-1;for(o=r;o<a;o++)if(c(e,o)===c(t,-1===n?0:o-n)){if(-1===n&&(n=o),o-n+1===u)return n*s}else-1!==n&&(o-=o-n),n=-1}else for(r+u>a&&(r=a-u),o=r;o>=0;o--){let r=!0;for(let n=0;n<u;n++)if(c(e,o+n)!==c(t,n)){r=!1;break}if(r)return o}return-1}function w(e,t,r,n){r=Number(r)||0;const i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;const o=t.length;let s;for(n>o/2&&(n=o/2),s=0;s<n;++s){const n=parseInt(t.substr(2*s,2),16);if(K(n))return s;e[r+s]=n}return s}function _(e,t,r,n){return Y(G(t,e.length-r),e,r,n)}function S(e,t,r,n){return Y(function(e){const t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function E(e,t,r,n){return Y(V(t),e,r,n)}function x(e,t,r,n){return Y(function(e,t){let r,n,i;const o=[];for(let s=0;s<e.length&&!((t-=2)<0);++s)r=e.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(t,e.length-r),e,r,n)}function R(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function T(e,t,r){r=Math.min(e.length,r);const n=[];let i=t;for(;i<r;){const t=e[i];let o=null,s=t>239?4:t>223?3:t>191?2:1;if(i+s<=r){let r,n,a,u;switch(s){case 1:t<128&&(o=t);break;case 2:r=e[i+1],128==(192&r)&&(u=(31&t)<<6|63&r,u>127&&(o=u));break;case 3:r=e[i+1],n=e[i+2],128==(192&r)&&128==(192&n)&&(u=(15&t)<<12|(63&r)<<6|63&n,u>2047&&(u<55296||u>57343)&&(o=u));break;case 4:r=e[i+1],n=e[i+2],a=e[i+3],128==(192&r)&&128==(192&n)&&128==(192&a)&&(u=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&a,u>65535&&u<1114112&&(o=u))}}null===o?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),i+=s}return function(e){const t=e.length;if(t<=C)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=C));return r}(n)}t.kMaxLength=s,u.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),u.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(e,t,r){return c(e,t,r)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(e,t,r){return function(e,t,r){return l(e),e<=0?a(e):void 0!==t?"string"==typeof r?a(e).fill(t,r):a(e).fill(t):a(e)}(e,t,r)},u.allocUnsafe=function(e){return h(e)},u.allocUnsafeSlow=function(e){return h(e)},u.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==u.prototype},u.compare=function(e,t){if(J(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),J(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);let r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;const n=u.allocUnsafe(t);let i=0;for(r=0;r<e.length;++r){let t=e[r];if(J(t,Uint8Array))i+t.length>n.length?(u.isBuffer(t)||(t=u.from(t)),t.copy(n,i)):Uint8Array.prototype.set.call(n,t,i);else{if(!u.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(n,i)}i+=t.length}return n},u.byteLength=m,u.prototype._isBuffer=!0,u.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)y(this,t,t+1);return this},u.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},u.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},u.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?T(this,0,e):g.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){let e="";const r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},o&&(u.prototype[o]=u.prototype.inspect),u.prototype.compare=function(e,t,r,n,i){if(J(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;let o=(i>>>=0)-(n>>>=0),s=(r>>>=0)-(t>>>=0);const a=Math.min(o,s),c=this.slice(n,i),l=e.slice(t,r);for(let e=0;e<a;++e)if(c[e]!==l[e]){o=c[e],s=l[e];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},u.prototype.indexOf=function(e,t,r){return b(this,e,t,r,!0)},u.prototype.lastIndexOf=function(e,t,r){return b(this,e,t,r,!1)},u.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let o=!1;for(;;)switch(n){case"hex":return w(this,e,t,r);case"utf8":case"utf-8":return _(this,e,t,r);case"ascii":case"latin1":case"binary":return S(this,e,t,r);case"base64":return E(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const C=4096;function k(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function O(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function P(e,t,r){const n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let i="";for(let n=t;n<r;++n)i+=X[e[n]];return i}function I(e,t,r){const n=e.slice(t,r);let i="";for(let e=0;e<n.length-1;e+=2)i+=String.fromCharCode(n[e]+256*n[e+1]);return i}function L(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function B(e,t,r,n,i,o){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function A(e,t,r,n,i){H(t,n,i,e,r,7);let o=Number(t&BigInt(4294967295));e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,r}function U(e,t,r,n,i){H(t,n,i,e,r,7);let o=Number(t&BigInt(4294967295));e[r+7]=o,o>>=8,e[r+6]=o,o>>=8,e[r+5]=o,o>>=8,e[r+4]=o;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=s,s>>=8,e[r+2]=s,s>>=8,e[r+1]=s,s>>=8,e[r]=s,r+8}function j(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function M(e,t,r,n,o){return t=+t,r>>>=0,o||j(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function D(e,t,r,n,o){return t=+t,r>>>=0,o||j(e,0,r,8),i.write(e,t,r,n,52,8),r+8}u.prototype.slice=function(e,t){const r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);const n=this.subarray(e,t);return Object.setPrototypeOf(n,u.prototype),n},u.prototype.readUintLE=u.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||L(e,t,this.length);let n=this[e],i=1,o=0;for(;++o<t&&(i*=256);)n+=this[e+o]*i;return n},u.prototype.readUintBE=u.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||L(e,t,this.length);let n=this[e+--t],i=1;for(;t>0&&(i*=256);)n+=this[e+--t]*i;return n},u.prototype.readUint8=u.prototype.readUInt8=function(e,t){return e>>>=0,t||L(e,1,this.length),this[e]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(e,t){return e>>>=0,t||L(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(e,t){return e>>>=0,t||L(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(e,t){return e>>>=0,t||L(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(e,t){return e>>>=0,t||L(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readBigUInt64LE=Z((function(e){$(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||W(e,this.length-8);const n=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))})),u.prototype.readBigUInt64BE=Z((function(e){$(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||W(e,this.length-8);const n=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)})),u.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||L(e,t,this.length);let n=this[e],i=1,o=0;for(;++o<t&&(i*=256);)n+=this[e+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},u.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||L(e,t,this.length);let n=t,i=1,o=this[e+--n];for(;n>0&&(i*=256);)o+=this[e+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},u.prototype.readInt8=function(e,t){return e>>>=0,t||L(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){e>>>=0,t||L(e,2,this.length);const r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(e,t){e>>>=0,t||L(e,2,this.length);const r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(e,t){return e>>>=0,t||L(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return e>>>=0,t||L(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readBigInt64LE=Z((function(e){$(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||W(e,this.length-8);const n=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),u.prototype.readBigInt64BE=Z((function(e){$(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||W(e,this.length-8);const n=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+r)})),u.prototype.readFloatLE=function(e,t){return e>>>=0,t||L(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return e>>>=0,t||L(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return e>>>=0,t||L(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return e>>>=0,t||L(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||B(this,e,t,r,Math.pow(2,8*r)-1,0);let i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||B(this,e,t,r,Math.pow(2,8*r)-1,0);let i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},u.prototype.writeUint8=u.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,1,255,0),this[t]=255&e,t+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeBigUInt64LE=Z((function(e,t=0){return A(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeBigUInt64BE=Z((function(e,t=0){return U(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);B(this,e,t,r,n-1,-n)}let i=0,o=1,s=0;for(this[t]=255&e;++i<r&&(o*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+r},u.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);B(this,e,t,r,n-1,-n)}let i=r-1,o=1,s=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+r},u.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},u.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeBigInt64LE=Z((function(e,t=0){return A(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeBigInt64BE=Z((function(e,t=0){return U(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeFloatLE=function(e,t,r){return M(this,e,t,!0,r)},u.prototype.writeFloatBE=function(e,t,r){return M(this,e,t,!1,r)},u.prototype.writeDoubleLE=function(e,t,r){return D(this,e,t,!0,r)},u.prototype.writeDoubleBE=function(e,t,r){return D(this,e,t,!1,r)},u.prototype.copy=function(e,t,r,n){if(!u.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);const i=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},u.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){const t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;let i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{const o=u.isBuffer(e)?e:u.from(e,n),s=o.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=o[i%s]}return this};const N={};function F(e,t,r){N[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function q(e){let t="",r=e.length;const n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function H(e,t,r,n,i,o){if(e>r||e<t){const n="bigint"==typeof t?"n":"";let i;throw i=o>3?0===t||t===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(o+1)}${n}`:`>= -(2${n} ** ${8*(o+1)-1}${n}) and < 2 ** ${8*(o+1)-1}${n}`:`>= ${t}${n} and <= ${r}${n}`,new N.ERR_OUT_OF_RANGE("value",i,e)}!function(e,t,r){$(t,"offset"),void 0!==e[t]&&void 0!==e[t+r]||W(t,e.length-(r+1))}(n,i,o)}function $(e,t){if("number"!=typeof e)throw new N.ERR_INVALID_ARG_TYPE(t,"number",e)}function W(e,t,r){if(Math.floor(e)!==e)throw $(e,r),new N.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new N.ERR_BUFFER_OUT_OF_BOUNDS;throw new N.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}F("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),F("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),F("ERR_OUT_OF_RANGE",(function(e,t,r){let n=`The value of "${e}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=q(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=q(i)),i+="n"),n+=` It must be ${t}. Received ${i}`,n}),RangeError);const z=/[^+/0-9A-Za-z-_]/g;function G(e,t){let r;t=t||1/0;const n=e.length;let i=null;const o=[];for(let s=0;s<n;++s){if(r=e.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function V(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(z,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function Y(e,t,r,n){let i;for(i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function J(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function K(e){return e!=e}const X=function(){const e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)t[n+i]=e[r]+e[i]}return t}();function Z(e){return"undefined"==typeof BigInt?Q:e}function Q(){throw new Error("BigInt not supported")}},488:e=>{"use strict";var t,r="object"==typeof Reflect?Reflect:null,n=r&&"function"==typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise((function(r,n){function i(){void 0!==o&&e.removeListener("error",o),r([].slice.call(arguments))}var o;"error"!==t&&(o=function(r){e.removeListener(t,i),n(r)},e.once("error",o)),e.once(t,i)}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function c(e,t,r,n){var i,o,s,c;if(a(r),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),s=o[t]),void 0===s)s=o[t]=r,++e._eventsCount;else if("function"==typeof s?s=o[t]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),(i=u(e))>0&&s.length>i&&!s.warned){s.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=s.length,c=l,console&&console.warn&&console.warn(c)}return e}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=l.bind(n);return i.listener=r,n.wrapFn=i,i}function f(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(i):p(i,i.length)}function d(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function p(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return u(this)},o.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i="error"===e,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var u=o[e];if(void 0===u)return!1;if("function"==typeof u)n(u,this,t);else{var c=u.length,l=p(u,c);for(r=0;r<c;++r)n(l[r],this,t)}return!0},o.prototype.addListener=function(e,t){return c(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return c(this,e,t,!0)},o.prototype.once=function(e,t){return a(t),this.on(e,h(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,h(this,e,t)),this},o.prototype.removeListener=function(e,t){var r,n,i,o,s;if(a(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){s=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)"removeListener"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},o.prototype.listeners=function(e){return f(this,e,!0)},o.prototype.rawListeners=function(e){return f(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):d.call(e,t)},o.prototype.listenerCount=d,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},9258:(e,t)=>{t.read=function(e,t,r,n,i){var o,s,a=8*i-n-1,u=(1<<a)-1,c=u>>1,l=-7,h=r?i-1:0,f=r?-1:1,d=e[t+h];for(h+=f,o=d&(1<<-l)-1,d>>=-l,l+=a;l>0;o=256*o+e[t+h],h+=f,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=n;l>0;s=256*s+e[t+h],h+=f,l-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,n),o-=c}return(d?-1:1)*s*Math.pow(2,o-n)},t.write=function(e,t,r,n,i,o){var s,a,u,c=8*o-i-1,l=(1<<c)-1,h=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:o-1,p=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),(t+=s+h>=1?f/u:f*Math.pow(2,1-h))*u>=2&&(s++,u/=2),s+h>=l?(a=0,s=l):s+h>=1?(a=(t*u-1)*Math.pow(2,i),s+=h):(a=t*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;e[r+d]=255&a,d+=p,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;e[r+d]=255&s,d+=p,s/=256,c-=8);e[r+d-p]|=128*m}},3730:e=>{"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},6117:e=>{var t=1e3,r=60*t,n=60*r,i=24*n;function o(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}e.exports=function(e,s){s=s||{};var a,u,c=typeof e;if("string"===c&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var o=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(o){var s=parseFloat(o[1]);switch((o[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"weeks":case"week":case"w":return 6048e5*s;case"days":case"day":case"d":return s*i;case"hours":case"hour":case"hrs":case"hr":case"h":return s*n;case"minutes":case"minute":case"mins":case"min":case"m":return s*r;case"seconds":case"second":case"secs":case"sec":case"s":return s*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}}}(e);if("number"===c&&isFinite(e))return s.long?(a=e,(u=Math.abs(a))>=i?o(a,u,i,"day"):u>=n?o(a,u,n,"hour"):u>=r?o(a,u,r,"minute"):u>=t?o(a,u,t,"second"):a+" ms"):function(e){var o=Math.abs(e);return o>=i?Math.round(e/i)+"d":o>=n?Math.round(e/n)+"h":o>=r?Math.round(e/r)+"m":o>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},2695:e=>{var t,r,n=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var a,u=[],c=!1,l=-1;function h(){c&&a&&(c=!1,a.length?u=a.concat(u):l=-1,u.length&&f())}function f(){if(!c){var e=s(h);c=!0;for(var t=u.length;t;){for(a=u,u=[];++l<t;)a&&a[l].run();l=-1,t=u.length}a=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function p(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new d(e,t)),1!==u.length||c||s(f)},d.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},553:e=>{"use strict";var t={};function r(e,r,n){n||(n=Error);var i=function(e){var t,n;function i(t,n,i){return e.call(this,function(e,t,n){return"string"==typeof r?r:r(e,t,n)}(t,n,i))||this}return n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,i}(n);i.prototype.name=n.name,i.prototype.code=e,t[e]=i}function n(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map((function(e){return String(e)})),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}r("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),r("ERR_INVALID_ARG_TYPE",(function(e,t,r){var i,o,s,a,u;if("string"==typeof t&&(o="not ",t.substr(0,o.length)===o)?(i="must not be",t=t.replace(/^not /,"")):i="must be",function(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}(e," argument"))s="The ".concat(e," ").concat(i," ").concat(n(t,"type"));else{var c=("number"!=typeof u&&(u=0),u+".".length>(a=e).length||-1===a.indexOf(".",u)?"argument":"property");s='The "'.concat(e,'" ').concat(c," ").concat(i," ").concat(n(t,"type"))}return s+". Received type ".concat(typeof r)}),TypeError),r("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),r("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),r("ERR_STREAM_PREMATURE_CLOSE","Premature close"),r("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),r("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),r("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),r("ERR_STREAM_WRITE_AFTER_END","write after end"),r("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),r("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),r("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.q=t},673:(e,t,r)=>{"use strict";var n=r(2695),i=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=l;var o=r(5006),s=r(8719);r(3730)(l,o);for(var a=i(s.prototype),u=0;u<a.length;u++){var c=a[u];l.prototype[c]||(l.prototype[c]=s.prototype[c])}function l(e){if(!(this instanceof l))return new l(e);o.call(this,e),s.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",h)))}function h(){this._writableState.ended||n.nextTick(f,this)}function f(e){e.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})},4343:(e,t,r)=>{"use strict";e.exports=i;var n=r(8597);function i(e){if(!(this instanceof i))return new i(e);n.call(this,e)}r(3730)(i,n),i.prototype._transform=function(e,t,r){r(null,e)}},5006:(e,t,r)=>{"use strict";var n,i=r(2695);e.exports=R,R.ReadableState=x,r(488).EventEmitter;var o,s=function(e,t){return e.listeners(t).length},a=r(8208),u=r(7866).Buffer,c=r.g.Uint8Array||function(){},l=r(6029);o=l&&l.debuglog?l.debuglog("stream"):function(){};var h,f,d,p=r(4506),m=r(3390),g=r(1111).getHighWaterMark,y=r(553).q,b=y.ERR_INVALID_ARG_TYPE,v=y.ERR_STREAM_PUSH_AFTER_EOF,w=y.ERR_METHOD_NOT_IMPLEMENTED,_=y.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;r(3730)(R,a);var S=m.errorOrDestroy,E=["error","close","destroy","pause","resume"];function x(e,t,i){n=n||r(673),e=e||{},"boolean"!=typeof i&&(i=t instanceof n),this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=g(this,e,"readableHighWaterMark",i),this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(h||(h=r(7361).s),this.decoder=new h(e.encoding),this.encoding=e.encoding)}function R(e){if(n=n||r(673),!(this instanceof R))return new R(e);var t=this instanceof n;this._readableState=new x(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),a.call(this)}function T(e,t,r,n,i){o("readableAddChunk",t);var s,a=e._readableState;if(null===t)a.reading=!1,function(e,t){if(o("onEofChunk"),!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?P(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,I(e)))}}(e,a);else if(i||(s=function(e,t){var r,n;return n=t,u.isBuffer(n)||n instanceof c||"string"==typeof t||void 0===t||e.objectMode||(r=new b("chunk",["string","Buffer","Uint8Array"],t)),r}(a,t)),s)S(e,s);else if(a.objectMode||t&&t.length>0)if("string"==typeof t||a.objectMode||Object.getPrototypeOf(t)===u.prototype||(t=function(e){return u.from(e)}(t)),n)a.endEmitted?S(e,new _):C(e,a,t,!0);else if(a.ended)S(e,new v);else{if(a.destroyed)return!1;a.reading=!1,a.decoder&&!r?(t=a.decoder.write(t),a.objectMode||0!==t.length?C(e,a,t,!1):L(e,a)):C(e,a,t,!1)}else n||(a.reading=!1,L(e,a));return!a.ended&&(a.length<a.highWaterMark||0===a.length)}function C(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&P(e)),L(e,t)}Object.defineProperty(R.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),R.prototype.destroy=m.destroy,R.prototype._undestroy=m.undestroy,R.prototype._destroy=function(e,t){t(e)},R.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=u.from(e,t),t=""),r=!0),T(this,e,t,!1,r)},R.prototype.unshift=function(e){return T(this,e,null,!0,!1)},R.prototype.isPaused=function(){return!1===this._readableState.flowing},R.prototype.setEncoding=function(e){h||(h=r(7361).s);var t=new h(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,i="";null!==n;)i+=t.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var k=1073741824;function O(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=k?e=k:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function P(e){var t=e._readableState;o("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(o("emitReadable",t.flowing),t.emittedReadable=!0,i.nextTick(I,e))}function I(e){var t=e._readableState;o("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,M(e)}function L(e,t){t.readingMore||(t.readingMore=!0,i.nextTick(B,e,t))}function B(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(o("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function A(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function U(e){o("readable nexttick read 0"),e.read(0)}function j(e,t){o("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),M(e),t.flowing&&!t.reading&&e.read(0)}function M(e){var t=e._readableState;for(o("flow",t.flowing);t.flowing&&null!==e.read(););}function D(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r);var r}function N(e){var t=e._readableState;o("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,i.nextTick(F,t,e))}function F(e,t){if(o("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function q(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}R.prototype.read=function(e){o("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return o("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?N(this):P(this),null;if(0===(e=O(e,t))&&t.ended)return 0===t.length&&N(this),null;var n,i=t.needReadable;return o("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&o("length less than watermark",i=!0),t.ended||t.reading?o("reading or ended",i=!1):i&&(o("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=O(r,t))),null===(n=e>0?D(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&N(this)),null!==n&&this.emit("data",n),n},R.prototype._read=function(e){S(this,new w("_read()"))},R.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e)}n.pipesCount+=1,o("pipe count=%d opts=%j",n.pipesCount,t);var a=t&&!1===t.end||e===i.stdout||e===i.stderr?m:u;function u(){o("onend"),e.end()}n.endEmitted?i.nextTick(a):r.once("end",a),e.on("unpipe",(function t(i,s){o("onunpipe"),i===r&&s&&!1===s.hasUnpiped&&(s.hasUnpiped=!0,o("cleanup"),e.removeListener("close",d),e.removeListener("finish",p),e.removeListener("drain",c),e.removeListener("error",f),e.removeListener("unpipe",t),r.removeListener("end",u),r.removeListener("end",m),r.removeListener("data",h),l=!0,!n.awaitDrain||e._writableState&&!e._writableState.needDrain||c())}));var c=function(e){return function(){var t=e._readableState;o("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&s(e,"data")&&(t.flowing=!0,M(e))}}(r);e.on("drain",c);var l=!1;function h(t){o("ondata");var i=e.write(t);o("dest.write",i),!1===i&&((1===n.pipesCount&&n.pipes===e||n.pipesCount>1&&-1!==q(n.pipes,e))&&!l&&(o("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function f(t){o("onerror",t),m(),e.removeListener("error",f),0===s(e,"error")&&S(e,t)}function d(){e.removeListener("finish",p),m()}function p(){o("onfinish"),e.removeListener("close",d),m()}function m(){o("unpipe"),r.unpipe(e)}return r.on("data",h),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events.error?Array.isArray(e._events.error)?e._events.error.unshift(r):e._events.error=[r,e._events.error]:e.on(t,r)}(e,"error",f),e.once("close",d),e.once("finish",p),e.emit("pipe",r),n.flowing||(o("pipe resume"),r.resume()),e},R.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=q(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},R.prototype.on=function(e,t){var r=a.prototype.on.call(this,e,t),n=this._readableState;return"data"===e?(n.readableListening=this.listenerCount("readable")>0,!1!==n.flowing&&this.resume()):"readable"===e&&(n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,o("on readable",n.length,n.reading),n.length?P(this):n.reading||i.nextTick(U,this))),r},R.prototype.addListener=R.prototype.on,R.prototype.removeListener=function(e,t){var r=a.prototype.removeListener.call(this,e,t);return"readable"===e&&i.nextTick(A,this),r},R.prototype.removeAllListeners=function(e){var t=a.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||i.nextTick(A,this),t},R.prototype.resume=function(){var e=this._readableState;return e.flowing||(o("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,i.nextTick(j,e,t))}(this,e)),e.paused=!1,this},R.prototype.pause=function(){return o("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(o("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},R.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",(function(){if(o("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){o("wrapped data"),r.decoder&&(i=r.decoder.write(i)),r.objectMode&&null==i||(r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var s=0;s<E.length;s++)e.on(E[s],this.emit.bind(this,E[s]));return this._read=function(t){o("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"==typeof Symbol&&(R.prototype[Symbol.asyncIterator]=function(){return void 0===f&&(f=r(8187)),f(this)}),Object.defineProperty(R.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(R.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(R.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),R._fromList=D,Object.defineProperty(R.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(R.from=function(e,t){return void 0===d&&(d=r(3733)),d(R,e,t)})},8597:(e,t,r)=>{"use strict";e.exports=l;var n=r(553).q,i=n.ERR_METHOD_NOT_IMPLEMENTED,o=n.ERR_MULTIPLE_CALLBACK,s=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=n.ERR_TRANSFORM_WITH_LENGTH_0,u=r(673);function c(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new o);r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function l(e){if(!(this instanceof l))return new l(e);u.call(this,e),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",h)}function h(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?f(this,null,null):this._flush((function(t,r){f(e,t,r)}))}function f(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new a;if(e._transformState.transforming)throw new s;return e.push(null)}r(3730)(l,u),l.prototype.push=function(e,t){return this._transformState.needTransform=!1,u.prototype.push.call(this,e,t)},l.prototype._transform=function(e,t,r){r(new i("_transform()"))},l.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},l.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},l.prototype._destroy=function(e,t){u.prototype._destroy.call(this,e,(function(e){t(e)}))}},8719:(e,t,r)=>{"use strict";var n,i=r(2695);function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(undefined),n=n.next}t.corkedRequestsFree.next=e}(t,e)}}e.exports=R,R.WritableState=x;var s,a={deprecate:r(72)},u=r(8208),c=r(7866).Buffer,l=r.g.Uint8Array||function(){},h=r(3390),f=r(1111).getHighWaterMark,d=r(553).q,p=d.ERR_INVALID_ARG_TYPE,m=d.ERR_METHOD_NOT_IMPLEMENTED,g=d.ERR_MULTIPLE_CALLBACK,y=d.ERR_STREAM_CANNOT_PIPE,b=d.ERR_STREAM_DESTROYED,v=d.ERR_STREAM_NULL_VALUES,w=d.ERR_STREAM_WRITE_AFTER_END,_=d.ERR_UNKNOWN_ENCODING,S=h.errorOrDestroy;function E(){}function x(e,t,s){n=n||r(673),e=e||{},"boolean"!=typeof s&&(s=t instanceof n),this.objectMode=!!e.objectMode,s&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=f(this,e,"writableHighWaterMark",s),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===e.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,n=r.sync,o=r.writecb;if("function"!=typeof o)throw new g;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,n,o){--t.pendingcb,r?(i.nextTick(o,n),i.nextTick(I,e,t),e._writableState.errorEmitted=!0,S(e,n)):(o(n),e._writableState.errorEmitted=!0,S(e,n),I(e,t))}(e,r,n,t,o);else{var s=O(r)||e.destroyed;s||r.corked||r.bufferProcessing||!r.bufferedRequest||k(e,r),n?i.nextTick(C,e,r,s,o):C(e,r,s,o)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function R(e){var t=this instanceof(n=n||r(673));if(!t&&!s.call(R,this))return new R(e);this._writableState=new x(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),u.call(this)}function T(e,t,r,n,i,o,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new b("write")):r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function C(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),I(e,t)}function k(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),s=t.corkedRequestsFree;s.entry=r;for(var a=0,u=!0;r;)i[a]=r,r.isBuf||(u=!1),r=r.next,a+=1;i.allBuffers=u,T(e,t,!0,t.length,i,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new o(t),t.bufferedRequestCount=0}else{for(;r;){var c=r.chunk,l=r.encoding,h=r.callback;if(T(e,t,!1,t.objectMode?1:c.length,c,l,h),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function O(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function P(e,t){e._final((function(r){t.pendingcb--,r&&S(e,r),t.prefinished=!0,e.emit("prefinish"),I(e,t)}))}function I(e,t){var r=O(t);if(r&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,i.nextTick(P,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var n=e._readableState;(!n||n.autoDestroy&&n.endEmitted)&&e.destroy()}return r}r(3730)(R,u),x.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(x.prototype,"buffer",{get:a.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(s=Function.prototype[Symbol.hasInstance],Object.defineProperty(R,Symbol.hasInstance,{value:function(e){return!!s.call(this,e)||this===R&&e&&e._writableState instanceof x}})):s=function(e){return e instanceof this},R.prototype.pipe=function(){S(this,new y)},R.prototype.write=function(e,t,r){var n,o=this._writableState,s=!1,a=!o.objectMode&&(n=e,c.isBuffer(n)||n instanceof l);return a&&!c.isBuffer(e)&&(e=function(e){return c.from(e)}(e)),"function"==typeof t&&(r=t,t=null),a?t="buffer":t||(t=o.defaultEncoding),"function"!=typeof r&&(r=E),o.ending?function(e,t){var r=new w;S(e,r),i.nextTick(t,r)}(this,r):(a||function(e,t,r,n){var o;return null===r?o=new v:"string"==typeof r||t.objectMode||(o=new p("chunk",["string","Buffer"],r)),!o||(S(e,o),i.nextTick(n,o),!1)}(this,o,e,r))&&(o.pendingcb++,s=function(e,t,r,n,i,o){if(!r){var s=function(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=c.from(t,r)),t}(t,n,i);n!==s&&(r=!0,i="buffer",n=s)}var a=t.objectMode?1:n.length;t.length+=a;var u=t.length<t.highWaterMark;if(u||(t.needDrain=!0),t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else T(e,t,!1,a,n,i,o);return u}(this,o,a,e,t,r)),s},R.prototype.cork=function(){this._writableState.corked++},R.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||k(this,e))},R.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new _(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(R.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(R.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),R.prototype._write=function(e,t,r){r(new m("_write()"))},R.prototype._writev=null,R.prototype.end=function(e,t,r){var n=this._writableState;return"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||function(e,t,r){t.ending=!0,I(e,t),r&&(t.finished?i.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}(this,n,r),this},Object.defineProperty(R.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(R.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),R.prototype.destroy=h.destroy,R.prototype._undestroy=h.undestroy,R.prototype._destroy=function(e,t){t(e)}},8187:(e,t,r)=>{"use strict";var n,i=r(2695);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=r(2426),a=Symbol("lastResolve"),u=Symbol("lastReject"),c=Symbol("error"),l=Symbol("ended"),h=Symbol("lastPromise"),f=Symbol("handlePromise"),d=Symbol("stream");function p(e,t){return{value:e,done:t}}function m(e){var t=e[a];if(null!==t){var r=e[d].read();null!==r&&(e[h]=null,e[a]=null,e[u]=null,t(p(r,!1)))}}function g(e){i.nextTick(m,e)}var y=Object.getPrototypeOf((function(){})),b=Object.setPrototypeOf((o(n={get stream(){return this[d]},next:function(){var e=this,t=this[c];if(null!==t)return Promise.reject(t);if(this[l])return Promise.resolve(p(void 0,!0));if(this[d].destroyed)return new Promise((function(t,r){i.nextTick((function(){e[c]?r(e[c]):t(p(void 0,!0))}))}));var r,n=this[h];if(n)r=new Promise(function(e,t){return function(r,n){e.then((function(){t[l]?r(p(void 0,!0)):t[f](r,n)}),n)}}(n,this));else{var o=this[d].read();if(null!==o)return Promise.resolve(p(o,!1));r=new Promise(this[f])}return this[h]=r,r}},Symbol.asyncIterator,(function(){return this})),o(n,"return",(function(){var e=this;return new Promise((function(t,r){e[d].destroy(null,(function(e){e?r(e):t(p(void 0,!0))}))}))})),n),y);e.exports=function(e){var t,r=Object.create(b,(o(t={},d,{value:e,writable:!0}),o(t,a,{value:null,writable:!0}),o(t,u,{value:null,writable:!0}),o(t,c,{value:null,writable:!0}),o(t,l,{value:e._readableState.endEmitted,writable:!0}),o(t,f,{value:function(e,t){var n=r[d].read();n?(r[h]=null,r[a]=null,r[u]=null,e(p(n,!1))):(r[a]=e,r[u]=t)},writable:!0}),t));return r[h]=null,s(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[u];return null!==t&&(r[h]=null,r[a]=null,r[u]=null,t(e)),void(r[c]=e)}var n=r[a];null!==n&&(r[h]=null,r[a]=null,r[u]=null,n(p(void 0,!0))),r[l]=!0})),e.on("readable",g.bind(null,r)),r}},4506:(e,t,r)=>{"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=r(7866).Buffer,a=r(462).inspect,u=a&&a.custom||"inspect";e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,r;return t=e,(r=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return s.alloc(0);for(var t,r,n,i=s.allocUnsafe(e>>>0),o=this.head,a=0;o;)t=o.data,r=i,n=a,s.prototype.copy.call(t,r,n),a+=o.data.length,o=o.next;return i}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,n=t.data;for(e-=n.length;t=t.next;){var i=t.data,o=e>i.length?i.length:e;if(o===i.length?n+=i:n+=i.slice(0,e),0==(e-=o)){o===i.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(o));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(e){var t=s.allocUnsafe(e),r=this.head,n=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var i=r.data,o=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,o),0==(e-=o)){o===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=i.slice(o));break}++n}return this.length-=n,t}},{key:u,value:function(e,t){return a(this,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t,{depth:0,customInspect:!1}))}}])&&o(t.prototype,r),e}()},3390:(e,t,r)=>{"use strict";var n=r(2695);function i(e,t){s(e,t),o(e)}function o(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function s(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var r=this,a=this._readableState&&this._readableState.destroyed,u=this._writableState&&this._writableState.destroyed;return a||u?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,n.nextTick(s,this,e)):n.nextTick(s,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?r._writableState?r._writableState.errorEmitted?n.nextTick(o,r):(r._writableState.errorEmitted=!0,n.nextTick(i,r,e)):n.nextTick(i,r,e):t?(n.nextTick(o,r),t(e)):n.nextTick(o,r)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}}},2426:(e,t,r)=>{"use strict";var n=r(553).q.ERR_STREAM_PREMATURE_CLOSE;function i(){}e.exports=function e(t,r,o){if("function"==typeof r)return e(t,null,r);r||(r={}),o=function(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];e.apply(this,n)}}}(o||i);var s=r.readable||!1!==r.readable&&t.readable,a=r.writable||!1!==r.writable&&t.writable,u=function(){t.writable||l()},c=t._writableState&&t._writableState.finished,l=function(){a=!1,c=!0,s||o.call(t)},h=t._readableState&&t._readableState.endEmitted,f=function(){s=!1,h=!0,a||o.call(t)},d=function(e){o.call(t,e)},p=function(){var e;return s&&!h?(t._readableState&&t._readableState.ended||(e=new n),o.call(t,e)):a&&!c?(t._writableState&&t._writableState.ended||(e=new n),o.call(t,e)):void 0},m=function(){t.req.on("finish",l)};return function(e){return e.setHeader&&"function"==typeof e.abort}(t)?(t.on("complete",l),t.on("abort",p),t.req?m():t.on("request",m)):a&&!t._writableState&&(t.on("end",u),t.on("close",u)),t.on("end",f),t.on("finish",l),!1!==r.error&&t.on("error",d),t.on("close",p),function(){t.removeListener("complete",l),t.removeListener("abort",p),t.removeListener("request",m),t.req&&t.req.removeListener("finish",l),t.removeListener("end",u),t.removeListener("close",u),t.removeListener("finish",l),t.removeListener("end",f),t.removeListener("error",d),t.removeListener("close",p)}}},3733:e=>{e.exports=function(){throw new Error("Readable.from is not available in the browser")}},2970:(e,t,r)=>{"use strict";var n,i=r(553).q,o=i.ERR_MISSING_ARGS,s=i.ERR_STREAM_DESTROYED;function a(e){if(e)throw e}function u(e,t,i,o){o=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(o);var a=!1;e.on("close",(function(){a=!0})),void 0===n&&(n=r(2426)),n(e,{readable:t,writable:i},(function(e){if(e)return o(e);a=!0,o()}));var u=!1;return function(t){if(!a&&!u)return u=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void o(t||new s("pipe"))}}function c(e){e()}function l(e,t){return e.pipe(t)}function h(e){return e.length?"function"!=typeof e[e.length-1]?a:e.pop():a}e.exports=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,i=h(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new o("streams");var s=t.map((function(e,r){var o=r<t.length-1;return u(e,o,r>0,(function(e){n||(n=e),e&&s.forEach(c),o||(s.forEach(c),i(n))}))}));return t.reduce(l)}},1111:(e,t,r)=>{"use strict";var n=r(553).q.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,r,i){var o=function(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}(t,i,r);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new n(i?r:"highWaterMark",o);return Math.floor(o)}return e.objectMode?16:16384}}},8208:(e,t,r)=>{e.exports=r(488).EventEmitter},9685:(e,t,r)=>{var n=r(7866),i=n.Buffer;function o(e,t){for(var r in e)t[r]=e[r]}function s(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(o(n,t),t.Buffer=s),s.prototype=Object.create(i.prototype),o(i,s),s.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,r)},s.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},8981:(e,t,r)=>{e.exports=i;var n=r(488).EventEmitter;function i(){n.call(this)}r(3730)(i,n),i.Readable=r(5006),i.Writable=r(8719),i.Duplex=r(673),i.Transform=r(8597),i.PassThrough=r(4343),i.finished=r(2426),i.pipeline=r(2970),i.Stream=i,i.prototype.pipe=function(e,t){var r=this;function i(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause()}function o(){r.readable&&r.resume&&r.resume()}r.on("data",i),e.on("drain",o),e._isStdio||t&&!1===t.end||(r.on("end",a),r.on("close",u));var s=!1;function a(){s||(s=!0,e.end())}function u(){s||(s=!0,"function"==typeof e.destroy&&e.destroy())}function c(e){if(l(),0===n.listenerCount(this,"error"))throw e}function l(){r.removeListener("data",i),e.removeListener("drain",o),r.removeListener("end",a),r.removeListener("close",u),r.removeListener("error",c),e.removeListener("error",c),r.removeListener("end",l),r.removeListener("close",l),e.removeListener("close",l)}return r.on("error",c),e.on("error",c),r.on("end",l),r.on("close",l),e.on("close",l),e.emit("pipe",r),e}},7361:(e,t,r)=>{"use strict";var n=r(9685).Buffer,i=n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(n.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=u,this.end=c,t=4;break;case"utf8":this.fillLast=a,t=4;break;case"base64":this.text=l,this.end=h,t=3;break;default:return this.write=f,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function a(e){var t=this.lastTotal-this.lastNeed,r=function(e,t,r){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function u(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function c(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function l(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function h(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function f(e){return e.toString(this.encoding)}function d(e){return e&&e.length?this.write(e):""}t.s=o,o.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},o.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var i=s(t[n]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--n<r||-2===i?0:(i=s(t[n]))>=0?(i>0&&(e.lastNeed=i-2),i):--n<r||-2===i?0:(i=s(t[n]))>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},2993:(e,t)=>{"use strict";var r=function(){function e(){this._state=new Int32Array(4),this._buffer=new ArrayBuffer(68),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}return e.hashStr=function(e,t){return void 0===t&&(t=!1),this.onePassHasher.start().appendStr(e).end(t)},e.hashAsciiStr=function(e,t){return void 0===t&&(t=!1),this.onePassHasher.start().appendAsciiStr(e).end(t)},e._hex=function(t){var r,n,i,o,s=e.hexChars,a=e.hexOut;for(o=0;o<4;o+=1)for(n=8*o,r=t[o],i=0;i<8;i+=2)a[n+1+i]=s.charAt(15&r),r>>>=4,a[n+0+i]=s.charAt(15&r),r>>>=4;return a.join("")},e._md5cycle=function(e,t){var r=e[0],n=e[1],i=e[2],o=e[3];n=((n+=((i=((i+=((o=((o+=((r=((r+=(n&i|~n&o)+t[0]-680876936|0)<<7|r>>>25)+n|0)&n|~r&i)+t[1]-389564586|0)<<12|o>>>20)+r|0)&r|~o&n)+t[2]+606105819|0)<<17|i>>>15)+o|0)&o|~i&r)+t[3]-1044525330|0)<<22|n>>>10)+i|0,n=((n+=((i=((i+=((o=((o+=((r=((r+=(n&i|~n&o)+t[4]-176418897|0)<<7|r>>>25)+n|0)&n|~r&i)+t[5]+1200080426|0)<<12|o>>>20)+r|0)&r|~o&n)+t[6]-1473231341|0)<<17|i>>>15)+o|0)&o|~i&r)+t[7]-45705983|0)<<22|n>>>10)+i|0,n=((n+=((i=((i+=((o=((o+=((r=((r+=(n&i|~n&o)+t[8]+1770035416|0)<<7|r>>>25)+n|0)&n|~r&i)+t[9]-1958414417|0)<<12|o>>>20)+r|0)&r|~o&n)+t[10]-42063|0)<<17|i>>>15)+o|0)&o|~i&r)+t[11]-1990404162|0)<<22|n>>>10)+i|0,n=((n+=((i=((i+=((o=((o+=((r=((r+=(n&i|~n&o)+t[12]+1804603682|0)<<7|r>>>25)+n|0)&n|~r&i)+t[13]-40341101|0)<<12|o>>>20)+r|0)&r|~o&n)+t[14]-1502002290|0)<<17|i>>>15)+o|0)&o|~i&r)+t[15]+1236535329|0)<<22|n>>>10)+i|0,n=((n+=((i=((i+=((o=((o+=((r=((r+=(n&o|i&~o)+t[1]-165796510|0)<<5|r>>>27)+n|0)&i|n&~i)+t[6]-1069501632|0)<<9|o>>>23)+r|0)&n|r&~n)+t[11]+643717713|0)<<14|i>>>18)+o|0)&r|o&~r)+t[0]-373897302|0)<<20|n>>>12)+i|0,n=((n+=((i=((i+=((o=((o+=((r=((r+=(n&o|i&~o)+t[5]-701558691|0)<<5|r>>>27)+n|0)&i|n&~i)+t[10]+38016083|0)<<9|o>>>23)+r|0)&n|r&~n)+t[15]-660478335|0)<<14|i>>>18)+o|0)&r|o&~r)+t[4]-405537848|0)<<20|n>>>12)+i|0,n=((n+=((i=((i+=((o=((o+=((r=((r+=(n&o|i&~o)+t[9]+568446438|0)<<5|r>>>27)+n|0)&i|n&~i)+t[14]-1019803690|0)<<9|o>>>23)+r|0)&n|r&~n)+t[3]-187363961|0)<<14|i>>>18)+o|0)&r|o&~r)+t[8]+1163531501|0)<<20|n>>>12)+i|0,n=((n+=((i=((i+=((o=((o+=((r=((r+=(n&o|i&~o)+t[13]-1444681467|0)<<5|r>>>27)+n|0)&i|n&~i)+t[2]-51403784|0)<<9|o>>>23)+r|0)&n|r&~n)+t[7]+1735328473|0)<<14|i>>>18)+o|0)&r|o&~r)+t[12]-1926607734|0)<<20|n>>>12)+i|0,n=((n+=((i=((i+=((o=((o+=((r=((r+=(n^i^o)+t[5]-378558|0)<<4|r>>>28)+n|0)^n^i)+t[8]-2022574463|0)<<11|o>>>21)+r|0)^r^n)+t[11]+1839030562|0)<<16|i>>>16)+o|0)^o^r)+t[14]-35309556|0)<<23|n>>>9)+i|0,n=((n+=((i=((i+=((o=((o+=((r=((r+=(n^i^o)+t[1]-1530992060|0)<<4|r>>>28)+n|0)^n^i)+t[4]+1272893353|0)<<11|o>>>21)+r|0)^r^n)+t[7]-155497632|0)<<16|i>>>16)+o|0)^o^r)+t[10]-1094730640|0)<<23|n>>>9)+i|0,n=((n+=((i=((i+=((o=((o+=((r=((r+=(n^i^o)+t[13]+681279174|0)<<4|r>>>28)+n|0)^n^i)+t[0]-358537222|0)<<11|o>>>21)+r|0)^r^n)+t[3]-722521979|0)<<16|i>>>16)+o|0)^o^r)+t[6]+76029189|0)<<23|n>>>9)+i|0,n=((n+=((i=((i+=((o=((o+=((r=((r+=(n^i^o)+t[9]-640364487|0)<<4|r>>>28)+n|0)^n^i)+t[12]-421815835|0)<<11|o>>>21)+r|0)^r^n)+t[15]+530742520|0)<<16|i>>>16)+o|0)^o^r)+t[2]-995338651|0)<<23|n>>>9)+i|0,n=((n+=((o=((o+=(n^((r=((r+=(i^(n|~o))+t[0]-198630844|0)<<6|r>>>26)+n|0)|~i))+t[7]+1126891415|0)<<10|o>>>22)+r|0)^((i=((i+=(r^(o|~n))+t[14]-1416354905|0)<<15|i>>>17)+o|0)|~r))+t[5]-57434055|0)<<21|n>>>11)+i|0,n=((n+=((o=((o+=(n^((r=((r+=(i^(n|~o))+t[12]+1700485571|0)<<6|r>>>26)+n|0)|~i))+t[3]-1894986606|0)<<10|o>>>22)+r|0)^((i=((i+=(r^(o|~n))+t[10]-1051523|0)<<15|i>>>17)+o|0)|~r))+t[1]-2054922799|0)<<21|n>>>11)+i|0,n=((n+=((o=((o+=(n^((r=((r+=(i^(n|~o))+t[8]+1873313359|0)<<6|r>>>26)+n|0)|~i))+t[15]-30611744|0)<<10|o>>>22)+r|0)^((i=((i+=(r^(o|~n))+t[6]-1560198380|0)<<15|i>>>17)+o|0)|~r))+t[13]+1309151649|0)<<21|n>>>11)+i|0,n=((n+=((o=((o+=(n^((r=((r+=(i^(n|~o))+t[4]-145523070|0)<<6|r>>>26)+n|0)|~i))+t[11]-1120210379|0)<<10|o>>>22)+r|0)^((i=((i+=(r^(o|~n))+t[2]+718787259|0)<<15|i>>>17)+o|0)|~r))+t[9]-343485551|0)<<21|n>>>11)+i|0,e[0]=r+e[0]|0,e[1]=n+e[1]|0,e[2]=i+e[2]|0,e[3]=o+e[3]|0},e.prototype.start=function(){return this._dataLength=0,this._bufferLength=0,this._state.set(e.stateIdentity),this},e.prototype.appendStr=function(t){var r,n,i=this._buffer8,o=this._buffer32,s=this._bufferLength;for(n=0;n<t.length;n+=1){if((r=t.charCodeAt(n))<128)i[s++]=r;else if(r<2048)i[s++]=192+(r>>>6),i[s++]=63&r|128;else if(r<55296||r>56319)i[s++]=224+(r>>>12),i[s++]=r>>>6&63|128,i[s++]=63&r|128;else{if((r=1024*(r-55296)+(t.charCodeAt(++n)-56320)+65536)>1114111)throw new Error("Unicode standard supports code points up to U+10FFFF");i[s++]=240+(r>>>18),i[s++]=r>>>12&63|128,i[s++]=r>>>6&63|128,i[s++]=63&r|128}s>=64&&(this._dataLength+=64,e._md5cycle(this._state,o),s-=64,o[0]=o[16])}return this._bufferLength=s,this},e.prototype.appendAsciiStr=function(t){for(var r,n=this._buffer8,i=this._buffer32,o=this._bufferLength,s=0;;){for(r=Math.min(t.length-s,64-o);r--;)n[o++]=t.charCodeAt(s++);if(o<64)break;this._dataLength+=64,e._md5cycle(this._state,i),o=0}return this._bufferLength=o,this},e.prototype.appendByteArray=function(t){for(var r,n=this._buffer8,i=this._buffer32,o=this._bufferLength,s=0;;){for(r=Math.min(t.length-s,64-o);r--;)n[o++]=t[s++];if(o<64)break;this._dataLength+=64,e._md5cycle(this._state,i),o=0}return this._bufferLength=o,this},e.prototype.getState=function(){var e=this,t=e._state;return{buffer:String.fromCharCode.apply(null,e._buffer8),buflen:e._bufferLength,length:e._dataLength,state:[t[0],t[1],t[2],t[3]]}},e.prototype.setState=function(e){var t,r=e.buffer,n=e.state,i=this._state;for(this._dataLength=e.length,this._bufferLength=e.buflen,i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3],t=0;t<r.length;t+=1)this._buffer8[t]=r.charCodeAt(t)},e.prototype.end=function(t){void 0===t&&(t=!1);var r,n=this._bufferLength,i=this._buffer8,o=this._buffer32,s=1+(n>>2);if(this._dataLength+=n,i[n]=128,i[n+1]=i[n+2]=i[n+3]=0,o.set(e.buffer32Identity.subarray(s),s),n>55&&(e._md5cycle(this._state,o),o.set(e.buffer32Identity)),(r=8*this._dataLength)<=4294967295)o[14]=r;else{var a=r.toString(16).match(/(.*?)(.{0,8})$/);if(null===a)return;var u=parseInt(a[2],16),c=parseInt(a[1],16)||0;o[14]=u,o[15]=c}return e._md5cycle(this._state,o),t?this._state:e._hex(this._state)},e.stateIdentity=new Int32Array([1732584193,-271733879,-1732584194,271733878]),e.buffer32Identity=new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),e.hexChars="0123456789abcdef",e.hexOut=[],e.onePassHasher=new e,e}();t.V=r,"5d41402abc4b2a76b9719d911017c592"!==r.hashStr("hello")&&console.error("Md5 self test failed.")},72:(e,t,r)=>{function n(e){try{if(!r.g.localStorage)return!1}catch(e){return!1}var t=r.g.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}e.exports=function(e,t){if(n("noDeprecation"))return e;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}}},769:e=>{e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},8143:(e,t,r)=>{var n=r(6944);e.exports=function(e){if(!n(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},9611:(e,t,r)=>{var n=r(3706),i=r(2361),o=r(3376),s=n("unscopables"),a=Array.prototype;null==a[s]&&o.f(a,s,{configurable:!0,value:i(null)}),e.exports=function(e){a[s][e]=!0}},2482:e=>{e.exports=function(e,t,r){if(!(e instanceof t))throw TypeError("Incorrect "+(r?r+" ":"")+"invocation");return e}},47:(e,t,r)=>{var n=r(6944);e.exports=function(e){if(!n(e))throw TypeError(String(e)+" is not an object");return e}},1774:(e,t,r)=>{"use strict";var n=r(4833),i=r(4680),o=r(3960),s=r(1008),a=r(4954),u=r(2076),c=r(3126);e.exports=function(e){var t,r,l,h,f,d,p=i(e),m="function"==typeof this?this:Array,g=arguments.length,y=g>1?arguments[1]:void 0,b=void 0!==y,v=c(p),w=0;if(b&&(y=n(y,g>2?arguments[2]:void 0,2)),null==v||m==Array&&s(v))for(r=new m(t=a(p.length));t>w;w++)d=b?y(p[w],w):p[w],u(r,w,d);else for(f=(h=v.call(p)).next,r=new m;!(l=f.call(h)).done;w++)d=b?o(h,y,[l.value,w],!0):l.value,u(r,w,d);return r.length=w,r}},1270:(e,t,r)=>{var n=r(8852),i=r(4954),o=r(2145),s=function(e){return function(t,r,s){var a,u=n(t),c=i(u.length),l=o(s,c);if(e&&r!=r){for(;c>l;)if((a=u[l++])!=a)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===r)return e||l||0;return!e&&-1}};e.exports={includes:s(!0),indexOf:s(!1)}},3960:(e,t,r)=>{var n=r(47),i=r(2608);e.exports=function(e,t,r,o){try{return o?t(n(r)[0],r[1]):t(r)}catch(t){throw i(e),t}}},3565:e=>{var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},8753:(e,t,r)=>{var n=r(939),i=r(3565),o=r(3706)("toStringTag"),s="Arguments"==i(function(){return arguments}());e.exports=n?i:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),o))?r:s?i(t):"Object"==(n=i(t))&&"function"==typeof t.callee?"Arguments":n}},7918:(e,t,r)=>{var n=r(5884),i=r(8204),o=r(7825),s=r(3376);e.exports=function(e,t){for(var r=i(t),a=s.f,u=o.f,c=0;c<r.length;c++){var l=r[c];n(e,l)||a(e,l,u(t,l))}}},9241:(e,t,r)=>{var n=r(7841);e.exports=!n((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},9670:(e,t,r)=>{"use strict";var n=r(888).IteratorPrototype,i=r(2361),o=r(976),s=r(9400),a=r(873),u=function(){return this};e.exports=function(e,t,r){var c=t+" Iterator";return e.prototype=i(n,{next:o(1,r)}),s(e,c,!1,!0),a[c]=u,e}},4791:(e,t,r)=>{var n=r(5542),i=r(3376),o=r(976);e.exports=n?function(e,t,r){return i.f(e,t,o(1,r))}:function(e,t,r){return e[t]=r,e}},976:e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},2076:(e,t,r)=>{"use strict";var n=r(2694),i=r(3376),o=r(976);e.exports=function(e,t,r){var s=n(t);s in e?i.f(e,s,o(0,r)):e[s]=r}},3131:(e,t,r)=>{"use strict";var n=r(1082),i=r(9670),o=r(8186),s=r(2686),a=r(9400),u=r(4791),c=r(1249),l=r(3706),h=r(6852),f=r(873),d=r(888),p=d.IteratorPrototype,m=d.BUGGY_SAFARI_ITERATORS,g=l("iterator"),y="keys",b="values",v="entries",w=function(){return this};e.exports=function(e,t,r,l,d,_,S){i(r,t,l);var E,x,R,T=function(e){if(e===d&&I)return I;if(!m&&e in O)return O[e];switch(e){case y:case b:case v:return function(){return new r(this,e)}}return function(){return new r(this)}},C=t+" Iterator",k=!1,O=e.prototype,P=O[g]||O["@@iterator"]||d&&O[d],I=!m&&P||T(d),L="Array"==t&&O.entries||P;if(L&&(E=o(L.call(new e)),p!==Object.prototype&&E.next&&(h||o(E)===p||(s?s(E,p):"function"!=typeof E[g]&&u(E,g,w)),a(E,C,!0,!0),h&&(f[C]=w))),d==b&&P&&P.name!==b&&(k=!0,I=function(){return P.call(this)}),h&&!S||O[g]===I||u(O,g,I),f[t]=I,d)if(x={values:T(b),keys:_?I:T(y),entries:T(v)},S)for(R in x)(m||k||!(R in O))&&c(O,R,x[R]);else n({target:t,proto:!0,forced:m||k},x);return x}},5542:(e,t,r)=>{var n=r(7841);e.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},3879:(e,t,r)=>{var n=r(6874),i=r(6944),o=n.document,s=i(o)&&i(o.createElement);e.exports=function(e){return s?o.createElement(e):{}}},4229:(e,t,r)=>{var n=r(4578);e.exports=n("navigator","userAgent")||""},579:(e,t,r)=>{var n,i,o=r(6874),s=r(4229),a=o.process,u=o.Deno,c=a&&a.versions||u&&u.version,l=c&&c.v8;l?i=(n=l.split("."))[0]<4?1:n[0]+n[1]:s&&(!(n=s.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=s.match(/Chrome\/(\d+)/))&&(i=n[1]),e.exports=i&&+i},9752:e=>{e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},1082:(e,t,r)=>{var n=r(6874),i=r(7825).f,o=r(4791),s=r(1249),a=r(1278),u=r(7918),c=r(2350);e.exports=function(e,t){var r,l,h,f,d,p=e.target,m=e.global,g=e.stat;if(r=m?n:g?n[p]||a(p,{}):(n[p]||{}).prototype)for(l in t){if(f=t[l],h=e.noTargetGet?(d=i(r,l))&&d.value:r[l],!c(m?l:p+(g?".":"#")+l,e.forced)&&void 0!==h){if(typeof f==typeof h)continue;u(f,h)}(e.sham||h&&h.sham)&&o(f,"sham",!0),s(r,l,f,e)}}},7841:e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},4833:(e,t,r)=>{var n=r(769);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 0:return function(){return e.call(t)};case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}}},4578:(e,t,r)=>{var n=r(6874),i=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?i(n[e]):n[e]&&n[e][t]}},3126:(e,t,r)=>{var n=r(8753),i=r(873),o=r(3706)("iterator");e.exports=function(e){if(null!=e)return e[o]||e["@@iterator"]||i[n(e)]}},7053:(e,t,r)=>{var n=r(47),i=r(3126);e.exports=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return n(t.call(e))}},6874:(e,t,r)=>{var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof r.g&&r.g)||function(){return this}()||Function("return this")()},5884:(e,t,r)=>{var n=r(4680),i={}.hasOwnProperty;e.exports=Object.hasOwn||function(e,t){return i.call(n(e),t)}},5644:e=>{e.exports={}},7666:(e,t,r)=>{var n=r(4578);e.exports=n("document","documentElement")},6056:(e,t,r)=>{var n=r(5542),i=r(7841),o=r(3879);e.exports=!n&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},8517:(e,t,r)=>{var n=r(7841),i=r(3565),o="".split;e.exports=n((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==i(e)?o.call(e,""):Object(e)}:Object},6090:(e,t,r)=>{var n=r(4925),i=Function.toString;"function"!=typeof n.inspectSource&&(n.inspectSource=function(e){return i.call(e)}),e.exports=n.inspectSource},6619:(e,t,r)=>{var n,i,o,s=r(9957),a=r(6874),u=r(6944),c=r(4791),l=r(5884),h=r(4925),f=r(8698),d=r(5644),p="Object already initialized",m=a.WeakMap;if(s||h.state){var g=h.state||(h.state=new m),y=g.get,b=g.has,v=g.set;n=function(e,t){if(b.call(g,e))throw new TypeError(p);return t.facade=e,v.call(g,e,t),t},i=function(e){return y.call(g,e)||{}},o=function(e){return b.call(g,e)}}else{var w=f("state");d[w]=!0,n=function(e,t){if(l(e,w))throw new TypeError(p);return t.facade=e,c(e,w,t),t},i=function(e){return l(e,w)?e[w]:{}},o=function(e){return l(e,w)}}e.exports={set:n,get:i,has:o,enforce:function(e){return o(e)?i(e):n(e,{})},getterFor:function(e){return function(t){var r;if(!u(t)||(r=i(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return r}}}},1008:(e,t,r)=>{var n=r(3706),i=r(873),o=n("iterator"),s=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||s[o]===e)}},2350:(e,t,r)=>{var n=r(7841),i=/#|\.prototype\./,o=function(e,t){var r=a[s(e)];return r==c||r!=u&&("function"==typeof t?n(t):!!t)},s=o.normalize=function(e){return String(e).replace(i,".").toLowerCase()},a=o.data={},u=o.NATIVE="N",c=o.POLYFILL="P";e.exports=o},6944:e=>{e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},6852:e=>{e.exports=!1},8377:(e,t,r)=>{var n=r(4578),i=r(4587);e.exports=i?function(e){return"symbol"==typeof e}:function(e){var t=n("Symbol");return"function"==typeof t&&Object(e)instanceof t}},2608:(e,t,r)=>{var n=r(47);e.exports=function(e){var t=e.return;if(void 0!==t)return n(t.call(e)).value}},888:(e,t,r)=>{"use strict";var n,i,o,s=r(7841),a=r(8186),u=r(4791),c=r(5884),l=r(3706),h=r(6852),f=l("iterator"),d=!1;[].keys&&("next"in(o=[].keys())?(i=a(a(o)))!==Object.prototype&&(n=i):d=!0);var p=null==n||s((function(){var e={};return n[f].call(e)!==e}));p&&(n={}),h&&!p||c(n,f)||u(n,f,(function(){return this})),e.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:d}},873:e=>{e.exports={}},1453:(e,t,r)=>{var n=r(579),i=r(7841);e.exports=!!Object.getOwnPropertySymbols&&!i((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&n&&n<41}))},1781:(e,t,r)=>{var n=r(7841),i=r(3706),o=r(6852),s=i("iterator");e.exports=!n((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,r="";return e.pathname="c%20d",t.forEach((function(e,n){t.delete("b"),r+=n+e})),o&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[s]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==r||"x"!==new URL("http://x",void 0).host}))},9957:(e,t,r)=>{var n=r(6874),i=r(6090),o=n.WeakMap;e.exports="function"==typeof o&&/native code/.test(i(o))},5277:(e,t,r)=>{"use strict";var n=r(5542),i=r(7841),o=r(965),s=r(1913),a=r(3626),u=r(4680),c=r(8517),l=Object.assign,h=Object.defineProperty;e.exports=!l||i((function(){if(n&&1!==l({b:1},l(h({},"a",{enumerable:!0,get:function(){h(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},r=Symbol(),i="abcdefghijklmnopqrst";return e[r]=7,i.split("").forEach((function(e){t[e]=e})),7!=l({},e)[r]||o(l({},t)).join("")!=i}))?function(e,t){for(var r=u(e),i=arguments.length,l=1,h=s.f,f=a.f;i>l;)for(var d,p=c(arguments[l++]),m=h?o(p).concat(h(p)):o(p),g=m.length,y=0;g>y;)d=m[y++],n&&!f.call(p,d)||(r[d]=p[d]);return r}:l},2361:(e,t,r)=>{var n,i=r(47),o=r(7852),s=r(9752),a=r(5644),u=r(7666),c=r(3879),l=r(8698)("IE_PROTO"),h=function(){},f=function(e){return"<script>"+e+"<\/script>"},d=function(e){e.write(f("")),e.close();var t=e.parentWindow.Object;return e=null,t},p=function(){try{n=new ActiveXObject("htmlfile")}catch(e){}var e,t;p="undefined"!=typeof document?document.domain&&n?d(n):((t=c("iframe")).style.display="none",u.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(f("document.F=Object")),e.close(),e.F):d(n);for(var r=s.length;r--;)delete p.prototype[s[r]];return p()};a[l]=!0,e.exports=Object.create||function(e,t){var r;return null!==e?(h.prototype=i(e),r=new h,h.prototype=null,r[l]=e):r=p(),void 0===t?r:o(r,t)}},7852:(e,t,r)=>{var n=r(5542),i=r(3376),o=r(47),s=r(965);e.exports=n?Object.defineProperties:function(e,t){o(e);for(var r,n=s(t),a=n.length,u=0;a>u;)i.f(e,r=n[u++],t[r]);return e}},3376:(e,t,r)=>{var n=r(5542),i=r(6056),o=r(47),s=r(2694),a=Object.defineProperty;t.f=n?a:function(e,t,r){if(o(e),t=s(t),o(r),i)try{return a(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},7825:(e,t,r)=>{var n=r(5542),i=r(3626),o=r(976),s=r(8852),a=r(2694),u=r(5884),c=r(6056),l=Object.getOwnPropertyDescriptor;t.f=n?l:function(e,t){if(e=s(e),t=a(t),c)try{return l(e,t)}catch(e){}if(u(e,t))return o(!i.f.call(e,t),e[t])}},8401:(e,t,r)=>{var n=r(8104),i=r(9752).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},1913:(e,t)=>{t.f=Object.getOwnPropertySymbols},8186:(e,t,r)=>{var n=r(5884),i=r(4680),o=r(8698),s=r(9241),a=o("IE_PROTO"),u=Object.prototype;e.exports=s?Object.getPrototypeOf:function(e){return e=i(e),n(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?u:null}},8104:(e,t,r)=>{var n=r(5884),i=r(8852),o=r(1270).indexOf,s=r(5644);e.exports=function(e,t){var r,a=i(e),u=0,c=[];for(r in a)!n(s,r)&&n(a,r)&&c.push(r);for(;t.length>u;)n(a,r=t[u++])&&(~o(c,r)||c.push(r));return c}},965:(e,t,r)=>{var n=r(8104),i=r(9752);e.exports=Object.keys||function(e){return n(e,i)}},3626:(e,t)=>{"use strict";var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,i=n&&!r.call({1:2},1);t.f=i?function(e){var t=n(this,e);return!!t&&t.enumerable}:r},2686:(e,t,r)=>{var n=r(47),i=r(8143);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(r,[]),t=r instanceof Array}catch(e){}return function(r,o){return n(r),i(o),t?e.call(r,o):r.__proto__=o,r}}():void 0)},2392:(e,t,r)=>{var n=r(6944);e.exports=function(e,t){var r,i;if("string"===t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;if("function"==typeof(r=e.valueOf)&&!n(i=r.call(e)))return i;if("string"!==t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},8204:(e,t,r)=>{var n=r(4578),i=r(8401),o=r(1913),s=r(47);e.exports=n("Reflect","ownKeys")||function(e){var t=i.f(s(e)),r=o.f;return r?t.concat(r(e)):t}},7490:(e,t,r)=>{var n=r(1249);e.exports=function(e,t,r){for(var i in t)n(e,i,t[i],r);return e}},1249:(e,t,r)=>{var n=r(6874),i=r(4791),o=r(5884),s=r(1278),a=r(6090),u=r(6619),c=u.get,l=u.enforce,h=String(String).split("String");(e.exports=function(e,t,r,a){var u,c=!!a&&!!a.unsafe,f=!!a&&!!a.enumerable,d=!!a&&!!a.noTargetGet;"function"==typeof r&&("string"!=typeof t||o(r,"name")||i(r,"name",t),(u=l(r)).source||(u.source=h.join("string"==typeof t?t:""))),e!==n?(c?!d&&e[t]&&(f=!0):delete e[t],f?e[t]=r:i(e,t,r)):f?e[t]=r:s(t,r)})(Function.prototype,"toString",(function(){return"function"==typeof this&&c(this).source||a(this)}))},164:e=>{e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},1278:(e,t,r)=>{var n=r(6874);e.exports=function(e,t){try{Object.defineProperty(n,e,{value:t,configurable:!0,writable:!0})}catch(r){n[e]=t}return t}},9400:(e,t,r)=>{var n=r(3376).f,i=r(5884),o=r(3706)("toStringTag");e.exports=function(e,t,r){e&&!i(e=r?e:e.prototype,o)&&n(e,o,{configurable:!0,value:t})}},8698:(e,t,r)=>{var n=r(3215),i=r(8435),o=n("keys");e.exports=function(e){return o[e]||(o[e]=i(e))}},4925:(e,t,r)=>{var n=r(6874),i=r(1278),o="__core-js_shared__",s=n[o]||i(o,{});e.exports=s},3215:(e,t,r)=>{var n=r(6852),i=r(4925);(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.16.2",mode:n?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},6174:(e,t,r)=>{var n=r(7896),i=r(401),o=r(164),s=function(e){return function(t,r){var s,a,u=i(o(t)),c=n(r),l=u.length;return c<0||c>=l?e?"":void 0:(s=u.charCodeAt(c))<55296||s>56319||c+1===l||(a=u.charCodeAt(c+1))<56320||a>57343?e?u.charAt(c):s:e?u.slice(c,c+2):a-56320+(s-55296<<10)+65536}};e.exports={codeAt:s(!1),charAt:s(!0)}},8:e=>{"use strict";var t=2147483647,r=/[^\0-\u007E]/,n=/[.\u3002\uFF0E\uFF61]/g,i="Overflow: input needs wider integers to process",o=Math.floor,s=String.fromCharCode,a=function(e){return e+22+75*(e<26)},u=function(e,t,r){var n=0;for(e=r?o(e/700):e>>1,e+=o(e/t);e>455;n+=36)e=o(e/35);return o(n+36*e/(e+38))},c=function(e){var r,n,c=[],l=(e=function(e){for(var t=[],r=0,n=e.length;r<n;){var i=e.charCodeAt(r++);if(i>=55296&&i<=56319&&r<n){var o=e.charCodeAt(r++);56320==(64512&o)?t.push(((1023&i)<<10)+(1023&o)+65536):(t.push(i),r--)}else t.push(i)}return t}(e)).length,h=128,f=0,d=72;for(r=0;r<e.length;r++)(n=e[r])<128&&c.push(s(n));var p=c.length,m=p;for(p&&c.push("-");m<l;){var g=t;for(r=0;r<e.length;r++)(n=e[r])>=h&&n<g&&(g=n);var y=m+1;if(g-h>o((t-f)/y))throw RangeError(i);for(f+=(g-h)*y,h=g,r=0;r<e.length;r++){if((n=e[r])<h&&++f>t)throw RangeError(i);if(n==h){for(var b=f,v=36;;v+=36){var w=v<=d?1:v>=d+26?26:v-d;if(b<w)break;var _=b-w,S=36-w;c.push(s(a(w+_%S))),b=o(_/S)}c.push(s(a(b))),d=u(f,y,m==p),f=0,++m}}++f,++h}return c.join("")};e.exports=function(e){var t,i,o=[],s=e.toLowerCase().replace(n,".").split(".");for(t=0;t<s.length;t++)i=s[t],o.push(r.test(i)?"xn--"+c(i):i);return o.join(".")}},2145:(e,t,r)=>{var n=r(7896),i=Math.max,o=Math.min;e.exports=function(e,t){var r=n(e);return r<0?i(r+t,0):o(r,t)}},8852:(e,t,r)=>{var n=r(8517),i=r(164);e.exports=function(e){return n(i(e))}},7896:e=>{var t=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:t)(e)}},4954:(e,t,r)=>{var n=r(7896),i=Math.min;e.exports=function(e){return e>0?i(n(e),9007199254740991):0}},4680:(e,t,r)=>{var n=r(164);e.exports=function(e){return Object(n(e))}},2034:(e,t,r)=>{var n=r(6944),i=r(8377),o=r(2392),s=r(3706)("toPrimitive");e.exports=function(e,t){if(!n(e)||i(e))return e;var r,a=e[s];if(void 0!==a){if(void 0===t&&(t="default"),r=a.call(e,t),!n(r)||i(r))return r;throw TypeError("Can't convert object to primitive value")}return void 0===t&&(t="number"),o(e,t)}},2694:(e,t,r)=>{var n=r(2034),i=r(8377);e.exports=function(e){var t=n(e,"string");return i(t)?t:String(t)}},939:(e,t,r)=>{var n={};n[r(3706)("toStringTag")]="z",e.exports="[object z]"===String(n)},401:(e,t,r)=>{var n=r(8377);e.exports=function(e){if(n(e))throw TypeError("Cannot convert a Symbol value to a string");return String(e)}},8435:e=>{var t=0,r=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++t+r).toString(36)}},4587:(e,t,r)=>{var n=r(1453);e.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3706:(e,t,r)=>{var n=r(6874),i=r(3215),o=r(5884),s=r(8435),a=r(1453),u=r(4587),c=i("wks"),l=n.Symbol,h=u?l:l&&l.withoutSetter||s;e.exports=function(e){return o(c,e)&&(a||"string"==typeof c[e])||(a&&o(l,e)?c[e]=l[e]:c[e]=h("Symbol."+e)),c[e]}},2837:(e,t,r)=>{"use strict";var n=r(8852),i=r(9611),o=r(873),s=r(6619),a=r(3131),u="Array Iterator",c=s.set,l=s.getterFor(u);e.exports=a(Array,"Array",(function(e,t){c(this,{type:u,target:n(e),index:0,kind:t})}),(function(){var e=l(this),t=e.target,r=e.kind,n=e.index++;return!t||n>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==r?{value:n,done:!1}:"values"==r?{value:t[n],done:!1}:{value:[n,t[n]],done:!1}}),"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},6949:(e,t,r)=>{"use strict";var n=r(6174).charAt,i=r(401),o=r(6619),s=r(3131),a="String Iterator",u=o.set,c=o.getterFor(a);s(String,"String",(function(e){u(this,{type:a,string:i(e),index:0})}),(function(){var e,t=c(this),r=t.string,i=t.index;return i>=r.length?{value:void 0,done:!0}:(e=n(r,i),t.index+=e.length,{value:e,done:!1})}))},2303:(e,t,r)=>{"use strict";r(2837);var n=r(1082),i=r(4578),o=r(1781),s=r(1249),a=r(7490),u=r(9400),c=r(9670),l=r(6619),h=r(2482),f=r(5884),d=r(4833),p=r(8753),m=r(47),g=r(6944),y=r(401),b=r(2361),v=r(976),w=r(7053),_=r(3126),S=r(3706),E=i("fetch"),x=i("Request"),R=x&&x.prototype,T=i("Headers"),C=S("iterator"),k="URLSearchParams",O="URLSearchParamsIterator",P=l.set,I=l.getterFor(k),L=l.getterFor(O),B=/\+/g,A=Array(4),U=function(e){return A[e-1]||(A[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},j=function(e){try{return decodeURIComponent(e)}catch(t){return e}},M=function(e){var t=e.replace(B," "),r=4;try{return decodeURIComponent(t)}catch(e){for(;r;)t=t.replace(U(r--),j);return t}},D=/[!'()~]|%20/g,N={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},F=function(e){return N[e]},q=function(e){return encodeURIComponent(e).replace(D,F)},H=function(e,t){if(t)for(var r,n,i=t.split("&"),o=0;o<i.length;)(r=i[o++]).length&&(n=r.split("="),e.push({key:M(n.shift()),value:M(n.join("="))}))},$=function(e){this.entries.length=0,H(this.entries,e)},W=function(e,t){if(e<t)throw TypeError("Not enough arguments")},z=c((function(e,t){P(this,{type:O,iterator:w(I(e).entries),kind:t})}),"Iterator",(function(){var e=L(this),t=e.kind,r=e.iterator.next(),n=r.value;return r.done||(r.value="keys"===t?n.key:"values"===t?n.value:[n.key,n.value]),r})),G=function(){h(this,G,k);var e,t,r,n,i,o,s,a,u,c=arguments.length>0?arguments[0]:void 0,l=this,d=[];if(P(l,{type:k,entries:d,updateURL:function(){},updateSearchParams:$}),void 0!==c)if(g(c))if("function"==typeof(e=_(c)))for(r=(t=e.call(c)).next;!(n=r.call(t)).done;){if((s=(o=(i=w(m(n.value))).next).call(i)).done||(a=o.call(i)).done||!o.call(i).done)throw TypeError("Expected sequence with length 2");d.push({key:y(s.value),value:y(a.value)})}else for(u in c)f(c,u)&&d.push({key:u,value:y(c[u])});else H(d,"string"==typeof c?"?"===c.charAt(0)?c.slice(1):c:y(c))},V=G.prototype;if(a(V,{append:function(e,t){W(arguments.length,2);var r=I(this);r.entries.push({key:y(e),value:y(t)}),r.updateURL()},delete:function(e){W(arguments.length,1);for(var t=I(this),r=t.entries,n=y(e),i=0;i<r.length;)r[i].key===n?r.splice(i,1):i++;t.updateURL()},get:function(e){W(arguments.length,1);for(var t=I(this).entries,r=y(e),n=0;n<t.length;n++)if(t[n].key===r)return t[n].value;return null},getAll:function(e){W(arguments.length,1);for(var t=I(this).entries,r=y(e),n=[],i=0;i<t.length;i++)t[i].key===r&&n.push(t[i].value);return n},has:function(e){W(arguments.length,1);for(var t=I(this).entries,r=y(e),n=0;n<t.length;)if(t[n++].key===r)return!0;return!1},set:function(e,t){W(arguments.length,1);for(var r,n=I(this),i=n.entries,o=!1,s=y(e),a=y(t),u=0;u<i.length;u++)(r=i[u]).key===s&&(o?i.splice(u--,1):(o=!0,r.value=a));o||i.push({key:s,value:a}),n.updateURL()},sort:function(){var e,t,r,n=I(this),i=n.entries,o=i.slice();for(i.length=0,r=0;r<o.length;r++){for(e=o[r],t=0;t<r;t++)if(i[t].key>e.key){i.splice(t,0,e);break}t===r&&i.push(e)}n.updateURL()},forEach:function(e){for(var t,r=I(this).entries,n=d(e,arguments.length>1?arguments[1]:void 0,3),i=0;i<r.length;)n((t=r[i++]).value,t.key,this)},keys:function(){return new z(this,"keys")},values:function(){return new z(this,"values")},entries:function(){return new z(this,"entries")}},{enumerable:!0}),s(V,C,V.entries),s(V,"toString",(function(){for(var e,t=I(this).entries,r=[],n=0;n<t.length;)e=t[n++],r.push(q(e.key)+"="+q(e.value));return r.join("&")}),{enumerable:!0}),u(G,k),n({global:!0,forced:!o},{URLSearchParams:G}),!o&&"function"==typeof T){var Y=function(e){if(g(e)){var t,r=e.body;if(p(r)===k)return(t=e.headers?new T(e.headers):new T).has("content-type")||t.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),b(e,{body:v(0,String(r)),headers:v(0,t)})}return e};if("function"==typeof E&&n({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return E(e,arguments.length>1?Y(arguments[1]):{})}}),"function"==typeof x){var J=function(e){return h(this,J,"Request"),new x(e,arguments.length>1?Y(arguments[1]):{})};R.constructor=J,J.prototype=R,n({global:!0,forced:!0},{Request:J})}}e.exports={URLSearchParams:G,getState:I}},2743:(e,t,r)=>{"use strict";r(6949);var n,i=r(1082),o=r(5542),s=r(1781),a=r(6874),u=r(7852),c=r(1249),l=r(2482),h=r(5884),f=r(5277),d=r(1774),p=r(6174).codeAt,m=r(8),g=r(401),y=r(9400),b=r(2303),v=r(6619),w=a.URL,_=b.URLSearchParams,S=b.getState,E=v.set,x=v.getterFor("URL"),R=Math.floor,T=Math.pow,C="Invalid scheme",k="Invalid host",O="Invalid port",P=/[A-Za-z]/,I=/[\d+-.A-Za-z]/,L=/\d/,B=/^0x/i,A=/^[0-7]+$/,U=/^\d+$/,j=/^[\dA-Fa-f]+$/,M=/[\0\t\n\r #%/:<>?@[\\\]^|]/,D=/[\0\t\n\r #/:<>?@[\\\]^|]/,N=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,F=/[\t\n\r]/g,q=function(e,t){var r,n,i;if("["==t.charAt(0)){if("]"!=t.charAt(t.length-1))return k;if(!(r=$(t.slice(1,-1))))return k;e.host=r}else if(X(e)){if(t=m(t),M.test(t))return k;if(null===(r=H(t)))return k;e.host=r}else{if(D.test(t))return k;for(r="",n=d(t),i=0;i<n.length;i++)r+=J(n[i],z);e.host=r}},H=function(e){var t,r,n,i,o,s,a,u=e.split(".");if(u.length&&""==u[u.length-1]&&u.pop(),(t=u.length)>4)return e;for(r=[],n=0;n<t;n++){if(""==(i=u[n]))return e;if(o=10,i.length>1&&"0"==i.charAt(0)&&(o=B.test(i)?16:8,i=i.slice(8==o?1:2)),""===i)s=0;else{if(!(10==o?U:8==o?A:j).test(i))return e;s=parseInt(i,o)}r.push(s)}for(n=0;n<t;n++)if(s=r[n],n==t-1){if(s>=T(256,5-t))return null}else if(s>255)return null;for(a=r.pop(),n=0;n<r.length;n++)a+=r[n]*T(256,3-n);return a},$=function(e){var t,r,n,i,o,s,a,u=[0,0,0,0,0,0,0,0],c=0,l=null,h=0,f=function(){return e.charAt(h)};if(":"==f()){if(":"!=e.charAt(1))return;h+=2,l=++c}for(;f();){if(8==c)return;if(":"!=f()){for(t=r=0;r<4&&j.test(f());)t=16*t+parseInt(f(),16),h++,r++;if("."==f()){if(0==r)return;if(h-=r,c>6)return;for(n=0;f();){if(i=null,n>0){if(!("."==f()&&n<4))return;h++}if(!L.test(f()))return;for(;L.test(f());){if(o=parseInt(f(),10),null===i)i=o;else{if(0==i)return;i=10*i+o}if(i>255)return;h++}u[c]=256*u[c]+i,2!=++n&&4!=n||c++}if(4!=n)return;break}if(":"==f()){if(h++,!f())return}else if(f())return;u[c++]=t}else{if(null!==l)return;h++,l=++c}}if(null!==l)for(s=c-l,c=7;0!=c&&s>0;)a=u[c],u[c--]=u[l+s-1],u[l+--s]=a;else if(8!=c)return;return u},W=function(e){var t,r,n,i;if("number"==typeof e){for(t=[],r=0;r<4;r++)t.unshift(e%256),e=R(e/256);return t.join(".")}if("object"==typeof e){for(t="",n=function(e){for(var t=null,r=1,n=null,i=0,o=0;o<8;o++)0!==e[o]?(i>r&&(t=n,r=i),n=null,i=0):(null===n&&(n=o),++i);return i>r&&(t=n,r=i),t}(e),r=0;r<8;r++)i&&0===e[r]||(i&&(i=!1),n===r?(t+=r?":":"::",i=!0):(t+=e[r].toString(16),r<7&&(t+=":")));return"["+t+"]"}return e},z={},G=f({},z,{" ":1,'"':1,"<":1,">":1,"`":1}),V=f({},G,{"#":1,"?":1,"{":1,"}":1}),Y=f({},V,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),J=function(e,t){var r=p(e,0);return r>32&&r<127&&!h(t,e)?e:encodeURIComponent(e)},K={ftp:21,file:null,http:80,https:443,ws:80,wss:443},X=function(e){return h(K,e.scheme)},Z=function(e){return""!=e.username||""!=e.password},Q=function(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme},ee=function(e,t){var r;return 2==e.length&&P.test(e.charAt(0))&&(":"==(r=e.charAt(1))||!t&&"|"==r)},te=function(e){var t;return e.length>1&&ee(e.slice(0,2))&&(2==e.length||"/"===(t=e.charAt(2))||"\\"===t||"?"===t||"#"===t)},re=function(e){var t=e.path,r=t.length;!r||"file"==e.scheme&&1==r&&ee(t[0],!0)||t.pop()},ne=function(e){return"."===e||"%2e"===e.toLowerCase()},ie={},oe={},se={},ae={},ue={},ce={},le={},he={},fe={},de={},pe={},me={},ge={},ye={},be={},ve={},we={},_e={},Se={},Ee={},xe={},Re=function(e,t,r,i){var o,s,a,u,c,l=r||ie,f=0,p="",m=!1,g=!1,y=!1;for(r||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(N,"")),t=t.replace(F,""),o=d(t);f<=o.length;){switch(s=o[f],l){case ie:if(!s||!P.test(s)){if(r)return C;l=se;continue}p+=s.toLowerCase(),l=oe;break;case oe:if(s&&(I.test(s)||"+"==s||"-"==s||"."==s))p+=s.toLowerCase();else{if(":"!=s){if(r)return C;p="",l=se,f=0;continue}if(r&&(X(e)!=h(K,p)||"file"==p&&(Z(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=p,r)return void(X(e)&&K[e.scheme]==e.port&&(e.port=null));p="","file"==e.scheme?l=ye:X(e)&&i&&i.scheme==e.scheme?l=ae:X(e)?l=he:"/"==o[f+1]?(l=ue,f++):(e.cannotBeABaseURL=!0,e.path.push(""),l=Se)}break;case se:if(!i||i.cannotBeABaseURL&&"#"!=s)return C;if(i.cannotBeABaseURL&&"#"==s){e.scheme=i.scheme,e.path=i.path.slice(),e.query=i.query,e.fragment="",e.cannotBeABaseURL=!0,l=xe;break}l="file"==i.scheme?ye:ce;continue;case ae:if("/"!=s||"/"!=o[f+1]){l=ce;continue}l=fe,f++;break;case ue:if("/"==s){l=de;break}l=_e;continue;case ce:if(e.scheme=i.scheme,s==n)e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query=i.query;else if("/"==s||"\\"==s&&X(e))l=le;else if("?"==s)e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query="",l=Ee;else{if("#"!=s){e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.path.pop(),l=_e;continue}e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query=i.query,e.fragment="",l=xe}break;case le:if(!X(e)||"/"!=s&&"\\"!=s){if("/"!=s){e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,l=_e;continue}l=de}else l=fe;break;case he:if(l=fe,"/"!=s||"/"!=p.charAt(f+1))continue;f++;break;case fe:if("/"!=s&&"\\"!=s){l=de;continue}break;case de:if("@"==s){m&&(p="%40"+p),m=!0,a=d(p);for(var b=0;b<a.length;b++){var v=a[b];if(":"!=v||y){var w=J(v,Y);y?e.password+=w:e.username+=w}else y=!0}p=""}else if(s==n||"/"==s||"?"==s||"#"==s||"\\"==s&&X(e)){if(m&&""==p)return"Invalid authority";f-=d(p).length+1,p="",l=pe}else p+=s;break;case pe:case me:if(r&&"file"==e.scheme){l=ve;continue}if(":"!=s||g){if(s==n||"/"==s||"?"==s||"#"==s||"\\"==s&&X(e)){if(X(e)&&""==p)return k;if(r&&""==p&&(Z(e)||null!==e.port))return;if(u=q(e,p))return u;if(p="",l=we,r)return;continue}"["==s?g=!0:"]"==s&&(g=!1),p+=s}else{if(""==p)return k;if(u=q(e,p))return u;if(p="",l=ge,r==me)return}break;case ge:if(!L.test(s)){if(s==n||"/"==s||"?"==s||"#"==s||"\\"==s&&X(e)||r){if(""!=p){var _=parseInt(p,10);if(_>65535)return O;e.port=X(e)&&_===K[e.scheme]?null:_,p=""}if(r)return;l=we;continue}return O}p+=s;break;case ye:if(e.scheme="file","/"==s||"\\"==s)l=be;else{if(!i||"file"!=i.scheme){l=_e;continue}if(s==n)e.host=i.host,e.path=i.path.slice(),e.query=i.query;else if("?"==s)e.host=i.host,e.path=i.path.slice(),e.query="",l=Ee;else{if("#"!=s){te(o.slice(f).join(""))||(e.host=i.host,e.path=i.path.slice(),re(e)),l=_e;continue}e.host=i.host,e.path=i.path.slice(),e.query=i.query,e.fragment="",l=xe}}break;case be:if("/"==s||"\\"==s){l=ve;break}i&&"file"==i.scheme&&!te(o.slice(f).join(""))&&(ee(i.path[0],!0)?e.path.push(i.path[0]):e.host=i.host),l=_e;continue;case ve:if(s==n||"/"==s||"\\"==s||"?"==s||"#"==s){if(!r&&ee(p))l=_e;else if(""==p){if(e.host="",r)return;l=we}else{if(u=q(e,p))return u;if("localhost"==e.host&&(e.host=""),r)return;p="",l=we}continue}p+=s;break;case we:if(X(e)){if(l=_e,"/"!=s&&"\\"!=s)continue}else if(r||"?"!=s)if(r||"#"!=s){if(s!=n&&(l=_e,"/"!=s))continue}else e.fragment="",l=xe;else e.query="",l=Ee;break;case _e:if(s==n||"/"==s||"\\"==s&&X(e)||!r&&("?"==s||"#"==s)){if(".."===(c=(c=p).toLowerCase())||"%2e."===c||".%2e"===c||"%2e%2e"===c?(re(e),"/"==s||"\\"==s&&X(e)||e.path.push("")):ne(p)?"/"==s||"\\"==s&&X(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&ee(p)&&(e.host&&(e.host=""),p=p.charAt(0)+":"),e.path.push(p)),p="","file"==e.scheme&&(s==n||"?"==s||"#"==s))for(;e.path.length>1&&""===e.path[0];)e.path.shift();"?"==s?(e.query="",l=Ee):"#"==s&&(e.fragment="",l=xe)}else p+=J(s,V);break;case Se:"?"==s?(e.query="",l=Ee):"#"==s?(e.fragment="",l=xe):s!=n&&(e.path[0]+=J(s,z));break;case Ee:r||"#"!=s?s!=n&&("'"==s&&X(e)?e.query+="%27":e.query+="#"==s?"%23":J(s,z)):(e.fragment="",l=xe);break;case xe:s!=n&&(e.fragment+=J(s,G))}f++}},Te=function(e){var t,r,n=l(this,Te,"URL"),i=arguments.length>1?arguments[1]:void 0,s=g(e),a=E(n,{type:"URL"});if(void 0!==i)if(i instanceof Te)t=x(i);else if(r=Re(t={},g(i)))throw TypeError(r);if(r=Re(a,s,null,t))throw TypeError(r);var u=a.searchParams=new _,c=S(u);c.updateSearchParams(a.query),c.updateURL=function(){a.query=String(u)||null},o||(n.href=ke.call(n),n.origin=Oe.call(n),n.protocol=Pe.call(n),n.username=Ie.call(n),n.password=Le.call(n),n.host=Be.call(n),n.hostname=Ae.call(n),n.port=Ue.call(n),n.pathname=je.call(n),n.search=Me.call(n),n.searchParams=De.call(n),n.hash=Ne.call(n))},Ce=Te.prototype,ke=function(){var e=x(this),t=e.scheme,r=e.username,n=e.password,i=e.host,o=e.port,s=e.path,a=e.query,u=e.fragment,c=t+":";return null!==i?(c+="//",Z(e)&&(c+=r+(n?":"+n:"")+"@"),c+=W(i),null!==o&&(c+=":"+o)):"file"==t&&(c+="//"),c+=e.cannotBeABaseURL?s[0]:s.length?"/"+s.join("/"):"",null!==a&&(c+="?"+a),null!==u&&(c+="#"+u),c},Oe=function(){var e=x(this),t=e.scheme,r=e.port;if("blob"==t)try{return new Te(t.path[0]).origin}catch(e){return"null"}return"file"!=t&&X(e)?t+"://"+W(e.host)+(null!==r?":"+r:""):"null"},Pe=function(){return x(this).scheme+":"},Ie=function(){return x(this).username},Le=function(){return x(this).password},Be=function(){var e=x(this),t=e.host,r=e.port;return null===t?"":null===r?W(t):W(t)+":"+r},Ae=function(){var e=x(this).host;return null===e?"":W(e)},Ue=function(){var e=x(this).port;return null===e?"":String(e)},je=function(){var e=x(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},Me=function(){var e=x(this).query;return e?"?"+e:""},De=function(){return x(this).searchParams},Ne=function(){var e=x(this).fragment;return e?"#"+e:""},Fe=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};if(o&&u(Ce,{href:Fe(ke,(function(e){var t=x(this),r=g(e),n=Re(t,r);if(n)throw TypeError(n);S(t.searchParams).updateSearchParams(t.query)})),origin:Fe(Oe),protocol:Fe(Pe,(function(e){var t=x(this);Re(t,g(e)+":",ie)})),username:Fe(Ie,(function(e){var t=x(this),r=d(g(e));if(!Q(t)){t.username="";for(var n=0;n<r.length;n++)t.username+=J(r[n],Y)}})),password:Fe(Le,(function(e){var t=x(this),r=d(g(e));if(!Q(t)){t.password="";for(var n=0;n<r.length;n++)t.password+=J(r[n],Y)}})),host:Fe(Be,(function(e){var t=x(this);t.cannotBeABaseURL||Re(t,g(e),pe)})),hostname:Fe(Ae,(function(e){var t=x(this);t.cannotBeABaseURL||Re(t,g(e),me)})),port:Fe(Ue,(function(e){var t=x(this);Q(t)||(""==(e=g(e))?t.port=null:Re(t,e,ge))})),pathname:Fe(je,(function(e){var t=x(this);t.cannotBeABaseURL||(t.path=[],Re(t,g(e),we))})),search:Fe(Me,(function(e){var t=x(this);""==(e=g(e))?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",Re(t,e,Ee)),S(t.searchParams).updateSearchParams(t.query)})),searchParams:Fe(De),hash:Fe(Ne,(function(e){var t=x(this);""!=(e=g(e))?("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",Re(t,e,xe)):t.fragment=null}))}),c(Ce,"toJSON",(function(){return ke.call(this)}),{enumerable:!0}),c(Ce,"toString",(function(){return ke.call(this)}),{enumerable:!0}),w){var qe=w.createObjectURL,He=w.revokeObjectURL;qe&&c(Te,"createObjectURL",(function(e){return qe.apply(w,arguments)})),He&&c(Te,"revokeObjectURL",(function(e){return He.apply(w,arguments)}))}y(Te,"URL"),i({global:!0,forced:!s,sham:!o},{URL:Te})},462:()=>{},6029:()=>{}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};return(()=>{"use strict";r.r(n),r.d(n,{AACDepay:()=>P,BasicDepay:()=>L,CanvasSink:()=>D,H264Depay:()=>J,Html5CanvasPipeline:()=>wr,Html5VideoMetadataPipeline:()=>Er,Html5VideoPipeline:()=>Sr,HttpMsePipeline:()=>Ur,HttpSource:()=>ee,Inspector:()=>re,JPEGDepay:()=>ve,MessageType:()=>k,MetadataPipeline:()=>Tr,Mp4Capture:()=>Se,Mp4Muxer:()=>et,MseSink:()=>St,ONVIFDepay:()=>xt,Pipeline:()=>ar,RTCPPacketType:()=>it,RTSPResponseError:()=>tr,RTSP_METHOD:()=>er,RtspMjpegPipeline:()=>fr,RtspMp4Pipeline:()=>hr,RtspParser:()=>Vt,RtspPipeline:()=>cr,RtspSession:()=>rr,SDESItem:()=>dt,SR:()=>at,Scheduler:()=>j,Sink:()=>f,Source:()=>l,Tube:()=>h,WSSource:()=>or,WsSdpPipeline:()=>kr,addRTSPRetry:()=>jr,bodyOffset:()=>Ht,cSrc:()=>x,cSrcCount:()=>b,components:()=>e,connectionEnded:()=>Ft,contentBase:()=>Dt,contentLocation:()=>Nt,createTransform:()=>O,extHeader:()=>T,extHeaderLength:()=>R,extension:()=>y,extractHeaderValue:()=>Bt,extractURIs:()=>Pt,getTime:()=>Kt,isRtcpApp:()=>vt,isRtcpBye:()=>yt,isRtcpRR:()=>ft,isRtcpSDES:()=>mt,isRtcpSR:()=>lt,marker:()=>v,messageFromBuffer:()=>Lt,padding:()=>g,parse:()=>It,parseRtcp:()=>ot,payload:()=>C,payloadType:()=>w,pipelines:()=>t,range:()=>qt,rtcpMessageFromBuffer:()=>st,sSrc:()=>E,sequence:()=>At,sequenceNumber:()=>_,sessionId:()=>Ut,sessionTimeout:()=>jt,statusCode:()=>Mt,timestamp:()=>S,utils:()=>i,version:()=>m});var e={};r.r(e),r.d(e,{AACDepay:()=>P,BasicDepay:()=>L,CanvasSink:()=>D,H264Depay:()=>J,HttpSource:()=>ee,Inspector:()=>re,JPEGDepay:()=>ve,MessageType:()=>k,Mp4Capture:()=>Se,Mp4Muxer:()=>et,MseSink:()=>St,ONVIFDepay:()=>xt,RTSPResponseError:()=>tr,RTSP_METHOD:()=>er,RtspParser:()=>Vt,RtspSession:()=>rr,Sink:()=>f,Source:()=>l,Tube:()=>h,WSSource:()=>or,createTransform:()=>O});var t={};r.r(t),r.d(t,{Html5CanvasPipeline:()=>wr,Html5VideoMetadataPipeline:()=>Er,Html5VideoPipeline:()=>Sr,HttpMsePipeline:()=>Ur,MetadataPipeline:()=>Tr,Pipeline:()=>ar,RtspMjpegPipeline:()=>fr,RtspMp4Pipeline:()=>hr,RtspPipeline:()=>cr,WsSdpPipeline:()=>kr});var i={};r.r(i),r.d(i,{RTCPPacketType:()=>it,SDESItem:()=>dt,SR:()=>at,Scheduler:()=>j,addRTSPRetry:()=>jr,bodyOffset:()=>Ht,cSrc:()=>x,cSrcCount:()=>b,connectionEnded:()=>Ft,contentBase:()=>Dt,contentLocation:()=>Nt,extHeader:()=>T,extHeaderLength:()=>R,extension:()=>y,extractHeaderValue:()=>Bt,extractURIs:()=>Pt,getTime:()=>Kt,isRtcpApp:()=>vt,isRtcpBye:()=>yt,isRtcpRR:()=>ft,isRtcpSDES:()=>mt,isRtcpSR:()=>lt,marker:()=>v,messageFromBuffer:()=>Lt,padding:()=>g,parse:()=>It,parseRtcp:()=>ot,payload:()=>C,payloadType:()=>w,range:()=>qt,rtcpMessageFromBuffer:()=>st,sSrc:()=>E,sequence:()=>At,sequenceNumber:()=>_,sessionId:()=>Ut,sessionTimeout:()=>jt,statusCode:()=>Mt,timestamp:()=>S,version:()=>m});var o=r(8981),s=r(7866).Buffer;class a{static consumer(e=(()=>{})){return new o.Writable({objectMode:!0,write(t,r,n){e(t),n()}})}static peeker(e){if("function"!=typeof e)throw new Error("you must supply a function");return new o.Transform({objectMode:!0,transform(t,r,n){e(t),n(void 0,t)}})}static producer(e){let t=0;return new o.Readable({objectMode:!0,read(){void 0!==e&&(t<e.length?this.push(e[t++]):this.push(null))}})}static recorder(e,t){return new o.Transform({objectMode:!0,transform(r,n,i){const o=Date.now(),s=Object.assign({},r,{data:r.data.toString("base64")});t.write(JSON.stringify({type:e,timestamp:o,message:s},null,2)),t.write(",\n"),i(void 0,r)}})}static replayer(e){let t=0,r=e[0].timestamp;return new o.Readable({objectMode:!0,read(){const n=e[t++];if(n){const{type:e,timestamp:t,message:i}=n,o=t-r;if(r=t,i){const t=i.data?s.from(i.data,"base64"):s.alloc(0),r=Object.assign({},i,{data:t});this.push({type:e,delay:o,msg:r})}else this.push({type:e,delay:o,msg:null})}else this.push(null)}})}}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class c{constructor(){u(this,"incoming",void 0),u(this,"outgoing",void 0),u(this,"next",void 0),u(this,"prev",void 0),u(this,"_incomingErrorHandler",void 0),u(this,"_outgoingErrorHandler",void 0)}}class l extends c{static fromMessages(e){return new l(a.producer(e),a.consumer())}constructor(e=new o.Readable({objectMode:!0}),t=new o.Writable({objectMode:!0})){super(),u(this,"incoming",void 0),u(this,"outgoing",void 0),u(this,"next",void 0),u(this,"prev",void 0),this.incoming=e,this.outgoing=t,this.next=null,this.prev=null}connect(e){if(null===e)return this;if(null!==this.next||null!==e.prev)throw new Error("connection failed: component(s) already connected");if(!this.incoming.readable||!this.outgoing.writable)throw new Error("connection failed: this component not compatible");if(!e.incoming.writable||!e.outgoing.readable)throw new Error("connection failed: next component not compatible");try{this.incoming.pipe(e.incoming),e.outgoing.pipe(this.outgoing)}catch(e){throw new Error(`connection failed: ${e.message}`)}const t=e=>{this.incoming.emit("error",e)};e.incoming.on("error",t);const r=t=>{e.outgoing.emit("error",t)};return this.outgoing.on("error",r),this.next=e,e.prev=this,this._incomingErrorHandler=t,this._outgoingErrorHandler=r,e}disconnect(){const e=this.next;return null!==e&&(this.incoming.unpipe(e.incoming),e.outgoing.unpipe(this.outgoing),void 0!==this._incomingErrorHandler&&e.incoming.removeListener("error",this._incomingErrorHandler),void 0!==this._outgoingErrorHandler&&this.outgoing.removeListener("error",this._outgoingErrorHandler),this.next=null,e.prev=null,delete this._incomingErrorHandler,delete this._outgoingErrorHandler),this}}class h extends l{static fromHandlers(e,t){const r=e?a.peeker(e):void 0,n=t?a.peeker(t):void 0;return new h(r,n)}constructor(e=new o.PassThrough({objectMode:!0}),t=new o.PassThrough({objectMode:!0})){super(e,t),u(this,"incoming",void 0),u(this,"outgoing",void 0),this.incoming=e,this.outgoing=t}}class f extends c{static fromHandler(e){const t=new f(a.consumer(e),a.producer(void 0));return t.incoming.on("finish",(()=>{t.outgoing.push(null)})),t}constructor(e=new o.Writable({objectMode:!0}),t=new o.Readable({objectMode:!0})){super(),u(this,"incoming",void 0),u(this,"outgoing",void 0),u(this,"next",void 0),u(this,"prev",void 0),this.incoming=e,this.outgoing=t,this.next=null,this.prev=null}connect(){throw new Error("connection failed: attempting to connect after a sink")}disconnect(){return this}}const d=[128,64,32,16,8,4,2,1];var p=r(7866).Buffer;const m=e=>e[0]>>>6,g=e=>!!(e[0]&d[2]),y=e=>!!(e[0]&d[3]),b=e=>15&e[0],v=e=>!!(e[1]&d[0]),w=e=>127&e[1],_=e=>e.readUInt16BE(2),S=e=>e.readUInt32BE(4),E=e=>e.readUInt32BE(8),x=(e,t=0)=>b(e)>t?e.readUInt32BE(12+4*t):0,R=e=>y(e)?e.readUInt16BE(12+4*b(e)+2):0,T=e=>0===R(e)?p.from([]):e.slice(12+4*b(e),12+4*b(e)+4+4*R(e)),C=e=>y(e)?e.slice(12+4*b(e)+4+4*R(e)):e.slice(12+4*b(e));let k;!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.RAW=1]="RAW",e[e.RTP=2]="RTP",e[e.RTCP=3]="RTCP",e[e.RTSP=4]="RTSP",e[e.SDP=5]="SDP",e[e.ELEMENTARY=6]="ELEMENTARY",e[e.H264=7]="H264",e[e.ISOM=8]="ISOM",e[e.XML=9]="XML",e[e.JPEG=10]="JPEG"}(k||(k={}));const O=e=>new o.Transform({objectMode:!0,transform:e});class P extends h{constructor(){let e,t;super(O((function(r,n,i){if(r.type===k.SDP){let n;for(const e of r.sdp.media)"audio"===e.type&&e.fmtp&&e.fmtp.parameters&&"AAC-hbr"===e.fmtp.parameters.mode&&(n=e);if(n&&void 0!==n.rtpmap){e=Number(n.rtpmap.payloadType);const r=n.fmtp.parameters,i=Number(r.sizelength)||0,o=Number(r.indexlength)||0,s=Number(r.indexdeltalength)||0,a=Number(r.ctsdeltalength)||0,u=Number(r.dtsdeltalength)||0,c=Number(r.randomaccessindication)||0,l=Number(r.streamstateindication)||0,h=Number(r.auxiliarydatasizelength)||0;t=i+Math.max(o,s)+a+u+c+l+h>0}i(void 0,r)}else r.type===k.RTP&&w(r.data)===e?(function(e,t,r){const n=C(e.data);let i=0;if(t){const e=n.readUInt16BE(0);i=2+(e+e%8)/8}r({type:k.ELEMENTARY,data:n.slice(i),payloadType:w(e.data),timestamp:S(e.data),ntpTimestamp:e.ntpTimestamp})}(r,t,this.push.bind(this)),i()):i(void 0,r)})))}}var I=r(7866).Buffer;class L extends h{constructor(e){if(void 0===e)throw new Error("you must supply a payload type to BasicDepayComponent");let t=I.alloc(0);super(O((function(r,n,i){if(r.type===k.RTP&&w(r.data)===e){const e=C(r.data);t=I.concat([t,e]),v(r.data)&&(t.length>0&&this.push({data:t,timestamp:S(r.data),ntpTimestamp:r.ntpTimestamp,payloadType:w(r.data),type:k.ELEMENTARY}),t=I.alloc(0)),i()}else i(void 0,r)})))}}function B(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r(2743);class A{constructor(){B(this,"started",void 0),B(this,"stopped",void 0),B(this,"elapsed",void 0),this.elapsed=0,this.started=0,this.stopped=!0}start(){this.stopped&&(this.started=window.performance.now(),this.stopped=!1)}stop(){this.stopped||(this.elapsed=this.now(),this.stopped=!0)}reset(){this.elapsed=0,this.started=0,this.stopped=!0}now(){return this.stopped?this.elapsed:this.elapsed+(window.performance.now()-this.started)}play(){this.start()}pause(){this.stop()}get currentTime(){return this.now()/1e3}}function U(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class j{constructor(e,t,r=10){U(this,"_clock",void 0),U(this,"_handler",void 0),U(this,"_tolerance",void 0),U(this,"_nextRun",void 0),U(this,"_nextPlay",void 0),U(this,"_fifo",void 0),U(this,"_ntpPresentationTime",void 0),U(this,"_suspended",void 0),this._clock=e,this._handler=t,this._tolerance=r,this._nextRun=0,this._nextPlay=0,this._fifo=[],this._ntpPresentationTime=0,this._suspended=!1}reset(){clearTimeout(this._nextRun),clearTimeout(this._nextPlay),this._fifo=[],this._ntpPresentationTime=0,this._suspended=!1}init(e){this._ntpPresentationTime=e}suspend(){clearTimeout(this._nextPlay),this._suspended=!0}resume(){this._suspended=!1,this.run(void 0)}run(e){if(clearTimeout(this._nextRun),void 0===this._ntpPresentationTime)return;if(void 0!==e&&this._fifo.push(e),this._suspended)return;if(0===this._fifo.length)return;let t,r=0;do{const e=this._fifo.shift();if(void 0===e)throw new Error("internal error: message should never be undefined");t=e;const n=t.ntpTimestamp;void 0!==n&&(r=n-this._ntpPresentationTime-1e3*this._clock.currentTime,Math.abs(r)<this._tolerance&&this._handler&&this._handler(t))}while(r<this._tolerance&&this._fifo.length>0);r<-this._tolerance?(clearTimeout(this._nextPlay),this._clock.pause(),this._nextPlay=window.setTimeout((()=>this._clock.play()),-r)):r>this._tolerance&&(this._fifo.unshift(t),this._nextRun=window.setTimeout((()=>this.run(void 0)),r))}}function M(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class D extends f{constructor(e){if(void 0===e)throw new Error("canvas element argument missing");let t=0,r=0,n=0;const i={bitrate:0,framerate:0,renderedFrames:0};let s,a,u=null;if(void 0!==window.createImageBitmap&&(u=e.getContext("bitmaprenderer")),null===u&&(u=e.getContext("2d")),null===u)a=()=>{};else if("transferFromImageBitmap"in u){const e=u;a=({blob:t})=>{i.renderedFrames++,window.createImageBitmap(t).then((t=>{e.transferFromImageBitmap(t)})).catch((()=>{}))}}else{const e=u,t=new Image;t.onload=()=>{e.drawImage(t,0,0)},a=({blob:e})=>{i.renderedFrames++;const r=window.URL.createObjectURL(e);t.src=r}}const c=new A,l=new j(c,a);let h=0;const f=()=>{this.onCanplay&&this.onCanplay()},d=e=>{this.onSync&&this.onSync(e)},p=new o.Writable({objectMode:!0,write:(o,a,u)=>{if(o.type===k.SDP){c.reset(),l.reset(),t=0;const e=o.sdp.media.find((e=>"video"===e.type&&void 0!==e.rtpmap&&"JPEG"===e.rtpmap.encodingName));void 0!==e&&void 0!==e.rtpmap&&(n=e.rtpmap.clockrate,(e=>{e.bitrate=0,e.framerate=0,e.renderedFrames=0})(i),s=(e=>{let t=0,r=0,n=0;return(i,{byteLength:o,duration:s})=>{if(t+=o,r+=s,n++,r>=e){const o=8*t,s=n,a=r/e;i.bitrate=o/a,i.framerate=s/a,t=0,r=0,n=0}}})(n)),u()}else if(o.type===k.JPEG){const{timestamp:a,ntpTimestamp:c}=o;if(!t){t=a,r=a;const{width:n,height:i}=o.framesize;e.width=n,e.height=i,l.init(0)}const p=1e3*(a-t)/n,m=new window.Blob([o.data],{type:"image/jpeg"});!h&&c&&(h=c-p,d(h)),l.run({ntpTimestamp:p,blob:m}),a===t&&f(),s(i,{byteLength:o.data.length,duration:a-r}),r=a,u()}else u()}}),m=new o.Readable({objectMode:!0,read:function(){}});m.on("error",(()=>{console.warn("outgoing stream broke somewhere")})),super(p,m),M(this,"onCanplay",void 0),M(this,"onSync",void 0),M(this,"_clock",void 0),M(this,"_scheduler",void 0),M(this,"_info",void 0),this._clock=c,this._scheduler=l,this._info=i,this.onCanplay=void 0,this.onSync=void 0}get currentTime(){return this._clock.currentTime}pause(){this._scheduler.suspend(),this._clock.pause()}play(){this._clock.play(),this._scheduler.resume()}get bitrate(){return this._info.bitrate}get framerate(){return this._info.framerate}}var N=r(7997),F=r.n(N),q=r(7866).Buffer;let H;!function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.NON_IDR_PICTURE=1]="NON_IDR_PICTURE",e[e.IDR_PICTURE=5]="IDR_PICTURE",e[e.SPS=7]="SPS",e[e.PPS=8]="PPS"}(H||(H={}));const $=F()("msl:h264depay");class W{constructor(){var e,t;t=void 0,(e="_buffer")in this?Object.defineProperty(this,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):this[e]=t,this._buffer=q.alloc(0)}parse(e){const t=C(e.data),r=31&t[0];if(28===r){const r=t[0],n=t[1],i=31&n,o=224&r|i,s=64&n;if(n>>7)return this._buffer=q.concat([q.from([0,0,0,0,o]),t.slice(2)]),null;if(s){const r=q.concat([this._buffer,t.slice(2)]);r.writeUInt32BE(r.length-4,0);const n={data:r,type:k.H264,timestamp:S(e.data),ntpTimestamp:e.ntpTimestamp,payloadType:w(e.data),nalType:i};return this._buffer=q.alloc(0),n}return this._buffer=q.concat([this._buffer,t.slice(2)]),null}if(r!==H.NON_IDR_PICTURE&&r!==H.IDR_PICTURE||0!==this._buffer.length)return $(`H264depayComponent can only extract types 1,5 and 28, got ${r}`),this._buffer=q.alloc(0),null;{const n=q.concat([q.from([0,0,0,0]),t]);n.writeUInt32BE(n.length-4,0);const i={data:n,type:k.H264,timestamp:S(e.data),ntpTimestamp:e.ntpTimestamp,payloadType:w(e.data),nalType:r};return this._buffer=q.alloc(0),i}}}var z=r(7866).Buffer;function G(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function V(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?G(Object(r),!0).forEach((function(t){Y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class J extends h{constructor(){let e,t=!1,r=[];const n=new W;super(new o.Transform({objectMode:!0,transform:function(i,o,s){if(i.type===k.SDP){const t=i.sdp.media.find((e=>"video"===e.type&&void 0!==e.rtpmap&&"H264"===e.rtpmap.encodingName));void 0!==t&&void 0!==t.rtpmap&&(e=t.rtpmap.payloadType),s(void 0,i)}else if(i.type===k.RTP&&w(i.data)===e){const e=v(i.data),o=n.parse(i);if(null===o||!t&&o.nalType!==H.IDR_PICTURE)return void s();t=!0,r.push(o.data),e&&(this.push(V(V({},o),{},{data:1===r.length?r[0]:z.concat(r)})),r=[]),s()}else s(void 0,i)}}))}}var K=r(7866).Buffer;function X(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Z(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Q=F()("msl:http-source");class ee extends l{constructor(e){const{uri:t,options:r}=e,n=new o.Readable({objectMode:!0,read:function(){}});n.on("error",(e=>{console.warn("closing socket due to incoming error",e),this._reader&&this._reader.cancel()})),super(n),Z(this,"uri",void 0),Z(this,"options",void 0),Z(this,"length",void 0),Z(this,"onHeaders",void 0),Z(this,"onServerClose",void 0),Z(this,"_reader",void 0),Z(this,"_abortController",void 0),Z(this,"_allDone",void 0),n._read=()=>{this._pull()},this.uri=t,this.options=r,this._allDone=!1}play(){if(void 0===this.uri)throw new Error("cannot start playing when there is no URI");this._abortController=new AbortController,this.length=0,fetch(this.uri,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?X(Object(r),!0).forEach((function(t){Z(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({credentials:"include",signal:this._abortController.signal},this.options)).then((e=>{if(null===e.body)throw new Error("empty response body");this.onHeaders&&this.onHeaders(e.headers),this._reader=e.body.getReader(),this._pull()})).catch((e=>{console.error("http-source: fetch failed: ",e)}))}abort(){this._reader&&this._reader.cancel().catch((e=>{console.log("http-source: cancel reader failed: ",e)})),this._abortController&&this._abortController.abort()}_isClosed(){return this._allDone}_close(){var e;this._reader=void 0,this._allDone=!0,this.incoming.push(null),null===(e=this.onServerClose)||void 0===e||e.call(this)}_pull(){void 0!==this._reader&&this._reader.read().then((({done:e,value:t})=>{if(e)return void(this._isClosed()||(Q("fetch completed, total downloaded: ",this.length," bytes"),this._close()));if(void 0===t)throw new Error("expected value to be defined");if(void 0===this.length)throw new Error("expected length to be defined");this.length+=t.length;const r=K.from(t);this.incoming.push({data:r,type:k.RAW})?this._pull():Q("downstream back pressure: pausing read")})).catch((e=>{Q("http-source: read failed: ",e),this._isClosed()||this._close()}))}}const te=(e,t)=>{let r=Date.now();const n=t=>{const n=Date.now();console.log(`${e}: +${n-r}ms`,t),r=n};return void 0===t?n:e=>e.type===t&&n(e)};class re extends h{constructor(e){const t=te("incoming",e),r=new o.Transform({objectMode:!0,transform:function(e,r,n){t(e),n(void 0,e)}}),n=te("outgoing",e);super(r,new o.Transform({objectMode:!0,transform:function(e,t,r){n(e),r(void 0,e)}}))}}var ne=r(7866).Buffer;const ie=[0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],oe=[0,1,2,3,4,5,6,7,8,9,10,11],se=[0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],ae=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],ue=[0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],ce=[0,1,2,3,4,5,6,7,8,9,10,11],le=[0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],he=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function fe(e,t,r){return e>r?r:e<t?t:e}var de=r(7866).Buffer;const pe=[16,11,12,14,12,10,16,14,13,14,18,17,16,19,24,40,26,24,22,22,24,49,35,37,29,40,58,51,61,60,57,51,56,55,64,72,92,78,64,68,87,69,55,56,80,109,81,87,95,98,103,104,103,62,77,113,121,112,100,120,92,101,103,99],me=[17,18,18,24,21,24,47,26,26,47,99,66,56,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99];function ge(e){const t=fe(e,1,99),r=de.alloc(128),n=e<50?Math.floor(5e3/t):200-2*t;for(let e=0;e<64;e++){const t=Math.floor((pe[e]*n+50)/100),i=Math.floor((me[e]*n+50)/100);r.writeUInt8(fe(t,1,255),e),r.writeUInt8(fe(i,1,255),e+64)}return r}var ye=r(7866).Buffer;function be(e=0,t=0){const r=ne.from([255,216]),n=function(){const e=[[255,196,0,3+ie.length+oe.length,0],ie,oe],t=[[255,196,0,3+se.length+ae.length,16],se,ae],r=[[255,196,0,3+ue.length+ce.length,1],ue,ce],n=[[255,196,0,3+le.length+he.length,17],le,he];return ne.concat([...e.map(ne.from),...t.map(ne.from),...r.map(ne.from),...n.map(ne.from)])}(),i=ne.from([255,218,0,12,3,0,0,1,17,2,17,0,63,0]);return function(o){let s;const a=[];for(const r of o){let n=C(r);const i=n.readUInt8(0),o=n.readUInt8(1)<<16|n.readUInt8(2)<<8|n.readUInt8(3),u=n.readUInt8(4),c=n.readUInt8(5),l=8*n.readUInt8(6)||e,h=8*n.readUInt8(7)||t;n=n.slice(8);let f=0;if(u>=64&&u<=127&&(f=n.readUInt16BE(0),n=n.slice(4)),c>=128&&0===o){const e=n.readUInt8(1),t=n.readUInt16BE(2);s={typeSpecific:i,type:u,width:l,height:h,DRI:f,precision:e,qTable:n.slice(4,4+t)},n=n.slice(4+t)}else c<128&&0===o&&(s={typeSpecific:i,type:u,width:l,height:h,DRI:f,precision:0,qTable:ge(c)});a.push(n)}if(void 0===s)throw new Error("no quantization header present");const{precision:u,qTable:c,type:l,width:h,height:f}=s,d=function(e,t){const r=1&e?128:64,n=2&e?128:64;if(t.length!==r+n)throw new Error("invalid quantization table");const i=ne.from([255,219,0,r+3,0]),o=ne.from([255,219,0,n+3,1]);return ne.concat([i,t.slice(0,r),o,t.slice(r)])}(u,c),p=0===s.DRI?ye.alloc(0):(m=s.DRI,ne.from([255,221,0,4,m>>8,255&m]));var m;const g=function(e,t,r){return ne.from([255,192,0,17,8,t>>8,t,e>>8,e,3,0,0===r?33:34,0,1,17,1,2,17,1])}(h,f,l);return{size:{width:h,height:f},data:ye.concat([r,d,p,g,n,i,...a])}}}class ve extends h{constructor(){let e,t,r=[];super(new o.Transform({objectMode:!0,transform:function(n,i,o){if(n.type===k.SDP){const r=n.sdp.media.find((e=>"video"===e.type&&void 0!==e.rtpmap&&"JPEG"===e.rtpmap.encodingName));if(void 0!==r&&void 0!==r.rtpmap){e=Number(r.rtpmap.payloadType);const n=r.framesize;if(void 0!==n){const[e,r]=n;t=be(e,r)}else t=be()}o(void 0,n)}else if(n.type===k.RTP&&w(n.data)===e){if(r.push(n.data),v(n.data)&&r.length>0){const e=t(r);this.push({timestamp:S(n.data),ntpTimestamp:n.ntpTimestamp,payloadType:w(n.data),data:e.data,framesize:e.size,type:k.JPEG}),r=[]}o()}else o(void 0,n)}}))}}var we=r(7866).Buffer;function _e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Se extends h{constructor(e=225e6){const t=new o.Transform({objectMode:!0,transform:(e,t,r)=>{this._active&&e.type===k.ISOM&&void 0!==e.tracks&&(this._capture=!0),this._capture&&e.type===k.ISOM&&(this._bufferOffset<this._buffer.byteLength-e.data.byteLength?(e.data.copy(this._buffer,this._bufferOffset),this._bufferOffset+=e.data.byteLength):this.stop()),r(void 0,e)}});t.on("finish",(()=>{this.stop()})),super(t),_e(this,"_active",void 0),_e(this,"_capture",void 0),_e(this,"_captureCallback",void 0),_e(this,"_bufferOffset",void 0),_e(this,"_bufferSize",void 0),_e(this,"_buffer",void 0),this._buffer=we.allocUnsafe(0),this._bufferSize=e,this._bufferOffset=0,this._active=!1,this._capture=!1,this._captureCallback=()=>{}}start(e){this._active||(F()("msl:capture:start")(e),this._captureCallback=e,this._buffer=we.allocUnsafe(this._bufferSize),this._bufferOffset=0,this._active=!0)}stop(){if(this._active){F()("msl:capture:stop")(`captured bytes: ${this._bufferOffset}`);try{this._captureCallback(this._buffer.slice(0,this._bufferOffset))}catch(e){console.error(e)}this._buffer=we.allocUnsafe(0),this._bufferOffset=0,this._active=!1,this._capture=!1}}}var Ee=r(7866).Buffer;function xe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Re=Math.pow(2,32);class Te{constructor(e){xe(this,"byteLength",void 0),xe(this,"value",void 0),this.byteLength=e}}class Ce extends Te{constructor(e=0){super(e),xe(this,"copy",((e,t)=>{e.fill(0,t,t+this.byteLength)}))}load(){}}class ke extends Te{constructor(e){super(e.length),xe(this,"value",void 0),xe(this,"copy",((e,t)=>{for(let r=0;r<this.byteLength;r+=1)e[t+r]=this.value.charCodeAt(r)})),xe(this,"load",((e,t)=>{this.value=e.slice(t,t+this.byteLength).toString("ascii")})),this.value=e}}class Oe extends Te{constructor(e=0){super(1),xe(this,"value",void 0),xe(this,"copy",((e,t)=>{e.writeUInt8(this.value,t)})),xe(this,"load",((e,t)=>{this.value=e.readUInt8(t)})),this.value=e}}class Pe extends Te{constructor(e){super(e.length),xe(this,"value",void 0),xe(this,"copy",((e,t)=>{for(let r=0;r<this.value.length;++r)e.writeUInt8(this.value[r],t+r)})),xe(this,"load",((e,t)=>{for(let r=0;r<this.value.length;++r)this.value[r]=e.readUInt8(t+r)})),this.value=e}}class Ie extends Te{constructor(e=0){super(2),xe(this,"value",void 0),xe(this,"copy",((e,t)=>{e.writeUInt16BE(this.value,t)})),xe(this,"load",((e,t)=>{this.value=e.readUInt16BE(t)})),this.value=e}}class Le extends Te{constructor(e=0){super(3),xe(this,"value",void 0),xe(this,"copy",((e,t)=>{e.writeUInt8(this.value>>16&255,t),e.writeUInt8(this.value>>8&255,t+1),e.writeUInt8(255&this.value,t+2)})),xe(this,"load",((e,t)=>{this.value=e.readUInt8(t)<<16+e.readUInt8(t+1)<<8+e.readUInt8(t+2)})),this.value=e}}class Be extends Te{constructor(e=0){super(4),xe(this,"value",void 0),xe(this,"copy",((e,t)=>{e.writeUInt32BE(this.value,t)})),xe(this,"load",((e,t)=>{this.value=e.readUInt32BE(t)})),this.value=e}}class Ae extends Te{constructor(e){super(4*e.length),xe(this,"value",void 0),xe(this,"copy",((e,t)=>{for(let r=0;r<this.value.length;++r)e.writeUInt32BE(this.value[r],t+4*r)})),xe(this,"load",((e,t)=>{for(let r=0;r<this.value.length;++r)this.value[r]=e.readUInt32BE(t+4*r)})),this.value=e}}const Ue=function(e=0){return class extends Te{constructor(t){super(0),xe(this,"value",void 0),xe(this,"copy",((e,t)=>{let r=0;for(const n of this.value)n.copy(e,t+r),r+=n.byteLength})),xe(this,"load",(()=>{})),this.value=t.reduce(((e,t)=>e.concat(new Ie(t.length),new Pe(t))),[new Oe(e|t.length)]),this.byteLength=this.value.reduce(((e,t)=>e+t.byteLength),0)}}},je={ftyp:{container:"file",mandatory:!0,quantity:"one",box:"Box",is_container:!0,body:[["major_brand",ke,"isom"],["minor_version",Be,0],["compatible_brands",ke,"mp41"]]},moov:{container:"file",mandatory:!0,quantity:"one",box:"Box",is_container:!0},mdat:{container:"file",mandatory:!1,quantity:"any",box:"Box",is_container:!1,body:[]},mvhd:{container:"moov",mandatory:!0,quantity:"one",box:"FullBox",is_container:!1,body:[["creation_time",Be,0],["modification_time",Be,0],["timescale",Be,1e3],["duration",Be,4294967295],["rate",Be,65536],["volume",Ie,256],["reserved",Ce,10],["matrix",Ae,[65536,0,0,0,65536,0,0,0,1073741824]],["pre_defined",Ce,24],["next_track_ID",Be,4294967295]]},trak:{container:"moov",mandatory:!0,quantity:"one+",box:"Box",is_container:!0},tkhd:{container:"trak",mandatory:!0,quantity:"one",box:"FullBox",is_container:!1,config:{flags:3},body:[["creation_time",Be,0],["modification_time",Be,0],["track_ID",Be,1],["reserved",Ce,4],["duration",Be,0],["reserved2",Ce,8],["layer",Ie,0],["alternate_group",Ie,0],["volume",Ie,256],["reserved3",Ce,2],["matrix",Ae,[65536,0,0,0,65536,0,0,0,1073741824]],["width",Be,0],["height",Be,0]]},tref:{container:"trak",mandatory:!1,quantity:"one-",box:"Box",is_container:!1},mdia:{container:"trak",mandatory:!1,quantity:"one",box:"Box",is_container:!0},mdhd:{container:"mdia",mandatory:!1,quantity:"one",box:"FullBox",is_container:!1,body:[["creation_time",Be,0],["modification_time",Be,0],["timescale",Be,1e3],["duration",Be,4294967295],["language",Ie,0],["pre_defined",Ie,0]]},hdlr:{container:"mdia",mandatory:!0,quantity:"one",box:"FullBox",is_container:!1,body:[["predefined",Be,0],["handler_type",ke,"vide"],["reserved",Ce,12],["name",ke,"VideoHandler\0"]]},minf:{container:"mdia",mandatory:!0,quantity:"one",box:"Box",is_container:!0},vmhd:{container:"minf",mandatory:!0,quantity:"one",box:"FullBox",is_container:!1,config:{flags:1},body:[["graphicsmode",Ie,0],["opcolor",class extends Te{constructor(e){super(2*e.length),xe(this,"value",void 0),xe(this,"copy",((e,t)=>{for(let r=0;r<this.value.length;++r)e.writeUInt16BE(this.value[r],t+2*r)})),xe(this,"load",((e,t)=>{for(let r=0;r<this.value.length;++r)this.value[r]=e.readUInt16BE(t+2*r)})),this.value=e}},[0,0,0]]]},smhd:{container:"minf",mandatory:!0,quantity:"one",box:"FullBox",is_container:!1,body:[["balance",Ie,0],["reserved",Ie]]},dinf:{container:"minf",mandatory:!0,quantity:"one",box:"Box",is_container:!0},dref:{container:"dinf",mandatory:!0,quantity:"one",box:"FullBox",is_container:!0,body:[["entry_count",Be,0]]},"url ":{container:"dref",mandatory:!0,quantity:"one+",box:"FullBox",is_container:!1,config:{flags:1},body:[]},stbl:{container:"minf",mandatory:!0,quantity:"one",box:"Box",is_container:!0},stts:{container:"stbl",mandatory:!0,quantity:"one",box:"FullBox",is_container:!1,body:[["entry_count",Be,0]]},stsd:{container:"stbl",mandatory:!0,quantity:"one",box:"FullBox",is_container:!0,body:[["entry_count",Be,1]]},avc1:{container:"stsd",mandatory:!1,quantity:"one",box:"Box",is_container:!0,body:[["reserved",Ce,6],["data_reference_index",Ie,1],["pre_defined",Ie,0],["reserved2",Ce,2],["pre_defined2",Ae,[0,0,0]],["width",Ie,1920],["height",Ie,1080],["horizresolution",Be,4718592],["vertresolution",Be,4718592],["reserved3",Be,0],["frame_count",Ie,1],["compressorname",Pe,Ee.alloc(32)],["depth",Ie,24],["pre_defined3",Ie,65535]]},avcC:{container:"avc1",mandatory:!1,quantity:"one",box:"Box",is_container:!1,body:[["configurationVersion",Oe,1],["AVCProfileIndication",Oe,77],["profile_compatibility",Oe,0],["AVCLevelIndication",Oe,41],["lengthSizeMinusOne",Oe,255],["sequenceParameterSets",Ue(224),[]],["pictureParameterSets",Ue(),[]]]},mp4a:{container:"stsd",mandatory:!1,quantity:"one",box:"Box",is_container:!0,body:[["reserved",Ce,6],["data_reference_index",Ie,1],["reserved2",Ae,[0,0]],["channelcount",Ie,2],["samplesize",Ie,16],["pre_defined",Ie,0],["reserved3",Ie,0],["samplerate",Be,0]]},esds:{container:"mp4a",mandatory:!1,quantity:"one",box:"FullBox",is_container:!1,body:[["ES_DescrTag",Oe,3],["ES_DescrLength",Oe,25],["ES_ID",Ie,1],["flagsAndStreamPriority",Oe,0],["DecoderConfigDescrTag",Oe,4],["DecoderConfigDescrLength",Oe,17],["objectProfileIndication",Oe,64],["streamTypeUpstreamReserved",Oe,21],["bufferSizeDB",Pe,[0,0,0]],["maxBitRate",Be,0],["avgBitRate",Be,0],["DecSpecificInfoShortTag",Oe,5],["DecSpecificInfoShortLength",Oe,2],["audioConfigBytes",Ie,0],["SLConfigDescrTag",Oe,6],["SLConfigDescrLength",Oe,1],["SLConfigDescrPredefined",Oe,2]]},stsz:{container:"stbl",mandatory:!0,quantity:"one",box:"FullBox",is_container:!1,body:[["sample_size",Be,0],["sample_count",Be,0]]},stsc:{container:"stbl",mandatory:!0,quantity:"one",box:"FullBox",is_container:!1,body:[["entry_count",Be,0]]},stco:{container:"stbl",mandatory:!0,quantity:"one",box:"FullBox",is_container:!1,body:[["entry_count",Be,0]]},stss:{container:"stbl",mandatory:!1,quantity:"one-",box:"FullBox",is_container:!1,body:[["entry_count",Be,0]]},edts:{container:"trak",mandatory:!1,quantity:"one-",box:"Box",is_container:!0},elst:{container:"edts",mandatory:!1,quantity:"one-",box:"FullBox",is_container:!1,body:[["entry_count",Be,1],["segment_duration",Be,0],["media_time",Be,4294967295],["media_rate_integer",Ie,1],["media_rate_fraction",Ie,0]]},mvex:{container:"moov",mandatory:!1,quantity:"one-",box:"Box",is_container:!0},mehd:{container:"mvex",mandatory:!1,quantity:"one-",box:"FullBox",is_container:!1,body:[["fragment_duration",Be,0]]},trex:{container:"mvex",mandatory:!0,quantity:"one+",box:"FullBox",is_container:!1,body:[["track_ID",Be,1],["default_sample_description_index",Be,1],["default_sample_duration",Be,0],["default_sample_size",Be,0],["default_sample_flags",Be,0]]},moof:{container:"file",mandatory:!1,quantity:"zero+",box:"Box",is_container:!1},mfhd:{container:"moof",mandatory:!0,quantity:"one",box:"FullBox",is_container:!1,body:[["sequence_number",Be,0]]},traf:{container:"moof",mandatory:!1,quantity:"zero+",box:"Box",is_container:!0},tfhd:{container:"traf",mandatory:!0,quantity:"one",box:"FullBox",is_container:!1,config:{flags:32},body:[["track_ID",Be,1],["default_sample_flags",Be,0]]},tfdt:{container:"traf",mandatory:!1,quantity:"one-",box:"FullBox",is_container:!1,config:{version:1},body:[["baseMediaDecodeTime",class extends Te{constructor(e=0){super(8),xe(this,"value",void 0),xe(this,"copy",((e,t)=>{const r=this.value/Re|0,n=this.value-r*Re;e.writeUInt32BE(r,t),e.writeUInt32BE(n,t+4)})),xe(this,"load",((e,t)=>{const r=e.readUInt32BE(t),n=e.readUInt32BE(t+4);this.value=r*Re+n})),this.value=e}},0]]},trun:{container:"traf",mandatory:!1,quantity:"zero+",box:"FullBox",is_container:!1,config:{flags:773},body:[["sample_count",Be,1],["data_offset",Be,0],["first_sample_flags",Be,0],["sample_duration",Be,0],["sample_size",Be,0]]},"....":{box:"Box",is_container:!1,body:[]},file:{box:"None",is_container:!0,mandatory:!0,quantity:"one"}};class Me extends Te{constructor(e,t){super(0),xe(this,"type",void 0),xe(this,"config",void 0),xe(this,"struct",void 0),this.type=e;const r=je[this.type];if(void 0===r)throw new Error(`unknown box type: ${e}`);this.config=Object.assign({},r.config,t);const n=class{static None(){return[]}static Box(e){return[["size",Be,0],["type",ke,e]]}static FullBox(e){return[].concat(this.Box(e),[["version",Oe,0],["flags",Le,0]])}}[r.box](this.type),i=r.body||[];this.struct=new Map;let o=0;for(const[e,t,r]of[].concat(n,i)){if(this.has(e))throw new Error("Trying to add existing key");let n=r;this.config[e]&&(n=this.config[e]);const i=new t(n);this.struct.set(e,{offset:o,element:i}),o+=i.byteLength}this.byteLength=o}element(e){const t=this.struct.get(e);if(void 0===t)throw new Error("invalid key");return t.element}set(e,t){this.element(e).value=t}get(e){return this.element(e).value}offset(e){const t=this.struct.get(e);if(void 0===t)throw new Error("invalid key");return t.offset}has(e){return this.struct.has(e)}add(e,t){if(this.has(e))throw new Error("Trying to add existing key");return this.struct.set(e,{offset:this.byteLength,element:t}),this.byteLength+=t.byteLength,this}buffer(){const e=Ee.allocUnsafe(this.byteLength);return this.copy(e),e}copy(e,t=0){this.set("size",this.byteLength);for(const r of this.struct.values())r.element.copy(e,t+r.offset)}load(e,t=0){for(const r of this.struct.values())void 0!==r.element.load&&r.element.load(e,t+r.offset)}format(e=0){const t=[" ".repeat(e)+`[${this.type}] (${this.byteLength})`];for(const[r,n]of this.struct){const i=n.element;void 0!==i.format?t.push(i.format(e+2)):t.push(" ".repeat(e+2)+`${r} = ${i.value} (${i.byteLength})`)}return t.join("\n")}print(e){console.warn(this.format(e))}}class De extends Me{constructor(e,t,...r){super(e,t),xe(this,"boxSize",void 0),this.boxSize=0,this.append(...r)}append(...e){for(const t of e)this.add("box_"+this.boxSize++,t);return this}parse(e){const t=[];for(;e.byteLength>0;){const r=new ke("....");r.load(e,4);const n=r.value,i=je[n];let o;if(void 0!==i){if(i.is_container){o=new De(n),o.load(e);const r=o.parse(e.slice(o.byteLength,o.get("size")));t.push(...r)}else if(o=new Me(n),o.load(e),"avcC"===n){const e=o.element("AVCProfileIndication").value.toString(16).padStart(2,0),r=o.element("profile_compatibility").value.toString(16).padStart(2,0),n=o.element("AVCLevelIndication").value.toString(16).padStart(2,0);t.push({type:"video",mime:`avc1.${e}${r}${n}`})}else if("esds"===n){const e=o.element("audioConfigBytes").value>>>11&31;t.push({type:"audio",mime:`mp4a.40.${e}`})}}else o=new Me("...."),o.load(e),o.type=o.get("type");this.append(o),e=e.slice(o.get("size"))}return t}}const Ne={1:"AAC Main",2:"AAC LC"},Fe={0:"96 kHz",1:"88.2 kHz",2:"64 kHz",3:"48 kHz",4:"44.1 kHz",5:"32 kHz",6:"24 kHz",7:"22.05 kHz",8:"16 kHz",9:"12 kHz",10:"11.025 kHz",11:"8 kHz",12:"7.35 kHz"},qe={1:"Mono",2:"Stereo"},He=e=>{const t=e>>>11&31,r=e>>>3&15;return{coding:Ne[t]||`AAC (${t})`,samplingRate:Fe[e>>>7&15]||"unknown",channels:qe[r]||r.toString()}};function $e(e,t){const r=e.replace(/[^A-Za-z0-9+/]/g,""),n=r.length,i=t?Math.ceil((3*n+1>>2)/t)*t:3*n+1>>2,o=new Uint8Array(i);let s,a,u=0,c=0;for(let e=0;e<n;e++)if(a=3&e,u|=((l=r.charCodeAt(e))>64&&l<91?l-65:l>96&&l<123?l-71:l>47&&l<58?l+4:43===l?62:47===l?63:0)<<18-6*a,3===a||n-e==1){for(s=0;s<3&&c<i;s++,c++)o[c]=u>>>(16>>>s&24)&255;u=0}var l;return o}function We(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class ze{constructor(e){We(this,"_buffer",void 0),We(this,"_dataView",void 0),We(this,"_offset",void 0),We(this,"_bitpos",void 0),We(this,"_byte",void 0),this._buffer=e,this._dataView=new DataView(this._buffer),this._offset=0,this._bitpos=0,this._byte=0}readUint8(e){return this._dataView.getUint8(e)}readUint16(e){return this._dataView.getUint16(e)}readUint32(e){return this._dataView.getUint32(e)}readNext(){const e=this.readUint8(this._offset);return this._offset+=1,e}readBits(e){if(e>32||0===e)throw new Error("length has to be between 0 - 31 bits");let t=0;for(let r=1;r<=e;++r)0===this._bitpos&&(this._byte=this.readNext()),t=t<<1|this._byte>>8-++this._bitpos&1,this._bitpos%=8;return t}readUnsignedExpGolomb(){let e=0;for(;1!==this.readBits(1);)e++;if(0===e)return 0;if(e>=31)throw new Error("read unsigned exponential Golomb: internal error");let t=this.readBits(e);return t|=1<<e,t-1}readSignedExpGolomb(){let e=this.readUnsignedExpGolomb();return e=1&e?e+1>>1:-(e>>1),e}size(){return this._buffer.byteLength}getUint8Array(){return new Uint8Array(this._buffer)}getArrayBuffer(){return this._buffer}}class Ge{constructor(e){var t,r;r=void 0,(t="reader")in this?Object.defineProperty(this,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[t]=r,this.reader=new ze(e)}parse(){this.reader.readNext();const e=this.reader.readNext();this.reader.readNext();const t=this.reader.readNext();if(this.reader.readUnsignedExpGolomb(),[100,110,122,244,44,83,86,118].includes(e)){const e=this.reader.readUnsignedExpGolomb();if(3===e&&this.reader.readBits(1),this.reader.readUnsignedExpGolomb(),this.reader.readUnsignedExpGolomb(),this.reader.readBits(1),this.reader.readBits(1))for(let t=0;t<(3!==e?8:12);t++)this.reader.readBits(1)}this.reader.readUnsignedExpGolomb();const r=this.reader.readUnsignedExpGolomb();if(0===r)this.reader.readUnsignedExpGolomb();else if(1===r){let e=0;this.reader.readBits(1),this.reader.readSignedExpGolomb(),this.reader.readSignedExpGolomb(),e=this.reader.readUnsignedExpGolomb();for(let t=0;t<e;t++)this.reader.readSignedExpGolomb()}this.reader.readUnsignedExpGolomb(),this.reader.readBits(1);const n=this.reader.readUnsignedExpGolomb(),i=this.reader.readUnsignedExpGolomb(),o=this.reader.readBits(1);this.reader.readBits(1);const s=this.reader.readBits(1);return{profile:e,level:t/10,width:16*(n+1)-2*(s?this.reader.readUnsignedExpGolomb():0)-2*(s?this.reader.readUnsignedExpGolomb():0),height:(2-o)*(i+1)*16-2*(s?this.reader.readUnsignedExpGolomb():0)-2*(s?this.reader.readUnsignedExpGolomb():0)}}}const Ve={66:"Baseline",77:"Main",100:"High"},Ye=e=>{const t=parseInt(e.substr(0,2),16),r=parseInt(e.substr(4,2),16);return{coding:"H.264",profile:Ve[t]||t.toString(),level:(r/10).toFixed(1)}};function Je(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Ke={"MPEG4-GENERIC":(e,t,r)=>{const n=Number(e.fmtp.parameters.bitrate)||32e4,i=parseInt(e.fmtp.parameters.config,16),o=i>>>11&31;return{tkhd:{track_ID:r,creation_time:t,modification_time:t,width:0,height:0,volume:1},mdhd:{timescale:Number(e.rtpmap.clockrate),creation_time:t,modification_time:t,duration:0},hdlr:{handler_type:"soun",name:"SoundHandler\0"},mediaHeaderBox:new Me("smhd"),sampleEntryBox:new De("mp4a",{samplerate:e.rtpmap.clockrate<<16>>>0},new Me("esds",{audioConfigBytes:i,maxBitRate:n,avgBitRate:n})),defaultFrameDuration:1024,mime:`mp4a.40.${o}`,codec:He(i)}},H264:(e,t,r)=>{const n=e.fmtp.parameters["profile-level-id"],i=e.fmtp.parameters["sprop-parameter-sets"].split(",").map($e),o=i.slice(0,1),s=i.slice(1),a=new Ge(o[0].buffer).parse();return{mediaHeaderBox:new Me("vmhd"),sampleEntryBox:new De("avc1",{width:a.width,height:a.height},new Me("avcC",{AVCProfileIndication:o[0][1],profile_compatibility:o[0][2],AVCLevelIndication:o[0][3],sequenceParameterSets:o,pictureParameterSets:s})),tkhd:{track_ID:r,creation_time:t,modification_time:t,width:a.width<<16,height:a.height<<16,volume:0},hdlr:{},mdhd:{timescale:e.rtpmap.clockrate,creation_time:t,modification_time:t,duration:0},defaultFrameDuration:void 0!==e.framerate&&e.framerate>0&&Number(e.rtpmap.clockrate)/Number(e.framerate)||3600,mime:`avc1.${n}`,codec:Ye(n)}}};class Xe{constructor(){Je(this,"trackIdMap",void 0),Je(this,"sequenceNumber",void 0),Je(this,"ntpPresentationTime",void 0),Je(this,"trackData",void 0),Je(this,"videoTrackId",void 0),this.trackIdMap={},this.sequenceNumber=0,this.ntpPresentationTime=0,this.trackData=[]}trak(e){const t=new De("trak"),r=new De("mdia"),n=new De("minf"),i=new De("dinf"),o=new De("dref"),s=new De("stbl");return o.set("entry_count",1),t.append(new Me("tkhd",e.tkhd),r.append(new Me("mdhd",e.mdhd),new Me("hdlr",e.hdlr),n.append(e.mediaHeaderBox,i.append(o.append(new Me("url "))),s.append(new De("stsd",void 0,e.sampleEntryBox),new Me("stts"),new Me("stsc"),new Me("stco"),new Me("stsz"),new Me("stss"))))),t}moov(e,t){const r=new De("moov");r.append(new Me("mvhd",{creation_time:t,modification_time:t,duration:0}));const n=new De("mvex");this.trackIdMap={},this.sequenceNumber=0,this.ntpPresentationTime=0;let i=0;return this.trackData=[],e.media.forEach((e=>{if(void 0===e.rtpmap)return;const o=e.rtpmap.payloadType,s=e.rtpmap.encodingName;if(void 0!==Ke[s]){this.trackIdMap[o]=++i,"video"===e.type.toLowerCase()&&(this.videoTrackId=i);const a=Ke[s](e,t,i);e.mime=a.mime,e.codec=a.codec;const u={lastTimestamp:0,baseMediaDecodeTime:0,defaultFrameDuration:0,clockrate:0,bitrate:0,framerate:0,cumulativeByteLength:0,cumulativeDuration:0,cumulativeFrames:0};u.clockrate=e.rtpmap.clockrate,u.defaultFrameDuration=a.defaultFrameDuration,this.trackData.push(u);const c=this.trak(a);r.append(c),n.append(new Me("trex",{track_ID:i}))}})),r.append(n),r}moof(e){const{trackId:t,timestamp:r,byteLength:n}=e,i=t-1,o=this.trackData[i],s=0!==o.lastTimestamp?r-o.lastTimestamp|0:o.defaultFrameDuration;o.lastTimestamp=r;const a=new De("moof"),u=new De("traf"),c=new Me("trun",{sample_duration:s,sample_size:n,first_sample_flags:64});return a.append(new Me("mfhd",{sequence_number:this.sequenceNumber++}),u.append(new Me("tfhd",{track_ID:t}),new Me("tfdt",{baseMediaDecodeTime:o.baseMediaDecodeTime}),c)),o.baseMediaDecodeTime+=s,c.set("data_offset",a.byteLength+8),((e,{byteLength:t,duration:r})=>{if(e.cumulativeByteLength+=t,e.cumulativeDuration+=r,e.cumulativeFrames++,e.cumulativeDuration>=e.clockrate){const t=8*e.cumulativeByteLength,r=e.cumulativeFrames,n=e.cumulativeDuration/e.clockrate;e.bitrate=t/n,e.framerate=r/n,e.cumulativeByteLength=0,e.cumulativeDuration=0,e.cumulativeFrames=0}})(o,{byteLength:n,duration:s}),a}mdat(e){const t=new Me("mdat");return t.add("data",e),t}setPresentationTime(e,t){if(!this.ntpPresentationTime&&t&&e===this.videoTrackId){const r=e-1,n=this.trackData[r];this.ntpPresentationTime=t-n.baseMediaDecodeTime/n.clockrate*1e3}}}var Ze=r(7866).Buffer;function Qe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class et extends h{constructor(){const e=new Xe,t=e=>{this.onSync&&this.onSync(e)};super(new o.Transform({objectMode:!0,transform:function(r,n,i){if(r.type===k.SDP){const t=Math.floor((new Date).getTime()/1e3+2082852e3),n=new Me("ftyp"),i=e.moov(r.sdp,t),o=Ze.allocUnsafe(n.byteLength+i.byteLength);n.copy(o,0),i.copy(o,n.byteLength),F()("msl:mp4:isom")(`ftyp: ${n.format()}`),F()("msl:mp4:isom")(`moov: ${i.format()}`);const s=r.sdp.media.map((e=>({type:e.type,encoding:e.rtpmap&&e.rtpmap.encodingName,mime:e.mime,codec:e.codec})));this.push({type:k.ISOM,data:o,tracks:s,ftyp:n,moov:i})}else if(r.type===k.ELEMENTARY||r.type===k.H264){const{payloadType:n,timestamp:i,ntpTimestamp:o}=r,s=e.trackIdMap[n];if(s){let n;e.ntpPresentationTime||(e.setPresentationTime(s,o),e.ntpPresentationTime&&t(e.ntpPresentationTime));const a=r.type===k.H264?r.nalType===H.IDR_PICTURE:void 0;e.ntpPresentationTime&&a&&void 0!==r.ntpTimestamp&&(n=(r.ntpTimestamp-e.ntpPresentationTime)/1e3);const u=r.data.byteLength,c=e.moof({trackId:s,timestamp:i,byteLength:u}),l=e.mdat(r.data),h=Ze.allocUnsafe(c.byteLength+l.byteLength);c.copy(h,0),l.copy(h,c.byteLength),this.push({type:k.ISOM,data:h,moof:c,mdat:l,ntpTimestamp:o,checkpointTime:n})}}else this.push(r);i()}})),Qe(this,"boxBuilder",void 0),Qe(this,"onSync",void 0),this.boxBuilder=e}get bitrate(){return this.boxBuilder.trackData&&this.boxBuilder.trackData.map((e=>e.bitrate))}get framerate(){return this.boxBuilder.trackData&&this.boxBuilder.trackData.map((e=>e.framerate))}get ntpPresentationTime(){return this.boxBuilder.ntpPresentationTime}}function tt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function rt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(r),!0).forEach((function(t){nt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function nt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let it;!function(e){e[e.SR=200]="SR",e[e.RR=201]="RR",e[e.SDES=202]="SDES",e[e.BYE=203]="BYE",e[e.APP=204]="APP"}(it||(it={}));const ot=e=>{const t=(e=>({version:e[0]>>>6,padding:!!(e[0]&d[2]),count:31&e[0],packetType:e.readUInt8(1),length:e.readUInt16BE(2)}))(e);switch(t.packetType){case it.SR:return ct(e,t);case it.RR:return ht(e,t);case it.SDES:return pt(e,t);case it.BYE:return gt(e,t);case it.APP:return bt(e,t);default:return t}},st=(e,t)=>({type:k.RTCP,data:t,channel:e,rtcp:ot(t)}),at={packetType:200},ut=(e,t,r)=>{const n=[];for(let i=0;i<e;i++){const e=r+24*i;n.push({syncSource:t.readUInt32BE(e+0),fractionLost:t.readUInt8(e+4),cumulativeNumberOfPacketsLost:t.readUIntBE(e+5,3),extendedHighestSequenceNumberReceived:t.readUInt32BE(e+8),interarrivalJitter:t.readUInt32BE(e+12),lastSRTimestamp:t.readUInt32BE(e+16),delaySinceLastSR:t.readUInt32BE(e+20)})}return n},ct=(e,t)=>rt(rt({},t),{},{syncSource:e.readUInt32BE(4),ntpMost:e.readUInt32BE(8),ntpLeast:e.readUInt32BE(12),rtpTimestamp:e.readUInt32BE(16),sendersPacketCount:e.readUInt32BE(20),sendersOctetCount:e.readUInt32BE(24),reports:ut(t.count,e,28)}),lt=e=>e.packetType===it.SR,ht=(e,t)=>rt(rt({},t),{},{syncSource:e.readUInt32BE(4),reports:ut(t.count,e,8)}),ft=e=>e.packetType===it.RR;let dt;!function(e){e[e.CNAME=1]="CNAME",e[e.NAME=2]="NAME",e[e.EMAIL=3]="EMAIL",e[e.PHONE=4]="PHONE",e[e.LOC=5]="LOC",e[e.TOOL=6]="TOOL",e[e.NOTE=7]="NOTE",e[e.PRIV=8]="PRIV"}(dt||(dt={}));const pt=(e,t)=>{const r=[];let n=4;for(let i=0;i<t.count;i++){const t={source:e.readUInt32BE(n),items:[]};for(n+=4;;){const r=e.readUInt8(n++);if(0===r){n%4!=0&&(n+=4-n%4);break}const i=e.readUInt8(n++);if(r===dt.PRIV){const r=e.readUInt8(n),o=e.toString("utf8",n+1,n+1+r),s=e.toString("utf8",n+1+r,n+i);t.items.push([dt.PRIV,o,s])}else{const o=e.toString("utf8",n,n+i);t.items.push([r,o])}n+=i}r.push(t)}return rt(rt({},t),{},{syncSource:e.readUInt32BE(4),sourceDescriptions:r})},mt=e=>e.packetType===it.SDES,gt=(e,t)=>{const r=[];for(let n=0;n<t.count;n++)r.push(e.readUInt32BE(4+4*n));let n;if(t.length>t.count){const r=4+4*t.count,i=e.readUInt8(r);n=e.toString("utf-8",r+1,r+1+i)}return rt(rt({},t),{},{sources:r,reason:n})},yt=e=>e.packetType===it.BYE,bt=(e,t)=>rt(rt({},t),{},{subtype:t.count,source:e.readUInt32BE(4),name:e.toString("ascii",8,12),data:e.slice(12)}),vt=e=>e.packetType===it.APP;function wt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const _t=F()("msl:mse");class St extends f{constructor(e){if(void 0===e)throw new Error("video element argument missing");let t,r;const n=new o.Writable({objectMode:!0,write:(i,o,s)=>{if(i.type===k.ISOM)if(this._done=s,void 0!==i.tracks||void 0!==i.mime){const o=i.tracks??[],s=o.map((e=>e.mime)).filter((e=>e)),a=0!==s.length?s.join(", "):"avc1.640029, mp4a.40.2",u=i.mime??`video/mp4; codecs="${a}"`;if(!MediaSource.isTypeSupported(u))return void n.emit("error",`unsupported media type: ${u}`);this._lastCheckpointTime=0,t=new MediaSource,e.src=window.URL.createObjectURL(t);const c=()=>{if(void 0!==t){window.URL.revokeObjectURL(e.src),t.removeEventListener("sourceopen",c),this.onSourceOpen&&this.onSourceOpen(t,o),r=this.addSourceBuffer(e,t,u),r.onerror=e=>{console.error("error on SourceBuffer: ",e),n.emit("error")};try{r.appendBuffer(i.data)}catch(e){_t("failed to append to SourceBuffer: ",e,i)}}else n.emit("error","no MediaSource instance")};t.addEventListener("sourceopen",c)}else{this._lastCheckpointTime=void 0!==i.checkpointTime?i.checkpointTime:this._lastCheckpointTime;try{var a;null===(a=r)||void 0===a||a.appendBuffer(i.data)}catch(e){_t("failed to append to SourceBuffer: ",e,i)}}else if(i.type===k.RTCP){var u;yt(i.rtcp)&&"open"===(null===(u=t)||void 0===u?void 0:u.readyState)&&t.endOfStream(),s()}else s()}});n.on("finish",(()=>{console.warn("incoming stream finished: end stream"),t&&"open"===t.readyState&&t.endOfStream()})),n.on("error",(e=>{var n;console.error("error on incoming stream: ",e),r&&r.updating?r.addEventListener("updateend",(()=>{var e;"open"===(null===(e=t)||void 0===e?void 0:e.readyState)&&t.endOfStream()})):"open"===(null===(n=t)||void 0===n?void 0:n.readyState)&&t.endOfStream()}));const i=new o.Readable({objectMode:!0,read:function(){}});i.on("error",(()=>{console.warn("outgoing stream broke somewhere")})),super(n,i),wt(this,"_videoEl",void 0),wt(this,"_done",void 0),wt(this,"_lastCheckpointTime",void 0),wt(this,"onSourceOpen",void 0),this._videoEl=e,this._lastCheckpointTime=0}addSourceBuffer(e,t,r){const n=t.addSourceBuffer(r);let i=0;return n.addEventListener("updateend",(()=>{if(++i,i>100&&n.buffered.length){i=0;const t=n.buffered.length-1,r=n.buffered.start(t),o=Math.min(e.currentTime,this._lastCheckpointTime)-10;try{if(o>r)return void n.remove(r,o)}catch(e){console.warn(e)}}this._done&&this._done()})),n}get currentTime(){return this._videoEl.currentTime}async play(){return await this._videoEl.play()}pause(){return this._videoEl.pause()}}var Et=r(7866).Buffer;class xt extends h{constructor(){let e,t=[];super(new o.Transform({objectMode:!0,transform:function(r,n,i){if(r.type===k.SDP){let t;for(const e of r.sdp.media)"application"===e.type&&e.rtpmap&&"VND.ONVIF.METADATA"===e.rtpmap.encodingName&&(t=e);t&&t.rtpmap&&(e=Number(t.rtpmap.payloadType)),i(void 0,r)}else if(r.type===k.RTP&&w(r.data)===e){if(t.push(C(r.data)),v(r.data)&&t.length>0)return i(void 0,{timestamp:S(r.data),ntpTimestamp:r.ntpTimestamp,payloadType:w(r.data),data:Et.concat(t),type:k.XML}),void(t=[]);i()}else i(void 0,r)}}))}}var Rt=r(7866).Buffer;const Tt=e=>e.match(/^m=/),Ct=(e,t)=>{const r=t.indexOf(e);return r<0?[t.slice(0)]:[t.slice(0,r),t.slice(r+1)]},kt={fmtp:e=>{const[t,r]=Ct(" ",e);{const e=r.trim().split(";"),n={};return e.forEach((e=>{const[t,r]=Ct("=",e),i=t.trim().toLowerCase();""!==i&&(n[i]=r.trim())})),{format:t,parameters:n}}},framerate:Number,rtpmap:e=>{const[t,r]=Ct(" ",e),[n,i,o]=r.toUpperCase().split("/");return void 0===o?{payloadType:Number(t),encodingName:n,clockrate:Number(i)}:{payloadType:Number(t),encodingName:n,clockrate:Number(i),encodingParameters:o}},transform:e=>e.split(";").map((e=>e.split(",").map(Number))),"x-sensor-transform":e=>e.split(";").map((e=>e.split(",").map(Number))),framesize:e=>e.split(" ")[1].split("-").map(Number)},Ot=e=>{const t=e.slice(0,1),r=e.slice(2);switch(t){case"v":return{version:r};case"o":const[e,t,n,i,o,s]=r.split(" ");return{origin:{addrType:o,netType:i,sessionId:t,sessionVersion:n,unicastAddress:s,username:e}};case"s":return{sessionName:r};case"i":return{sessionInformation:r};case"u":return{uri:r};case"e":return{email:r};case"p":return{phone:r};case"c":const[a,u,c]=r.split(" ");return{connectionData:{addrType:u,connectionAddress:c,netType:a}};case"b":const[l,h]=r.split(":");return{bwtype:l,bandwidth:h};case"t":const[f,d]=r.split(" ").map(Number);return{time:{startTime:f,stopTime:d}};case"r":const[p,m,...g]=r.split(" ").map(Number);return{repeatTimes:{repeatInterval:p,activeDuration:m,offsets:g}};case"z":case"k":return;case"a":return(e=>{const[t,r]=Ct(":",e);return void 0===r?{[t]:!0}:void 0!==kt[t]?{[t]:kt[t](r)}:{[t]:r}})(r);case"m":const[y,b,v,w]=r.split(" ");return{type:y,port:Number(b),protocol:v,fmt:Number(w)}}},Pt=e=>{const t=e.indexOf("\nm=");return((e,t,r=0)=>{const n=`\n${"a=control:"}`;r=e.indexOf(n,r);let i=0;const o=[];for(;r>=0;)i=e.indexOf("\n",r+n.length),o.push(e.toString("ascii",r+n.length,i).trim()),r=e.indexOf(n,i);return o})(e,0,t)},It=e=>{const t=e.toString("ascii").split("\n").map((e=>e.trim())),r={session:{},media:[]};let n=0,i=r.session;for(const e of t)Tt(e)&&(r.media[n]={},i=r.media[n],++n),i=Object.assign(i,Ot(e));return r},Lt=e=>({type:k.SDP,data:e,sdp:It(e)}),Bt=(e,t)=>{const r=`\n${t.toLowerCase()}: `,n=e.toString().toLowerCase().indexOf(r);if(n>=0){const t=e.indexOf("\n",n+r.length);return e.toString("ascii",n+r.length,t).trim()}return null},At=e=>{const t=Bt(e,"CSeq");return null!==t?Number(t):null},Ut=e=>{const t=Bt(e,"Session");return t?t.split(";")[0]:null},jt=e=>{const t=Bt(e,"Session");if(null===t)return null;const r="timeout=",n=t.toLowerCase().indexOf(r);if(-1!==n){let e=t.substring(n+r.length);e=e.split(";")[0];const i=parseInt(e);return isNaN(i)?60:i}return 60},Mt=e=>Number(e.toString("ascii",9,12)),Dt=e=>Bt(e,"Content-Base"),Nt=e=>Bt(e,"Content-Location"),Ft=e=>{const t=Bt(e,"Connection");return null!==t&&"close"===t.toLowerCase()},qt=e=>{const t=Bt(e,"Range");if(null!==t)return t.split("=")[1].split("-")},Ht=e=>{const t=["\n\n","\r\r","\r\n\r\n"].map((t=>{const r=e.indexOf(t);return-1!==r?r+t.length:r})).filter((e=>-1!==e));return t.length>0?t.reduce(((e,t)=>Math.min(e,t))):-1};var $t,Wt=r(7866).Buffer;function zt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}!function(e){e[e.IDLE=0]="IDLE",e[e.INTERLEAVED=1]="INTERLEAVED",e[e.RTSP=2]="RTSP"}($t||($t={}));class Gt{constructor(){zt(this,"_chunks",[]),zt(this,"_length",0),zt(this,"_state",$t.IDLE),zt(this,"_packet",void 0),this._init()}_init(){this._chunks=[],this._length=0,this._state=$t.IDLE}_push(e){this._chunks.push(e),this._length+=e.length}_parseRtsp(){const e=[],t=Wt.concat(this._chunks),r=Ht(t);if(-1===r)return e;const n=r,i=Bt(t,"Content-Length");if(i&&parseInt(i)>t.length-n)return e;if(this._init(),n===t.length||36===t[n]){const r=t.slice(0,n);e.push({type:k.RTSP,data:r});const i=t.slice(n);this._push(i)}else{const r=t,i=t.slice(n);e.push({type:k.RTSP,data:r}),e.push(Lt(i))}return e}_parseInterleaved(){const e=[];if(this._length<4)return e;if(this._packet||(this._packet=(e=>{const t=Wt.alloc(4);let r=0,n=0;for(;n<t.length;){const i=e[r++],o=Math.min(i.length,t.length-n);i.copy(t,n,0,o),n+=o}const i=t[1],o=t.length;return{channel:i,begin:o,end:o+t.readUInt16BE(2)}})(this._chunks)),this._length<this._packet.end)return e;const t=Wt.concat(this._chunks),r=t.slice(this._packet.begin,this._packet.end),n=t.slice(this._packet.end),i=this._packet.channel;if(delete this._packet,this._init(),this._push(n),i%2==0)e.push({type:k.RTP,data:r,channel:i});else{let t=r;do{const r=4*t.readUInt16BE(2)+4;e.push(st(i,t.slice(0,r))),t=t.slice(r)}while(t.length>0)}return e}_setState(){for(;this._chunks.length>0&&0===this._chunks[0].length;)this._chunks.shift();const e=this._chunks[0];if(0===this._chunks.length)this._state=$t.IDLE;else if(36===e[0])this._state=$t.INTERLEAVED;else{if("RTSP"!==e.toString("ascii",0,4))throw new Error(`Unknown chunk of length ${e.length}`);this._state=$t.RTSP}}parse(e){this._push(e),this._state===$t.IDLE&&this._setState();let t=[],r=!1;for(;!r;){let e=[];switch(this._state){case $t.IDLE:break;case $t.INTERLEAVED:e=this._parseInterleaved();break;case $t.RTSP:e=this._parseRtsp();break;default:throw new Error("internal error: unknown state")}e.length>0?t=t.concat(e):r=!0,this._setState()}return t}}class Vt extends h{constructor(){const e=new Gt,t=new o.Transform({objectMode:!0,transform:function(r,n,i){if(r.type===k.RAW)try{e.parse(r.data).forEach((e=>t.push(e))),i()}catch(e){i(e)}else i(void 0,r)}}),r=new o.Transform({objectMode:!0,transform:function(e,t,r){if(e.type===k.RTSP){const t=(e=>{if(!e.method||!e.uri)throw new Error("message needs to contain a method and a uri");const t=e.protocol||"RTSP/1.0",r=e.headers||{},n=[`${e.method} ${e.uri} ${t}`,Object.entries(r).map((([e,t])=>e+": "+t)).join("\r\n"),"\r\n"].join("\r\n");return F()("msl:rtsp:outgoing")(n),Rt.from(n)})(e);r(void 0,{type:k.RAW,data:t})}else r(void 0,e)}});super(t,r)}}const Yt=(e,t)=>{let r;if(void 0!==t){if("object"!=typeof t)throw new Error("merge expects override to be an object!");r=Object.keys(t).reduce(((e,r)=>(void 0!==t[r]&&(e[r]=t[r]),e)),{})}return Object.assign({},e,r)},Jt=Date.UTC(1900,0,1);function Kt(e,t){return Jt+1e3*(e+t/4294967296)}var Xt,Zt=r(7866).Buffer;function Qt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let er;!function(e){e.IDLE="idle",e.PLAYING="playing",e.PAUSED="paused"}(Xt||(Xt={})),function(e){e.OPTIONS="OPTIONS",e.DESCRIBE="DESCRIBE",e.SETUP="SETUP",e.PLAY="PLAY",e.PAUSE="PAUSE",e.TEARDOWN="TEARDOWN"}(er||(er={}));class tr extends Error{constructor(e,t){super(e),Qt(this,"code",void 0),this.name="RTSPResponseError",this.code=t}}class rr extends h{constructor(e={}){const{uri:t,headers:r,defaultHeaders:n}=Yt(((e=("undefined"==typeof window?"":window.location.hostname),t=[])=>({uri:t.length>0?`rtsp://${e}/axis-media/media.amp?${t.join("&")}`:`rtsp://${e}/axis-media/media.amp`}))(e.hostname,e.parameters),e),i=new o.Transform({objectMode:!0,transform:(e,t,r)=>{e.type===k.RTSP?(this._onRtsp(e),r()):e.type===k.RTCP?(this._onRtcp(e),this.onRtcp&&this.onRtcp(e.rtcp),r(void 0,e)):e.type===k.RTP?(this._onRtp(e),r(void 0,e)):e.type===k.SDP?(this._onSdp(e),this.onSdp&&this.onSdp(e.sdp),r(void 0,e)):r(void 0,e)}});i.on("end",(()=>{this._outgoingClosed=!0})),super(i),Qt(this,"uri",void 0),Qt(this,"headers",void 0),Qt(this,"defaultHeaders",void 0),Qt(this,"t0",void 0),Qt(this,"n0",void 0),Qt(this,"clockrates",void 0),Qt(this,"startTime",void 0),Qt(this,"onRtcp",void 0),Qt(this,"onSdp",void 0),Qt(this,"onError",void 0),Qt(this,"onPlay",void 0),Qt(this,"retry",void 0),Qt(this,"_outgoingClosed",void 0),Qt(this,"_sequence",void 0),Qt(this,"_callStack",void 0),Qt(this,"_callHistory",void 0),Qt(this,"_state",void 0),Qt(this,"_waiting",void 0),Qt(this,"_contentBase",void 0),Qt(this,"_contentLocation",void 0),Qt(this,"_sessionId",void 0),Qt(this,"_sessionControlURL",void 0),Qt(this,"_renewSessionInterval",void 0),this._outgoingClosed=!1,this._reset(),this.update(t,r,n),this._sessionControlURL=this._controlURL()}update(e,t={},r={}){if(void 0===e)throw new Error("You must supply an uri when creating a RtspSessionComponent");this.uri=e,this.defaultHeaders=r,this.headers=Object.assign({[er.OPTIONS]:{},[er.PLAY]:{},[er.SETUP]:{Blocksize:"64000"},[er.DESCRIBE]:{Accept:"application/sdp"},[er.PAUSE]:{}},t)}_reset(){this._sequence=1,this.retry=()=>console.error("No request sent, can't retry"),this._callStack=[],this._callHistory=[],this._state=Xt.IDLE,this._waiting=!1,this._contentBase=null,this._sessionId=null,null!==this._renewSessionInterval&&clearInterval(this._renewSessionInterval),this._renewSessionInterval=null,this.t0=void 0,this.n0=void 0,this.clockrates=void 0}_controlURL(e){if(void 0!==e&&/^[^:]+:\/\//.test(e))return e;const t=this._contentBase??this._contentLocation??this.uri;if(null==t)throw new Error("relative or missing control attribute but no base URL available");return void 0===e||"*"===e?t:new URL(e,t).href}_onRtsp(e){this._waiting=!1;const t=Mt(e.data),r=Ft(e.data),n=At(e.data);if(null===n)throw new Error("rtsp: expected sequence number");if(void 0===this._callHistory)throw new Error("rtsp: internal error");const i=this._callHistory[n-1];if(F()("msl:rtsp:incoming")(`${e.data}`),!this._sessionId&&!r){this._sessionId=Ut(e.data);const t=jt(e.data);null!==t&&(null!==this._renewSessionInterval&&clearInterval(this._renewSessionInterval),this._renewSessionInterval=setInterval((()=>{this._enqueue({method:er.OPTIONS}),this._dequeue()}),1e3*Math.max(5,t-5)))}this._contentBase||(this._contentBase=Dt(e.data)),this._contentLocation||(this._contentLocation=Nt(e.data)),t>=400&&this.onError&&this.onError(new tr(e.data.toString("ascii"),t)),i===er.PLAY&&this.onPlay&&this.onPlay(qt(e.data)),r&&(F()("msl:rtsp:incoming")(`RTSP Session ${this._sessionId} ended with statusCode: ${t}`),this._sessionId=null),this._dequeue()}_onRtcp(e){if(void 0===this.t0||void 0===this.n0)throw new Error("rtsp: internal error");if(lt(e.rtcp)){const t=e.channel-1;this.t0[t]=e.rtcp.rtpTimestamp,this.n0[t]=Kt(e.rtcp.ntpMost,e.rtcp.ntpLeast)}}_onRtp(e){if(void 0===this.t0||void 0===this.n0||void 0===this.clockrates)throw new Error("rtsp: internal error");const t=e.channel,r=this.t0[t],n=this.n0[t];if(void 0!==r&&void 0!==n){const i=this.clockrates[t],o=S(e.data)-r|0;e.ntpTimestamp=o/i*1e3+n}}_onSdp(e){this.n0={},this.t0={},this.clockrates={},this._sessionControlURL=this._controlURL(e.sdp.session.control),e.sdp.media.forEach(((e,t)=>{if(void 0===e.rtpmap)return;const{clockrate:r}=e.rtpmap,n=2*t,i=n+1,o=void 0===e.control?this._sessionControlURL:this._controlURL(e.control);this._enqueue({method:er.SETUP,headers:{Transport:"RTP/AVP/TCP;unicast;interleaved="+n+"-"+i},uri:o}),void 0!==this.clockrates&&(this.clockrates[n]=r)})),this._state===Xt.PLAYING&&this._enqueue({method:er.PLAY,headers:{Range:`npt=${this.startTime||0}-`},uri:this._sessionControlURL}),this._dequeue()}play(e=0){if(this._state===Xt.IDLE)this.startTime=Number(e)||0,this._enqueue({method:er.OPTIONS}),this._enqueue({method:er.DESCRIBE});else if(this._state===Xt.PAUSED){if(null===this._sessionId||void 0===this._sessionId)throw new Error("rtsp: internal error");this._enqueue({method:er.PLAY,headers:{Session:this._sessionId},uri:this._sessionControlURL})}this._state=Xt.PLAYING,this._dequeue()}pause(){this._enqueue({method:er.PAUSE}),this._state=Xt.PAUSED,this._dequeue()}stop(){this._sessionId?this._enqueue({method:er.TEARDOWN}):this._callStack=[],this._state=Xt.IDLE,null!==this._renewSessionInterval&&(clearInterval(this._renewSessionInterval),this._renewSessionInterval=null),this._dequeue()}send(e){const{method:t,headers:r,uri:n}=e;if(void 0===t)throw new Error("missing method when send request");if(this._waiting=!0,this.retry=this.send.bind(this,e),void 0===this._sequence||void 0===this.headers||void 0===this._callHistory)throw new Error("rtsp: internal error");const i=Object.assign({type:k.RTSP,uri:n||this._sessionControlURL,data:Zt.alloc(0)},{method:t,headers:r},{headers:Object.assign({CSeq:this._sequence++},this.defaultHeaders,this.headers[t],r)});this._sessionId&&(i.headers.Session=this._sessionId),this._callHistory.push(t),this._outgoingClosed?F()("msl:rtsp:outgoing")(`Unable to send ${t}, connection closed`):this.outgoing.push(i)}_enqueue(e){if(void 0===this._callStack)throw new Error("rtsp: internal error");this._callStack.push(e)}_dequeue(){if(void 0===this._callStack)throw new Error("rtsp: internal error");if(!this._waiting&&this._callStack.length>0){const e=this._callStack.shift();void 0!==e&&this.send(e)}}}const nr=async(e={})=>{const{uri:t,tokenUri:r,protocol:n,timeout:i}=Yt(((e=window.location.host,t=window.location.protocol)=>({uri:`${"https:"===t?"wss:":"ws:"}//${e}/rtsp-over-websocket`,tokenUri:`${t}//${e}/axis-cgi/rtspwssession.cgi`,protocol:"binary",timeout:10007}))(e.host,e.scheme),e);if(void 0===t)throw new Error("ws: internal error");return await new Promise(((e,o)=>{try{const s=new WebSocket(t,n),a=setTimeout((()=>{clearTimeout(a),s.readyState===WebSocket.CONNECTING&&(s.onerror=null,o(new Error("websocket connection timed out")))}),i);s.binaryType="arraybuffer",s.onerror=i=>{clearTimeout(a);const s=new XMLHttpRequest;s.addEventListener("load",(function(){if(this.status>=400)return console.warn("failed to load token",this.status,this.responseText),void o(i);const r=this.responseText.trim(),s=new WebSocket(`${t}?rtspwssession=${r}`,n);s.binaryType="arraybuffer",s.onerror=e=>{o(e)},s.onopen=()=>e(s)})),s.addEventListener("error",(e=>{console.warn("failed to get token"),o(e)})),s.addEventListener("abort",(()=>o(i))),s.open("GET",`${r}?${Date.now()}`);try{s.send()}catch(e){o(i)}},s.onopen=()=>{clearTimeout(a),e(s)}}catch(e){o(e)}}))};var ir=r(7866).Buffer;class or extends l{constructor(e){if(void 0===e)throw new Error("socket argument missing");const t=new o.Readable({objectMode:!0,read:function(){}});e.onmessage=r=>{const n=ir.from(r.data);t.push({data:n,type:k.RAW})||e.readyState===WebSocket.OPEN&&(F()("msl:websocket:incoming")("downstream frozen"),e.close())},t.on("error",(t=>{console.warn("closing socket due to incoming error",t),e.close()}));const r=new o.Writable({objectMode:!0,write:function(t,r,n){try{e.send(t.data)}catch(e){console.warn("message lost during send:",t)}n()}});var n,i;r.on("error",(e=>{console.warn("error during websocket send, ignoring:",e)})),r.on("finish",(()=>{F()("msl:websocket:outgoing")("finish"),e.readyState!==WebSocket.CLOSED&&e.close()})),e.onclose=e=>{F()("msl:websocket:close")(`${e.code}`),1001===e.code&&this.onServerClose&&this.onServerClose(),t.push(null),r.end()},super(t,r),i=void 0,(n="onServerClose")in this?Object.defineProperty(this,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):this[n]=i}static async open(e){return await nr(e).then((e=>new or(e)))}}function sr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class ar{constructor(...e){sr(this,"firstComponent",void 0),sr(this,"lastComponent",void 0),sr(this,"_set",void 0);const[t,...r]=e;this._set=new Set(e),this.firstComponent=t,this.lastComponent=r.reduce(((e,t)=>e.connect(t)),t)}init(...e){const[t,...r]=e;this._set=new Set(e),this.firstComponent=t,this.lastComponent=r.reduce(((e,t)=>e.connect(t)),t)}insertAfter(e,t){if(!this._set.has(e))throw new Error("insertion point not part of pipeline");if(this._set.has(t))throw new Error("new component already in the pipeline");const r=e.next;return null===r?(e.connect(t),this.lastComponent=t):(e.disconnect(),e.connect(t).connect(r)),this._set.add(t),this}insertBefore(e,t){if(!this._set.has(e))throw new Error("insertion point not part of pipeline");if(this._set.has(t))throw new Error("new component already in the pipeline");const r=e.prev;return null===r?(t.connect(e),this.firstComponent=t):(r.disconnect(),r.connect(t).connect(e)),this._set.add(t),this}remove(e){if(!this._set.has(e))throw new Error("component not part of pipeline");const t=e.prev,r=e.next;if(null===t&&null===r)throw new Error("cannot remove last component");return null===t&&null!==r?(e.disconnect(),this.firstComponent=r):null!==t&&null===r?(t.disconnect(),this.lastComponent=t):null!==t&&null!==r&&(t.disconnect(),e.disconnect(),t.connect(r)),this._set.delete(e),this}append(...e){return e.forEach((e=>{this.insertAfter(this.lastComponent,e)})),this}prepend(...e){return e.forEach((e=>{this.insertBefore(this.firstComponent,e)})),this}}function ur(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class cr extends ar{constructor(e){const t=new Vt,r=new rr(e);r.onSdp=e=>{this.onSdp&&this.onSdp(e)},r.onPlay=e=>{this.onPlay&&this.onPlay(e)},super(t,r),ur(this,"onSdp",void 0),ur(this,"onPlay",void 0),ur(this,"rtsp",void 0),this.rtsp=r}}function lr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class hr extends cr{constructor(e){super(e),lr(this,"onSync",void 0),lr(this,"_mp4Muxer",void 0);const t=new J,r=new P,n=new et;n.onSync=e=>{this.onSync&&this.onSync(e)},this.append(t,r,n),this._mp4Muxer=n}get bitrate(){return this._mp4Muxer.bitrate}get framerate(){return this._mp4Muxer.framerate}}class fr extends cr{constructor(e){super(e);const t=new ve;this.append(t)}}var dr=r(2993);function pr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class mr{constructor(e,t,r){pr(this,"realm",void 0),pr(this,"nonce",void 0),pr(this,"opaque",void 0),pr(this,"algorithm",void 0),pr(this,"qop",void 0),pr(this,"username",void 0),pr(this,"ha1Base",void 0),pr(this,"count",void 0),pr(this,"nc",(()=>(++this.count,this.count.toString(16).padStart(8,"0")))),pr(this,"cnonce",(()=>new Array(4).fill(0).map((()=>Math.floor(256*Math.random()))).map((e=>e.toString(16))).join(""))),pr(this,"ha1",(e=>{let t=this.ha1Base;return"md5-sess"===this.algorithm&&(t=(new dr.V).appendStr(`${t}:${this.nonce}:${e}`).end().toString()),t})),pr(this,"ha2",((e,t,r="")=>{let n=(new dr.V).appendStr(`${e}:${t}`).end().toString();if("md5-sess"===this.algorithm){const i=(new dr.V).appendStr(r).end().toString();n=(new dr.V).appendStr(`${e}:${t}:${i}`).end().toString()}return n})),pr(this,"authorization",((e="GET",t="",r)=>{const n=this.nc(),i=this.cnonce(),o=this.ha1(i),s=this.ha2(e,t,r),a=void 0===this.qop?(new dr.V).appendStr(`${o}:${this.nonce}:${s}`).end().toString():(new dr.V).appendStr(`${o}:${this.nonce}:${n}:${i}:${this.qop}:${s}`).end().toString(),u=[];return u.push(`username="${this.username}"`),u.push(`realm="${this.realm}"`),u.push(`nonce="${this.nonce}"`),u.push(`uri="${t}"`),void 0!==this.qop&&(u.push(`qop=${this.qop}`),u.push(`nc=${n}`),u.push(`cnonce="${i}"`)),u.push(`response="${a}"`),void 0!==this.opaque&&u.push(`opaque="${this.opaque}"`),`Digest ${u.join(", ")}`}));const n=e.get("realm");if(void 0===n)throw new Error("no realm in digest challenge");this.realm=n,this.ha1Base=(new dr.V).appendStr(`${t}:${n}:${r}`).end().toString();const i=e.get("nonce");if(void 0===i)throw new Error("no nonce in digest challenge");this.nonce=i,this.opaque=e.get("opaque");const o=e.get("algorithm");void 0!==o?"md5"===o?this.algorithm="md5":"md5-sess"===o&&(this.algorithm="md5-sess"):this.algorithm="md5";const s=e.get("qop");if(void 0!==s){const e=s.split(",").map((e=>e.trim()));e.some((e=>"auth"===e))?this.qop="auth":e.some((e=>"auth-int"===e))&&(this.qop="auth-int")}this.count=0,this.username=t}}var gr=r(7866).Buffer;const yr={username:"root",password:"pass"};class br extends h{constructor(e={}){const{username:t,password:r}=Yt(yr,e);if(void 0===t||void 0===r)throw new Error("need username and password");let n,i;const o=O((function(e,t,r){e.type===k.RTSP&&(n=e,i&&e.headers&&(e.headers.Authorization=i)),r(void 0,e)}));super(O((function(e,s,a){if(e.type===k.RTSP&&401===Mt(e.data)){const s=e.data.toString().split("\n").find((e=>/WWW-Auth/i.test(e)));if(void 0===s)throw new Error("cannot find WWW-Authenticate header");const u=(e=>{const[,t,...r]=e.split(" "),n=[],i=/\s*([^=]+)="([^"]*)",?/gm;let o;do{if(o=i.exec(r.join(" ")),null!==o){const[,e,t]=o;n.push([e,t])}}while(null!==o);const s=new Map(n);return{type:t.toLowerCase(),params:s}})(s);if("basic"===u.type)i="Basic "+gr.from(t+":"+r).toString("base64");else{if("digest"!==u.type)return;{const e=new mr(u.params,t,r);i=e.authorization(n.method,n.uri)}}o.write(n,(()=>a()))}else a(void 0,e)})),o)}}function vr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class wr extends fr{constructor(e){const{ws:t,rtsp:r,mediaElement:n,auth:i}=e;if(super(r),vr(this,"onCanplay",void 0),vr(this,"onSync",void 0),vr(this,"onServerClose",void 0),vr(this,"ready",void 0),vr(this,"_src",void 0),vr(this,"_sink",void 0),i){const e=new br(i);this.insertBefore(this.rtsp,e)}const o=new D(n);o.onCanplay=()=>{o.play(),this.onCanplay&&this.onCanplay()},o.onSync=e=>{this.onSync&&this.onSync(e)},this.append(o),this._sink=o;const s=or.open(t);this.ready=s.then((e=>{e.onServerClose=()=>{this.onServerClose&&this.onServerClose()},this.prepend(e),this._src=e}))}close(){this._src&&this._src.outgoing.end()}get currentTime(){return this._sink.currentTime}play(){return this._sink.play()}pause(){return this._sink.pause()}get bitrate(){return this._sink.bitrate}get framerate(){return this._sink.framerate}}function _r(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Sr extends hr{constructor(e){const{ws:t,rtsp:r,mediaElement:n,auth:i}=e;if(super(r),_r(this,"onSourceOpen",void 0),_r(this,"onServerClose",void 0),_r(this,"ready",void 0),_r(this,"tracks",void 0),_r(this,"_src",void 0),_r(this,"_sink",void 0),i){const e=new br(i);this.insertBefore(this.rtsp,e)}const o=new St(n);o.onSourceOpen=(e,t)=>{this.tracks=t,this.onSourceOpen&&this.onSourceOpen(e,t)},this.append(o),this._sink=o;const s=or.open(t);this.ready=s.then((e=>{e.onServerClose=()=>{this.onServerClose&&this.onServerClose()},this.prepend(e),this._src=e}))}close(){this._src&&this._src.outgoing.end()}get currentTime(){return this._sink.currentTime}async play(){return await this._sink.play()}pause(){return this._sink.pause()}}class Er extends Sr{constructor(e){const{metadataHandler:t}=e;super(e);const r=new xt;this.insertAfter(this.rtsp,r);const n=h.fromHandlers((e=>{e.type===k.XML&&t(e)}),void 0);this.insertAfter(r,n)}}function xr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Rr={parameters:["audio=0","video=0","event=on","ptz=all"]};class Tr extends cr{constructor(e){const{ws:t,rtsp:r,metadataHandler:n}=e;super(Object.assign({},Rr,r)),xr(this,"onServerClose",void 0),xr(this,"ready",void 0),xr(this,"_src",void 0);const i=new xt;this.append(i);const o=f.fromHandler((e=>{e.type===k.XML&&n(e)}));this.append(o);const s=or.open(t);this.ready=s.then((e=>{e.onServerClose=()=>{this.onServerClose&&this.onServerClose()},this.prepend(e),this._src=e}))}close(){this._src&&this._src.outgoing.end()}}function Cr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class kr extends cr{constructor(e){const{ws:t,rtsp:r,auth:n}=e;if(super(r),Cr(this,"onServerClose",void 0),Cr(this,"ready",void 0),Cr(this,"_src",void 0),n){const e=new br(n);this.insertBefore(this.rtsp,e)}const i=or.open(t);this.ready=i.then((e=>{e.onServerClose=()=>{this.onServerClose&&this.onServerClose()},this.prepend(e),this._src=e}))}close(){this._src&&this._src.outgoing.end()}get sdp(){return this.ready.then((async()=>{const e=new Promise((e=>{this.rtsp.onSdp=e}));return this.rtsp.send({method:er.DESCRIBE}),this.rtsp.send({method:er.TEARDOWN}),e}))}}var Or=r(7866).Buffer;function Pr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ir(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Lr=F()("msl:http-mp4");class Br extends l{constructor(e){const{uri:t,options:r}=e,n=new o.Readable({objectMode:!0,read:function(){}});n.on("error",(e=>{console.warn("closing socket due to incoming error",e),this._reader&&this._reader.cancel()})),super(n),Ir(this,"uri",void 0),Ir(this,"options",void 0),Ir(this,"length",void 0),Ir(this,"onHeaders",void 0),Ir(this,"onServerClose",void 0),Ir(this,"_reader",void 0),Ir(this,"_abortController",void 0),Ir(this,"_allDone",void 0),n._read=()=>{this._pull()},this.uri=t,this.options=r,this._allDone=!1}play(){if(void 0===this.uri)throw new Error("cannot start playing when there is no URI");this._abortController=new AbortController,this.length=0,fetch(this.uri,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Pr(Object(r),!0).forEach((function(t){Ir(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({credentials:"include",signal:this._abortController.signal},this.options)).then((e=>{if(null===e.body)throw new Error("empty response body");const t=e.headers.get("Content-Type");this.incoming.push({data:Or.alloc(0),type:k.ISOM,mime:t}),this.onHeaders&&this.onHeaders(e.headers),this._reader=e.body.getReader(),this._pull()})).catch((e=>{console.error("http-source: fetch failed: ",e)}))}abort(){this._reader&&this._reader.cancel().catch((e=>{console.log("http-source: cancel reader failed: ",e)})),this._abortController&&this._abortController.abort()}_isClosed(){return this._allDone}_close(){var e;this._reader=void 0,this._allDone=!0,this.incoming.push(null),null===(e=this.onServerClose)||void 0===e||e.call(this)}_pull(){void 0!==this._reader&&this._reader.read().then((({done:e,value:t})=>{if(e)return void(this._isClosed()||(Lr("fetch completed, total downloaded: ",this.length," bytes"),this._close()));if(void 0===t)throw new Error("expected value to be defined");if(void 0===this.length)throw new Error("expected length to be defined");this.length+=t.length;const r=Or.from(t);this.incoming.push({data:r,type:k.ISOM})?this._pull():Lr("downstream back pressure: pausing read")})).catch((e=>{Lr("http-source: read failed: ",e),this._isClosed()||this._close()}))}}function Ar(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Ur extends ar{constructor(e){const{http:t,mediaElement:r}=e,n=new Br(t),i=new St(r);n.onHeaders=e=>{this.onHeaders&&this.onHeaders(e)},n.onServerClose=()=>{var e;return null===(e=this.onServerClose)||void 0===e?void 0:e.call(this)},super(n,i),Ar(this,"onHeaders",void 0),Ar(this,"onServerClose",void 0),Ar(this,"http",void 0),Ar(this,"_src",void 0),Ar(this,"_sink",void 0),this._src=n,this._sink=i,this.http=n}close(){this._src&&this._src.abort()}get currentTime(){return this._sink.currentTime}async play(){return await this._sink.play()}pause(){return this._sink.pause()}}const jr=(e,{maxRetries:t,errors:r}={maxRetries:20,errors:[503]})=>{let n=0;const i=e.onError;e.onError=o=>{null==i||i(o),r.includes(o.code)&&((n+=1)>t?console.log("retry, too many",n,t):setTimeout((()=>{var t;return null===(t=e.retry)||void 0===t?void 0:t.call(e)}),100*n))}}})(),n})()}));
\ No newline at end of file
+!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.mediaStreamLibrary=t():e.mediaStreamLibrary=t()}(self,(function(){return(()=>{var e={7997:(e,t,r)=>{var n=r(2695);t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(n++,"%c"===e&&(i=n))})),t.splice(i,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&void 0!==n&&"env"in n&&(e=n.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=r(4069)(t);const{formatters:i}=e.exports;i.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},4069:(e,t,r)=>{e.exports=function(e){function t(e){let r,i,o,s=null;function a(...e){if(!a.enabled)return;const n=a,i=Number(new Date),o=i-(r||i);n.diff=o,n.prev=r,n.curr=i,r=i,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let s=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((r,i)=>{if("%%"===r)return"%";s++;const o=t.formatters[i];if("function"==typeof o){const t=e[s];r=o.call(n,t),e.splice(s,1),s--}return r})),t.formatArgs.call(n,e),(n.log||t.log).apply(n,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=n,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(i!==t.namespaces&&(i=t.namespaces,o=t.enabled(e)),o),set:e=>{s=e}}),"function"==typeof t.init&&t.init(a),a}function n(e,r){const n=t(this.namespace+(void 0===r?":":r)+e);return n.log=this.log,n}function i(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names.map(i),...t.skips.map(i).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let r;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(r=0;r<i;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(6117),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((r=>{t[r]=e[r]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}},7378:(e,t)=>{"use strict";t.byteLength=function(e){var t=u(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,o=u(e),s=o[0],a=o[1],c=new i(function(e,t,r){return 3*(t+r)/4-r}(0,s,a)),l=0,h=a>0?s-4:s;for(r=0;r<h;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],c[l++]=t>>16&255,c[l++]=t>>8&255,c[l++]=255&t;return 2===a&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,c[l++]=255&t),1===a&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,c[l++]=t>>8&255,c[l++]=255&t),c},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],s=16383,a=0,u=n-i;a<u;a+=s)o.push(c(e,a,a+s>u?u:a+s));return 1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),o.join("")};for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,a=o.length;s<a;++s)r[s]=o[s],n[o.charCodeAt(s)]=s;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function c(e,t,n){for(var i,o,s=[],a=t;a<n;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return s.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},7866:(e,t,r)=>{"use strict";const n=r(7378),i=r(9258),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=u,t.SlowBuffer=function(e){return+e!=e&&(e=0),u.alloc(+e)},t.INSPECT_MAX_BYTES=50;const s=2147483647;function a(e){if(e>s)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,u.prototype),t}function u(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return h(e)}return c(e,t,r)}function c(e,t,r){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!u.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const r=0|m(e,t);let n=a(r);const i=n.write(e,t);return i!==r&&(n=n.slice(0,i)),n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(J(e,Uint8Array)){const t=new Uint8Array(e);return d(t.buffer,t.byteOffset,t.byteLength)}return f(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(J(e,ArrayBuffer)||e&&J(e.buffer,ArrayBuffer))return d(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(J(e,SharedArrayBuffer)||e&&J(e.buffer,SharedArrayBuffer)))return d(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return u.from(n,t,r);const i=function(e){if(u.isBuffer(e)){const t=0|p(e.length),r=a(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||K(e.length)?a(0):f(e):"Buffer"===e.type&&Array.isArray(e.data)?f(e.data):void 0}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return u.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function h(e){return l(e),a(e<0?0:0|p(e))}function f(e){const t=e.length<0?0:0|p(e.length),r=a(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function d(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,u.prototype),n}function p(e){if(e>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|e}function m(e,t){if(u.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||J(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return G(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return V(e).length;default:if(i)return n?-1:G(e).length;t=(""+t).toLowerCase(),i=!0}}function g(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return P(this,t,r);case"utf8":case"utf-8":return T(this,t,r);case"ascii":return k(this,t,r);case"latin1":case"binary":return O(this,t,r);case"base64":return R(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function y(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function b(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),K(r=+r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=u.from(t,n)),u.isBuffer(t))return 0===t.length?-1:v(e,t,r,n,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):v(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function v(e,t,r,n,i){let o,s=1,a=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,a/=2,u/=2,r/=2}function c(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){let n=-1;for(o=r;o<a;o++)if(c(e,o)===c(t,-1===n?0:o-n)){if(-1===n&&(n=o),o-n+1===u)return n*s}else-1!==n&&(o-=o-n),n=-1}else for(r+u>a&&(r=a-u),o=r;o>=0;o--){let r=!0;for(let n=0;n<u;n++)if(c(e,o+n)!==c(t,n)){r=!1;break}if(r)return o}return-1}function w(e,t,r,n){r=Number(r)||0;const i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;const o=t.length;let s;for(n>o/2&&(n=o/2),s=0;s<n;++s){const n=parseInt(t.substr(2*s,2),16);if(K(n))return s;e[r+s]=n}return s}function _(e,t,r,n){return Y(G(t,e.length-r),e,r,n)}function S(e,t,r,n){return Y(function(e){const t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function E(e,t,r,n){return Y(V(t),e,r,n)}function x(e,t,r,n){return Y(function(e,t){let r,n,i;const o=[];for(let s=0;s<e.length&&!((t-=2)<0);++s)r=e.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(t,e.length-r),e,r,n)}function R(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function T(e,t,r){r=Math.min(e.length,r);const n=[];let i=t;for(;i<r;){const t=e[i];let o=null,s=t>239?4:t>223?3:t>191?2:1;if(i+s<=r){let r,n,a,u;switch(s){case 1:t<128&&(o=t);break;case 2:r=e[i+1],128==(192&r)&&(u=(31&t)<<6|63&r,u>127&&(o=u));break;case 3:r=e[i+1],n=e[i+2],128==(192&r)&&128==(192&n)&&(u=(15&t)<<12|(63&r)<<6|63&n,u>2047&&(u<55296||u>57343)&&(o=u));break;case 4:r=e[i+1],n=e[i+2],a=e[i+3],128==(192&r)&&128==(192&n)&&128==(192&a)&&(u=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&a,u>65535&&u<1114112&&(o=u))}}null===o?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),i+=s}return function(e){const t=e.length;if(t<=C)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=C));return r}(n)}t.kMaxLength=s,u.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),u.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(e,t,r){return c(e,t,r)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(e,t,r){return function(e,t,r){return l(e),e<=0?a(e):void 0!==t?"string"==typeof r?a(e).fill(t,r):a(e).fill(t):a(e)}(e,t,r)},u.allocUnsafe=function(e){return h(e)},u.allocUnsafeSlow=function(e){return h(e)},u.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==u.prototype},u.compare=function(e,t){if(J(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),J(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);let r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;const n=u.allocUnsafe(t);let i=0;for(r=0;r<e.length;++r){let t=e[r];if(J(t,Uint8Array))i+t.length>n.length?(u.isBuffer(t)||(t=u.from(t)),t.copy(n,i)):Uint8Array.prototype.set.call(n,t,i);else{if(!u.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(n,i)}i+=t.length}return n},u.byteLength=m,u.prototype._isBuffer=!0,u.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)y(this,t,t+1);return this},u.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},u.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},u.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?T(this,0,e):g.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){let e="";const r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},o&&(u.prototype[o]=u.prototype.inspect),u.prototype.compare=function(e,t,r,n,i){if(J(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;let o=(i>>>=0)-(n>>>=0),s=(r>>>=0)-(t>>>=0);const a=Math.min(o,s),c=this.slice(n,i),l=e.slice(t,r);for(let e=0;e<a;++e)if(c[e]!==l[e]){o=c[e],s=l[e];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},u.prototype.indexOf=function(e,t,r){return b(this,e,t,r,!0)},u.prototype.lastIndexOf=function(e,t,r){return b(this,e,t,r,!1)},u.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let o=!1;for(;;)switch(n){case"hex":return w(this,e,t,r);case"utf8":case"utf-8":return _(this,e,t,r);case"ascii":case"latin1":case"binary":return S(this,e,t,r);case"base64":return E(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const C=4096;function k(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function O(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function P(e,t,r){const n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let i="";for(let n=t;n<r;++n)i+=X[e[n]];return i}function I(e,t,r){const n=e.slice(t,r);let i="";for(let e=0;e<n.length-1;e+=2)i+=String.fromCharCode(n[e]+256*n[e+1]);return i}function L(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function B(e,t,r,n,i,o){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function A(e,t,r,n,i){$(t,n,i,e,r,7);let o=Number(t&BigInt(4294967295));e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,r}function U(e,t,r,n,i){$(t,n,i,e,r,7);let o=Number(t&BigInt(4294967295));e[r+7]=o,o>>=8,e[r+6]=o,o>>=8,e[r+5]=o,o>>=8,e[r+4]=o;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=s,s>>=8,e[r+2]=s,s>>=8,e[r+1]=s,s>>=8,e[r]=s,r+8}function j(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function M(e,t,r,n,o){return t=+t,r>>>=0,o||j(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function D(e,t,r,n,o){return t=+t,r>>>=0,o||j(e,0,r,8),i.write(e,t,r,n,52,8),r+8}u.prototype.slice=function(e,t){const r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);const n=this.subarray(e,t);return Object.setPrototypeOf(n,u.prototype),n},u.prototype.readUintLE=u.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||L(e,t,this.length);let n=this[e],i=1,o=0;for(;++o<t&&(i*=256);)n+=this[e+o]*i;return n},u.prototype.readUintBE=u.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||L(e,t,this.length);let n=this[e+--t],i=1;for(;t>0&&(i*=256);)n+=this[e+--t]*i;return n},u.prototype.readUint8=u.prototype.readUInt8=function(e,t){return e>>>=0,t||L(e,1,this.length),this[e]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(e,t){return e>>>=0,t||L(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(e,t){return e>>>=0,t||L(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(e,t){return e>>>=0,t||L(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(e,t){return e>>>=0,t||L(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readBigUInt64LE=Z((function(e){H(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||W(e,this.length-8);const n=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))})),u.prototype.readBigUInt64BE=Z((function(e){H(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||W(e,this.length-8);const n=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)})),u.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||L(e,t,this.length);let n=this[e],i=1,o=0;for(;++o<t&&(i*=256);)n+=this[e+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},u.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||L(e,t,this.length);let n=t,i=1,o=this[e+--n];for(;n>0&&(i*=256);)o+=this[e+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},u.prototype.readInt8=function(e,t){return e>>>=0,t||L(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){e>>>=0,t||L(e,2,this.length);const r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(e,t){e>>>=0,t||L(e,2,this.length);const r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(e,t){return e>>>=0,t||L(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return e>>>=0,t||L(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readBigInt64LE=Z((function(e){H(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||W(e,this.length-8);const n=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),u.prototype.readBigInt64BE=Z((function(e){H(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||W(e,this.length-8);const n=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+r)})),u.prototype.readFloatLE=function(e,t){return e>>>=0,t||L(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return e>>>=0,t||L(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return e>>>=0,t||L(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return e>>>=0,t||L(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||B(this,e,t,r,Math.pow(2,8*r)-1,0);let i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||B(this,e,t,r,Math.pow(2,8*r)-1,0);let i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},u.prototype.writeUint8=u.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,1,255,0),this[t]=255&e,t+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeBigUInt64LE=Z((function(e,t=0){return A(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeBigUInt64BE=Z((function(e,t=0){return U(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);B(this,e,t,r,n-1,-n)}let i=0,o=1,s=0;for(this[t]=255&e;++i<r&&(o*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+r},u.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);B(this,e,t,r,n-1,-n)}let i=r-1,o=1,s=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+r},u.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},u.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeBigInt64LE=Z((function(e,t=0){return A(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeBigInt64BE=Z((function(e,t=0){return U(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeFloatLE=function(e,t,r){return M(this,e,t,!0,r)},u.prototype.writeFloatBE=function(e,t,r){return M(this,e,t,!1,r)},u.prototype.writeDoubleLE=function(e,t,r){return D(this,e,t,!0,r)},u.prototype.writeDoubleBE=function(e,t,r){return D(this,e,t,!1,r)},u.prototype.copy=function(e,t,r,n){if(!u.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);const i=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},u.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){const t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;let i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{const o=u.isBuffer(e)?e:u.from(e,n),s=o.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=o[i%s]}return this};const N={};function F(e,t,r){N[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function q(e){let t="",r=e.length;const n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function $(e,t,r,n,i,o){if(e>r||e<t){const n="bigint"==typeof t?"n":"";let i;throw i=o>3?0===t||t===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(o+1)}${n}`:`>= -(2${n} ** ${8*(o+1)-1}${n}) and < 2 ** ${8*(o+1)-1}${n}`:`>= ${t}${n} and <= ${r}${n}`,new N.ERR_OUT_OF_RANGE("value",i,e)}!function(e,t,r){H(t,"offset"),void 0!==e[t]&&void 0!==e[t+r]||W(t,e.length-(r+1))}(n,i,o)}function H(e,t){if("number"!=typeof e)throw new N.ERR_INVALID_ARG_TYPE(t,"number",e)}function W(e,t,r){if(Math.floor(e)!==e)throw H(e,r),new N.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new N.ERR_BUFFER_OUT_OF_BOUNDS;throw new N.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}F("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),F("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),F("ERR_OUT_OF_RANGE",(function(e,t,r){let n=`The value of "${e}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=q(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=q(i)),i+="n"),n+=` It must be ${t}. Received ${i}`,n}),RangeError);const z=/[^+/0-9A-Za-z-_]/g;function G(e,t){let r;t=t||1/0;const n=e.length;let i=null;const o=[];for(let s=0;s<n;++s){if(r=e.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function V(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(z,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function Y(e,t,r,n){let i;for(i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function J(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function K(e){return e!=e}const X=function(){const e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)t[n+i]=e[r]+e[i]}return t}();function Z(e){return"undefined"==typeof BigInt?Q:e}function Q(){throw new Error("BigInt not supported")}},488:e=>{"use strict";var t,r="object"==typeof Reflect?Reflect:null,n=r&&"function"==typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise((function(r,n){function i(){void 0!==o&&e.removeListener("error",o),r([].slice.call(arguments))}var o;"error"!==t&&(o=function(r){e.removeListener(t,i),n(r)},e.once("error",o)),e.once(t,i)}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function c(e,t,r,n){var i,o,s,c;if(a(r),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),s=o[t]),void 0===s)s=o[t]=r,++e._eventsCount;else if("function"==typeof s?s=o[t]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),(i=u(e))>0&&s.length>i&&!s.warned){s.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=s.length,c=l,console&&console.warn&&console.warn(c)}return e}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=l.bind(n);return i.listener=r,n.wrapFn=i,i}function f(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(i):p(i,i.length)}function d(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function p(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return u(this)},o.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i="error"===e,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var u=o[e];if(void 0===u)return!1;if("function"==typeof u)n(u,this,t);else{var c=u.length,l=p(u,c);for(r=0;r<c;++r)n(l[r],this,t)}return!0},o.prototype.addListener=function(e,t){return c(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return c(this,e,t,!0)},o.prototype.once=function(e,t){return a(t),this.on(e,h(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,h(this,e,t)),this},o.prototype.removeListener=function(e,t){var r,n,i,o,s;if(a(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){s=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)"removeListener"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},o.prototype.listeners=function(e){return f(this,e,!0)},o.prototype.rawListeners=function(e){return f(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):d.call(e,t)},o.prototype.listenerCount=d,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},9258:(e,t)=>{t.read=function(e,t,r,n,i){var o,s,a=8*i-n-1,u=(1<<a)-1,c=u>>1,l=-7,h=r?i-1:0,f=r?-1:1,d=e[t+h];for(h+=f,o=d&(1<<-l)-1,d>>=-l,l+=a;l>0;o=256*o+e[t+h],h+=f,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=n;l>0;s=256*s+e[t+h],h+=f,l-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,n),o-=c}return(d?-1:1)*s*Math.pow(2,o-n)},t.write=function(e,t,r,n,i,o){var s,a,u,c=8*o-i-1,l=(1<<c)-1,h=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:o-1,p=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),(t+=s+h>=1?f/u:f*Math.pow(2,1-h))*u>=2&&(s++,u/=2),s+h>=l?(a=0,s=l):s+h>=1?(a=(t*u-1)*Math.pow(2,i),s+=h):(a=t*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;e[r+d]=255&a,d+=p,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;e[r+d]=255&s,d+=p,s/=256,c-=8);e[r+d-p]|=128*m}},3730:e=>{"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},6117:e=>{var t=1e3,r=60*t,n=60*r,i=24*n;function o(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}e.exports=function(e,s){s=s||{};var a,u,c=typeof e;if("string"===c&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var o=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(o){var s=parseFloat(o[1]);switch((o[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"weeks":case"week":case"w":return 6048e5*s;case"days":case"day":case"d":return s*i;case"hours":case"hour":case"hrs":case"hr":case"h":return s*n;case"minutes":case"minute":case"mins":case"min":case"m":return s*r;case"seconds":case"second":case"secs":case"sec":case"s":return s*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}}}(e);if("number"===c&&isFinite(e))return s.long?(a=e,(u=Math.abs(a))>=i?o(a,u,i,"day"):u>=n?o(a,u,n,"hour"):u>=r?o(a,u,r,"minute"):u>=t?o(a,u,t,"second"):a+" ms"):function(e){var o=Math.abs(e);return o>=i?Math.round(e/i)+"d":o>=n?Math.round(e/n)+"h":o>=r?Math.round(e/r)+"m":o>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},2695:e=>{var t,r,n=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var a,u=[],c=!1,l=-1;function h(){c&&a&&(c=!1,a.length?u=a.concat(u):l=-1,u.length&&f())}function f(){if(!c){var e=s(h);c=!0;for(var t=u.length;t;){for(a=u,u=[];++l<t;)a&&a[l].run();l=-1,t=u.length}a=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function p(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new d(e,t)),1!==u.length||c||s(f)},d.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},553:e=>{"use strict";var t={};function r(e,r,n){n||(n=Error);var i=function(e){var t,n;function i(t,n,i){return e.call(this,function(e,t,n){return"string"==typeof r?r:r(e,t,n)}(t,n,i))||this}return n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,i}(n);i.prototype.name=n.name,i.prototype.code=e,t[e]=i}function n(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map((function(e){return String(e)})),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}r("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),r("ERR_INVALID_ARG_TYPE",(function(e,t,r){var i,o,s,a,u;if("string"==typeof t&&(o="not ",t.substr(0,o.length)===o)?(i="must not be",t=t.replace(/^not /,"")):i="must be",function(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}(e," argument"))s="The ".concat(e," ").concat(i," ").concat(n(t,"type"));else{var c=("number"!=typeof u&&(u=0),u+".".length>(a=e).length||-1===a.indexOf(".",u)?"argument":"property");s='The "'.concat(e,'" ').concat(c," ").concat(i," ").concat(n(t,"type"))}return s+". Received type ".concat(typeof r)}),TypeError),r("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),r("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),r("ERR_STREAM_PREMATURE_CLOSE","Premature close"),r("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),r("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),r("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),r("ERR_STREAM_WRITE_AFTER_END","write after end"),r("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),r("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),r("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.q=t},673:(e,t,r)=>{"use strict";var n=r(2695),i=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=l;var o=r(5006),s=r(8719);r(3730)(l,o);for(var a=i(s.prototype),u=0;u<a.length;u++){var c=a[u];l.prototype[c]||(l.prototype[c]=s.prototype[c])}function l(e){if(!(this instanceof l))return new l(e);o.call(this,e),s.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",h)))}function h(){this._writableState.ended||n.nextTick(f,this)}function f(e){e.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})},4343:(e,t,r)=>{"use strict";e.exports=i;var n=r(8597);function i(e){if(!(this instanceof i))return new i(e);n.call(this,e)}r(3730)(i,n),i.prototype._transform=function(e,t,r){r(null,e)}},5006:(e,t,r)=>{"use strict";var n,i=r(2695);e.exports=R,R.ReadableState=x,r(488).EventEmitter;var o,s=function(e,t){return e.listeners(t).length},a=r(8208),u=r(7866).Buffer,c=r.g.Uint8Array||function(){},l=r(6029);o=l&&l.debuglog?l.debuglog("stream"):function(){};var h,f,d,p=r(4506),m=r(3390),g=r(1111).getHighWaterMark,y=r(553).q,b=y.ERR_INVALID_ARG_TYPE,v=y.ERR_STREAM_PUSH_AFTER_EOF,w=y.ERR_METHOD_NOT_IMPLEMENTED,_=y.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;r(3730)(R,a);var S=m.errorOrDestroy,E=["error","close","destroy","pause","resume"];function x(e,t,i){n=n||r(673),e=e||{},"boolean"!=typeof i&&(i=t instanceof n),this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=g(this,e,"readableHighWaterMark",i),this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(h||(h=r(7361).s),this.decoder=new h(e.encoding),this.encoding=e.encoding)}function R(e){if(n=n||r(673),!(this instanceof R))return new R(e);var t=this instanceof n;this._readableState=new x(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),a.call(this)}function T(e,t,r,n,i){o("readableAddChunk",t);var s,a=e._readableState;if(null===t)a.reading=!1,function(e,t){if(o("onEofChunk"),!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?P(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,I(e)))}}(e,a);else if(i||(s=function(e,t){var r,n;return n=t,u.isBuffer(n)||n instanceof c||"string"==typeof t||void 0===t||e.objectMode||(r=new b("chunk",["string","Buffer","Uint8Array"],t)),r}(a,t)),s)S(e,s);else if(a.objectMode||t&&t.length>0)if("string"==typeof t||a.objectMode||Object.getPrototypeOf(t)===u.prototype||(t=function(e){return u.from(e)}(t)),n)a.endEmitted?S(e,new _):C(e,a,t,!0);else if(a.ended)S(e,new v);else{if(a.destroyed)return!1;a.reading=!1,a.decoder&&!r?(t=a.decoder.write(t),a.objectMode||0!==t.length?C(e,a,t,!1):L(e,a)):C(e,a,t,!1)}else n||(a.reading=!1,L(e,a));return!a.ended&&(a.length<a.highWaterMark||0===a.length)}function C(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&P(e)),L(e,t)}Object.defineProperty(R.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),R.prototype.destroy=m.destroy,R.prototype._undestroy=m.undestroy,R.prototype._destroy=function(e,t){t(e)},R.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=u.from(e,t),t=""),r=!0),T(this,e,t,!1,r)},R.prototype.unshift=function(e){return T(this,e,null,!0,!1)},R.prototype.isPaused=function(){return!1===this._readableState.flowing},R.prototype.setEncoding=function(e){h||(h=r(7361).s);var t=new h(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,i="";null!==n;)i+=t.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var k=1073741824;function O(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=k?e=k:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function P(e){var t=e._readableState;o("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(o("emitReadable",t.flowing),t.emittedReadable=!0,i.nextTick(I,e))}function I(e){var t=e._readableState;o("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,M(e)}function L(e,t){t.readingMore||(t.readingMore=!0,i.nextTick(B,e,t))}function B(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(o("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function A(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function U(e){o("readable nexttick read 0"),e.read(0)}function j(e,t){o("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),M(e),t.flowing&&!t.reading&&e.read(0)}function M(e){var t=e._readableState;for(o("flow",t.flowing);t.flowing&&null!==e.read(););}function D(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r);var r}function N(e){var t=e._readableState;o("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,i.nextTick(F,t,e))}function F(e,t){if(o("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function q(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}R.prototype.read=function(e){o("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return o("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?N(this):P(this),null;if(0===(e=O(e,t))&&t.ended)return 0===t.length&&N(this),null;var n,i=t.needReadable;return o("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&o("length less than watermark",i=!0),t.ended||t.reading?o("reading or ended",i=!1):i&&(o("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=O(r,t))),null===(n=e>0?D(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&N(this)),null!==n&&this.emit("data",n),n},R.prototype._read=function(e){S(this,new w("_read()"))},R.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e)}n.pipesCount+=1,o("pipe count=%d opts=%j",n.pipesCount,t);var a=t&&!1===t.end||e===i.stdout||e===i.stderr?m:u;function u(){o("onend"),e.end()}n.endEmitted?i.nextTick(a):r.once("end",a),e.on("unpipe",(function t(i,s){o("onunpipe"),i===r&&s&&!1===s.hasUnpiped&&(s.hasUnpiped=!0,o("cleanup"),e.removeListener("close",d),e.removeListener("finish",p),e.removeListener("drain",c),e.removeListener("error",f),e.removeListener("unpipe",t),r.removeListener("end",u),r.removeListener("end",m),r.removeListener("data",h),l=!0,!n.awaitDrain||e._writableState&&!e._writableState.needDrain||c())}));var c=function(e){return function(){var t=e._readableState;o("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&s(e,"data")&&(t.flowing=!0,M(e))}}(r);e.on("drain",c);var l=!1;function h(t){o("ondata");var i=e.write(t);o("dest.write",i),!1===i&&((1===n.pipesCount&&n.pipes===e||n.pipesCount>1&&-1!==q(n.pipes,e))&&!l&&(o("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function f(t){o("onerror",t),m(),e.removeListener("error",f),0===s(e,"error")&&S(e,t)}function d(){e.removeListener("finish",p),m()}function p(){o("onfinish"),e.removeListener("close",d),m()}function m(){o("unpipe"),r.unpipe(e)}return r.on("data",h),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events.error?Array.isArray(e._events.error)?e._events.error.unshift(r):e._events.error=[r,e._events.error]:e.on(t,r)}(e,"error",f),e.once("close",d),e.once("finish",p),e.emit("pipe",r),n.flowing||(o("pipe resume"),r.resume()),e},R.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=q(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},R.prototype.on=function(e,t){var r=a.prototype.on.call(this,e,t),n=this._readableState;return"data"===e?(n.readableListening=this.listenerCount("readable")>0,!1!==n.flowing&&this.resume()):"readable"===e&&(n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,o("on readable",n.length,n.reading),n.length?P(this):n.reading||i.nextTick(U,this))),r},R.prototype.addListener=R.prototype.on,R.prototype.removeListener=function(e,t){var r=a.prototype.removeListener.call(this,e,t);return"readable"===e&&i.nextTick(A,this),r},R.prototype.removeAllListeners=function(e){var t=a.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||i.nextTick(A,this),t},R.prototype.resume=function(){var e=this._readableState;return e.flowing||(o("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,i.nextTick(j,e,t))}(this,e)),e.paused=!1,this},R.prototype.pause=function(){return o("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(o("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},R.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",(function(){if(o("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){o("wrapped data"),r.decoder&&(i=r.decoder.write(i)),r.objectMode&&null==i||(r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var s=0;s<E.length;s++)e.on(E[s],this.emit.bind(this,E[s]));return this._read=function(t){o("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"==typeof Symbol&&(R.prototype[Symbol.asyncIterator]=function(){return void 0===f&&(f=r(8187)),f(this)}),Object.defineProperty(R.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(R.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(R.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),R._fromList=D,Object.defineProperty(R.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(R.from=function(e,t){return void 0===d&&(d=r(3733)),d(R,e,t)})},8597:(e,t,r)=>{"use strict";e.exports=l;var n=r(553).q,i=n.ERR_METHOD_NOT_IMPLEMENTED,o=n.ERR_MULTIPLE_CALLBACK,s=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=n.ERR_TRANSFORM_WITH_LENGTH_0,u=r(673);function c(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new o);r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function l(e){if(!(this instanceof l))return new l(e);u.call(this,e),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",h)}function h(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?f(this,null,null):this._flush((function(t,r){f(e,t,r)}))}function f(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new a;if(e._transformState.transforming)throw new s;return e.push(null)}r(3730)(l,u),l.prototype.push=function(e,t){return this._transformState.needTransform=!1,u.prototype.push.call(this,e,t)},l.prototype._transform=function(e,t,r){r(new i("_transform()"))},l.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},l.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},l.prototype._destroy=function(e,t){u.prototype._destroy.call(this,e,(function(e){t(e)}))}},8719:(e,t,r)=>{"use strict";var n,i=r(2695);function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(undefined),n=n.next}t.corkedRequestsFree.next=e}(t,e)}}e.exports=R,R.WritableState=x;var s,a={deprecate:r(72)},u=r(8208),c=r(7866).Buffer,l=r.g.Uint8Array||function(){},h=r(3390),f=r(1111).getHighWaterMark,d=r(553).q,p=d.ERR_INVALID_ARG_TYPE,m=d.ERR_METHOD_NOT_IMPLEMENTED,g=d.ERR_MULTIPLE_CALLBACK,y=d.ERR_STREAM_CANNOT_PIPE,b=d.ERR_STREAM_DESTROYED,v=d.ERR_STREAM_NULL_VALUES,w=d.ERR_STREAM_WRITE_AFTER_END,_=d.ERR_UNKNOWN_ENCODING,S=h.errorOrDestroy;function E(){}function x(e,t,s){n=n||r(673),e=e||{},"boolean"!=typeof s&&(s=t instanceof n),this.objectMode=!!e.objectMode,s&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=f(this,e,"writableHighWaterMark",s),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===e.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,n=r.sync,o=r.writecb;if("function"!=typeof o)throw new g;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,n,o){--t.pendingcb,r?(i.nextTick(o,n),i.nextTick(I,e,t),e._writableState.errorEmitted=!0,S(e,n)):(o(n),e._writableState.errorEmitted=!0,S(e,n),I(e,t))}(e,r,n,t,o);else{var s=O(r)||e.destroyed;s||r.corked||r.bufferProcessing||!r.bufferedRequest||k(e,r),n?i.nextTick(C,e,r,s,o):C(e,r,s,o)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function R(e){var t=this instanceof(n=n||r(673));if(!t&&!s.call(R,this))return new R(e);this._writableState=new x(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),u.call(this)}function T(e,t,r,n,i,o,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new b("write")):r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function C(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),I(e,t)}function k(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),s=t.corkedRequestsFree;s.entry=r;for(var a=0,u=!0;r;)i[a]=r,r.isBuf||(u=!1),r=r.next,a+=1;i.allBuffers=u,T(e,t,!0,t.length,i,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new o(t),t.bufferedRequestCount=0}else{for(;r;){var c=r.chunk,l=r.encoding,h=r.callback;if(T(e,t,!1,t.objectMode?1:c.length,c,l,h),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function O(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function P(e,t){e._final((function(r){t.pendingcb--,r&&S(e,r),t.prefinished=!0,e.emit("prefinish"),I(e,t)}))}function I(e,t){var r=O(t);if(r&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,i.nextTick(P,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var n=e._readableState;(!n||n.autoDestroy&&n.endEmitted)&&e.destroy()}return r}r(3730)(R,u),x.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(x.prototype,"buffer",{get:a.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(s=Function.prototype[Symbol.hasInstance],Object.defineProperty(R,Symbol.hasInstance,{value:function(e){return!!s.call(this,e)||this===R&&e&&e._writableState instanceof x}})):s=function(e){return e instanceof this},R.prototype.pipe=function(){S(this,new y)},R.prototype.write=function(e,t,r){var n,o=this._writableState,s=!1,a=!o.objectMode&&(n=e,c.isBuffer(n)||n instanceof l);return a&&!c.isBuffer(e)&&(e=function(e){return c.from(e)}(e)),"function"==typeof t&&(r=t,t=null),a?t="buffer":t||(t=o.defaultEncoding),"function"!=typeof r&&(r=E),o.ending?function(e,t){var r=new w;S(e,r),i.nextTick(t,r)}(this,r):(a||function(e,t,r,n){var o;return null===r?o=new v:"string"==typeof r||t.objectMode||(o=new p("chunk",["string","Buffer"],r)),!o||(S(e,o),i.nextTick(n,o),!1)}(this,o,e,r))&&(o.pendingcb++,s=function(e,t,r,n,i,o){if(!r){var s=function(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=c.from(t,r)),t}(t,n,i);n!==s&&(r=!0,i="buffer",n=s)}var a=t.objectMode?1:n.length;t.length+=a;var u=t.length<t.highWaterMark;if(u||(t.needDrain=!0),t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else T(e,t,!1,a,n,i,o);return u}(this,o,a,e,t,r)),s},R.prototype.cork=function(){this._writableState.corked++},R.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||k(this,e))},R.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new _(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(R.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(R.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),R.prototype._write=function(e,t,r){r(new m("_write()"))},R.prototype._writev=null,R.prototype.end=function(e,t,r){var n=this._writableState;return"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||function(e,t,r){t.ending=!0,I(e,t),r&&(t.finished?i.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}(this,n,r),this},Object.defineProperty(R.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(R.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),R.prototype.destroy=h.destroy,R.prototype._undestroy=h.undestroy,R.prototype._destroy=function(e,t){t(e)}},8187:(e,t,r)=>{"use strict";var n,i=r(2695);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=r(2426),a=Symbol("lastResolve"),u=Symbol("lastReject"),c=Symbol("error"),l=Symbol("ended"),h=Symbol("lastPromise"),f=Symbol("handlePromise"),d=Symbol("stream");function p(e,t){return{value:e,done:t}}function m(e){var t=e[a];if(null!==t){var r=e[d].read();null!==r&&(e[h]=null,e[a]=null,e[u]=null,t(p(r,!1)))}}function g(e){i.nextTick(m,e)}var y=Object.getPrototypeOf((function(){})),b=Object.setPrototypeOf((o(n={get stream(){return this[d]},next:function(){var e=this,t=this[c];if(null!==t)return Promise.reject(t);if(this[l])return Promise.resolve(p(void 0,!0));if(this[d].destroyed)return new Promise((function(t,r){i.nextTick((function(){e[c]?r(e[c]):t(p(void 0,!0))}))}));var r,n=this[h];if(n)r=new Promise(function(e,t){return function(r,n){e.then((function(){t[l]?r(p(void 0,!0)):t[f](r,n)}),n)}}(n,this));else{var o=this[d].read();if(null!==o)return Promise.resolve(p(o,!1));r=new Promise(this[f])}return this[h]=r,r}},Symbol.asyncIterator,(function(){return this})),o(n,"return",(function(){var e=this;return new Promise((function(t,r){e[d].destroy(null,(function(e){e?r(e):t(p(void 0,!0))}))}))})),n),y);e.exports=function(e){var t,r=Object.create(b,(o(t={},d,{value:e,writable:!0}),o(t,a,{value:null,writable:!0}),o(t,u,{value:null,writable:!0}),o(t,c,{value:null,writable:!0}),o(t,l,{value:e._readableState.endEmitted,writable:!0}),o(t,f,{value:function(e,t){var n=r[d].read();n?(r[h]=null,r[a]=null,r[u]=null,e(p(n,!1))):(r[a]=e,r[u]=t)},writable:!0}),t));return r[h]=null,s(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[u];return null!==t&&(r[h]=null,r[a]=null,r[u]=null,t(e)),void(r[c]=e)}var n=r[a];null!==n&&(r[h]=null,r[a]=null,r[u]=null,n(p(void 0,!0))),r[l]=!0})),e.on("readable",g.bind(null,r)),r}},4506:(e,t,r)=>{"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=r(7866).Buffer,a=r(462).inspect,u=a&&a.custom||"inspect";e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,r;return t=e,(r=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return s.alloc(0);for(var t,r,n,i=s.allocUnsafe(e>>>0),o=this.head,a=0;o;)t=o.data,r=i,n=a,s.prototype.copy.call(t,r,n),a+=o.data.length,o=o.next;return i}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,n=t.data;for(e-=n.length;t=t.next;){var i=t.data,o=e>i.length?i.length:e;if(o===i.length?n+=i:n+=i.slice(0,e),0==(e-=o)){o===i.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(o));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(e){var t=s.allocUnsafe(e),r=this.head,n=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var i=r.data,o=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,o),0==(e-=o)){o===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=i.slice(o));break}++n}return this.length-=n,t}},{key:u,value:function(e,t){return a(this,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t,{depth:0,customInspect:!1}))}}])&&o(t.prototype,r),e}()},3390:(e,t,r)=>{"use strict";var n=r(2695);function i(e,t){s(e,t),o(e)}function o(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function s(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var r=this,a=this._readableState&&this._readableState.destroyed,u=this._writableState&&this._writableState.destroyed;return a||u?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,n.nextTick(s,this,e)):n.nextTick(s,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?r._writableState?r._writableState.errorEmitted?n.nextTick(o,r):(r._writableState.errorEmitted=!0,n.nextTick(i,r,e)):n.nextTick(i,r,e):t?(n.nextTick(o,r),t(e)):n.nextTick(o,r)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}}},2426:(e,t,r)=>{"use strict";var n=r(553).q.ERR_STREAM_PREMATURE_CLOSE;function i(){}e.exports=function e(t,r,o){if("function"==typeof r)return e(t,null,r);r||(r={}),o=function(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];e.apply(this,n)}}}(o||i);var s=r.readable||!1!==r.readable&&t.readable,a=r.writable||!1!==r.writable&&t.writable,u=function(){t.writable||l()},c=t._writableState&&t._writableState.finished,l=function(){a=!1,c=!0,s||o.call(t)},h=t._readableState&&t._readableState.endEmitted,f=function(){s=!1,h=!0,a||o.call(t)},d=function(e){o.call(t,e)},p=function(){var e;return s&&!h?(t._readableState&&t._readableState.ended||(e=new n),o.call(t,e)):a&&!c?(t._writableState&&t._writableState.ended||(e=new n),o.call(t,e)):void 0},m=function(){t.req.on("finish",l)};return function(e){return e.setHeader&&"function"==typeof e.abort}(t)?(t.on("complete",l),t.on("abort",p),t.req?m():t.on("request",m)):a&&!t._writableState&&(t.on("end",u),t.on("close",u)),t.on("end",f),t.on("finish",l),!1!==r.error&&t.on("error",d),t.on("close",p),function(){t.removeListener("complete",l),t.removeListener("abort",p),t.removeListener("request",m),t.req&&t.req.removeListener("finish",l),t.removeListener("end",u),t.removeListener("close",u),t.removeListener("finish",l),t.removeListener("end",f),t.removeListener("error",d),t.removeListener("close",p)}}},3733:e=>{e.exports=function(){throw new Error("Readable.from is not available in the browser")}},2970:(e,t,r)=>{"use strict";var n,i=r(553).q,o=i.ERR_MISSING_ARGS,s=i.ERR_STREAM_DESTROYED;function a(e){if(e)throw e}function u(e,t,i,o){o=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(o);var a=!1;e.on("close",(function(){a=!0})),void 0===n&&(n=r(2426)),n(e,{readable:t,writable:i},(function(e){if(e)return o(e);a=!0,o()}));var u=!1;return function(t){if(!a&&!u)return u=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void o(t||new s("pipe"))}}function c(e){e()}function l(e,t){return e.pipe(t)}function h(e){return e.length?"function"!=typeof e[e.length-1]?a:e.pop():a}e.exports=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,i=h(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new o("streams");var s=t.map((function(e,r){var o=r<t.length-1;return u(e,o,r>0,(function(e){n||(n=e),e&&s.forEach(c),o||(s.forEach(c),i(n))}))}));return t.reduce(l)}},1111:(e,t,r)=>{"use strict";var n=r(553).q.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,r,i){var o=function(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}(t,i,r);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new n(i?r:"highWaterMark",o);return Math.floor(o)}return e.objectMode?16:16384}}},8208:(e,t,r)=>{e.exports=r(488).EventEmitter},9685:(e,t,r)=>{var n=r(7866),i=n.Buffer;function o(e,t){for(var r in e)t[r]=e[r]}function s(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(o(n,t),t.Buffer=s),s.prototype=Object.create(i.prototype),o(i,s),s.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,r)},s.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},8981:(e,t,r)=>{e.exports=i;var n=r(488).EventEmitter;function i(){n.call(this)}r(3730)(i,n),i.Readable=r(5006),i.Writable=r(8719),i.Duplex=r(673),i.Transform=r(8597),i.PassThrough=r(4343),i.finished=r(2426),i.pipeline=r(2970),i.Stream=i,i.prototype.pipe=function(e,t){var r=this;function i(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause()}function o(){r.readable&&r.resume&&r.resume()}r.on("data",i),e.on("drain",o),e._isStdio||t&&!1===t.end||(r.on("end",a),r.on("close",u));var s=!1;function a(){s||(s=!0,e.end())}function u(){s||(s=!0,"function"==typeof e.destroy&&e.destroy())}function c(e){if(l(),0===n.listenerCount(this,"error"))throw e}function l(){r.removeListener("data",i),e.removeListener("drain",o),r.removeListener("end",a),r.removeListener("close",u),r.removeListener("error",c),e.removeListener("error",c),r.removeListener("end",l),r.removeListener("close",l),e.removeListener("close",l)}return r.on("error",c),e.on("error",c),r.on("end",l),r.on("close",l),e.on("close",l),e.emit("pipe",r),e}},7361:(e,t,r)=>{"use strict";var n=r(9685).Buffer,i=n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(n.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=u,this.end=c,t=4;break;case"utf8":this.fillLast=a,t=4;break;case"base64":this.text=l,this.end=h,t=3;break;default:return this.write=f,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function a(e){var t=this.lastTotal-this.lastNeed,r=function(e,t,r){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function u(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function c(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function l(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function h(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function f(e){return e.toString(this.encoding)}function d(e){return e&&e.length?this.write(e):""}t.s=o,o.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},o.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var i=s(t[n]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--n<r||-2===i?0:(i=s(t[n]))>=0?(i>0&&(e.lastNeed=i-2),i):--n<r||-2===i?0:(i=s(t[n]))>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},2993:(e,t)=>{"use strict";var r=function(){function e(){this._state=new Int32Array(4),this._buffer=new ArrayBuffer(68),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}return e.hashStr=function(e,t){return void 0===t&&(t=!1),this.onePassHasher.start().appendStr(e).end(t)},e.hashAsciiStr=function(e,t){return void 0===t&&(t=!1),this.onePassHasher.start().appendAsciiStr(e).end(t)},e._hex=function(t){var r,n,i,o,s=e.hexChars,a=e.hexOut;for(o=0;o<4;o+=1)for(n=8*o,r=t[o],i=0;i<8;i+=2)a[n+1+i]=s.charAt(15&r),r>>>=4,a[n+0+i]=s.charAt(15&r),r>>>=4;return a.join("")},e._md5cycle=function(e,t){var r=e[0],n=e[1],i=e[2],o=e[3];n=((n+=((i=((i+=((o=((o+=((r=((r+=(n&i|~n&o)+t[0]-680876936|0)<<7|r>>>25)+n|0)&n|~r&i)+t[1]-389564586|0)<<12|o>>>20)+r|0)&r|~o&n)+t[2]+606105819|0)<<17|i>>>15)+o|0)&o|~i&r)+t[3]-1044525330|0)<<22|n>>>10)+i|0,n=((n+=((i=((i+=((o=((o+=((r=((r+=(n&i|~n&o)+t[4]-176418897|0)<<7|r>>>25)+n|0)&n|~r&i)+t[5]+1200080426|0)<<12|o>>>20)+r|0)&r|~o&n)+t[6]-1473231341|0)<<17|i>>>15)+o|0)&o|~i&r)+t[7]-45705983|0)<<22|n>>>10)+i|0,n=((n+=((i=((i+=((o=((o+=((r=((r+=(n&i|~n&o)+t[8]+1770035416|0)<<7|r>>>25)+n|0)&n|~r&i)+t[9]-1958414417|0)<<12|o>>>20)+r|0)&r|~o&n)+t[10]-42063|0)<<17|i>>>15)+o|0)&o|~i&r)+t[11]-1990404162|0)<<22|n>>>10)+i|0,n=((n+=((i=((i+=((o=((o+=((r=((r+=(n&i|~n&o)+t[12]+1804603682|0)<<7|r>>>25)+n|0)&n|~r&i)+t[13]-40341101|0)<<12|o>>>20)+r|0)&r|~o&n)+t[14]-1502002290|0)<<17|i>>>15)+o|0)&o|~i&r)+t[15]+1236535329|0)<<22|n>>>10)+i|0,n=((n+=((i=((i+=((o=((o+=((r=((r+=(n&o|i&~o)+t[1]-165796510|0)<<5|r>>>27)+n|0)&i|n&~i)+t[6]-1069501632|0)<<9|o>>>23)+r|0)&n|r&~n)+t[11]+643717713|0)<<14|i>>>18)+o|0)&r|o&~r)+t[0]-373897302|0)<<20|n>>>12)+i|0,n=((n+=((i=((i+=((o=((o+=((r=((r+=(n&o|i&~o)+t[5]-701558691|0)<<5|r>>>27)+n|0)&i|n&~i)+t[10]+38016083|0)<<9|o>>>23)+r|0)&n|r&~n)+t[15]-660478335|0)<<14|i>>>18)+o|0)&r|o&~r)+t[4]-405537848|0)<<20|n>>>12)+i|0,n=((n+=((i=((i+=((o=((o+=((r=((r+=(n&o|i&~o)+t[9]+568446438|0)<<5|r>>>27)+n|0)&i|n&~i)+t[14]-1019803690|0)<<9|o>>>23)+r|0)&n|r&~n)+t[3]-187363961|0)<<14|i>>>18)+o|0)&r|o&~r)+t[8]+1163531501|0)<<20|n>>>12)+i|0,n=((n+=((i=((i+=((o=((o+=((r=((r+=(n&o|i&~o)+t[13]-1444681467|0)<<5|r>>>27)+n|0)&i|n&~i)+t[2]-51403784|0)<<9|o>>>23)+r|0)&n|r&~n)+t[7]+1735328473|0)<<14|i>>>18)+o|0)&r|o&~r)+t[12]-1926607734|0)<<20|n>>>12)+i|0,n=((n+=((i=((i+=((o=((o+=((r=((r+=(n^i^o)+t[5]-378558|0)<<4|r>>>28)+n|0)^n^i)+t[8]-2022574463|0)<<11|o>>>21)+r|0)^r^n)+t[11]+1839030562|0)<<16|i>>>16)+o|0)^o^r)+t[14]-35309556|0)<<23|n>>>9)+i|0,n=((n+=((i=((i+=((o=((o+=((r=((r+=(n^i^o)+t[1]-1530992060|0)<<4|r>>>28)+n|0)^n^i)+t[4]+1272893353|0)<<11|o>>>21)+r|0)^r^n)+t[7]-155497632|0)<<16|i>>>16)+o|0)^o^r)+t[10]-1094730640|0)<<23|n>>>9)+i|0,n=((n+=((i=((i+=((o=((o+=((r=((r+=(n^i^o)+t[13]+681279174|0)<<4|r>>>28)+n|0)^n^i)+t[0]-358537222|0)<<11|o>>>21)+r|0)^r^n)+t[3]-722521979|0)<<16|i>>>16)+o|0)^o^r)+t[6]+76029189|0)<<23|n>>>9)+i|0,n=((n+=((i=((i+=((o=((o+=((r=((r+=(n^i^o)+t[9]-640364487|0)<<4|r>>>28)+n|0)^n^i)+t[12]-421815835|0)<<11|o>>>21)+r|0)^r^n)+t[15]+530742520|0)<<16|i>>>16)+o|0)^o^r)+t[2]-995338651|0)<<23|n>>>9)+i|0,n=((n+=((o=((o+=(n^((r=((r+=(i^(n|~o))+t[0]-198630844|0)<<6|r>>>26)+n|0)|~i))+t[7]+1126891415|0)<<10|o>>>22)+r|0)^((i=((i+=(r^(o|~n))+t[14]-1416354905|0)<<15|i>>>17)+o|0)|~r))+t[5]-57434055|0)<<21|n>>>11)+i|0,n=((n+=((o=((o+=(n^((r=((r+=(i^(n|~o))+t[12]+1700485571|0)<<6|r>>>26)+n|0)|~i))+t[3]-1894986606|0)<<10|o>>>22)+r|0)^((i=((i+=(r^(o|~n))+t[10]-1051523|0)<<15|i>>>17)+o|0)|~r))+t[1]-2054922799|0)<<21|n>>>11)+i|0,n=((n+=((o=((o+=(n^((r=((r+=(i^(n|~o))+t[8]+1873313359|0)<<6|r>>>26)+n|0)|~i))+t[15]-30611744|0)<<10|o>>>22)+r|0)^((i=((i+=(r^(o|~n))+t[6]-1560198380|0)<<15|i>>>17)+o|0)|~r))+t[13]+1309151649|0)<<21|n>>>11)+i|0,n=((n+=((o=((o+=(n^((r=((r+=(i^(n|~o))+t[4]-145523070|0)<<6|r>>>26)+n|0)|~i))+t[11]-1120210379|0)<<10|o>>>22)+r|0)^((i=((i+=(r^(o|~n))+t[2]+718787259|0)<<15|i>>>17)+o|0)|~r))+t[9]-343485551|0)<<21|n>>>11)+i|0,e[0]=r+e[0]|0,e[1]=n+e[1]|0,e[2]=i+e[2]|0,e[3]=o+e[3]|0},e.prototype.start=function(){return this._dataLength=0,this._bufferLength=0,this._state.set(e.stateIdentity),this},e.prototype.appendStr=function(t){var r,n,i=this._buffer8,o=this._buffer32,s=this._bufferLength;for(n=0;n<t.length;n+=1){if((r=t.charCodeAt(n))<128)i[s++]=r;else if(r<2048)i[s++]=192+(r>>>6),i[s++]=63&r|128;else if(r<55296||r>56319)i[s++]=224+(r>>>12),i[s++]=r>>>6&63|128,i[s++]=63&r|128;else{if((r=1024*(r-55296)+(t.charCodeAt(++n)-56320)+65536)>1114111)throw new Error("Unicode standard supports code points up to U+10FFFF");i[s++]=240+(r>>>18),i[s++]=r>>>12&63|128,i[s++]=r>>>6&63|128,i[s++]=63&r|128}s>=64&&(this._dataLength+=64,e._md5cycle(this._state,o),s-=64,o[0]=o[16])}return this._bufferLength=s,this},e.prototype.appendAsciiStr=function(t){for(var r,n=this._buffer8,i=this._buffer32,o=this._bufferLength,s=0;;){for(r=Math.min(t.length-s,64-o);r--;)n[o++]=t.charCodeAt(s++);if(o<64)break;this._dataLength+=64,e._md5cycle(this._state,i),o=0}return this._bufferLength=o,this},e.prototype.appendByteArray=function(t){for(var r,n=this._buffer8,i=this._buffer32,o=this._bufferLength,s=0;;){for(r=Math.min(t.length-s,64-o);r--;)n[o++]=t[s++];if(o<64)break;this._dataLength+=64,e._md5cycle(this._state,i),o=0}return this._bufferLength=o,this},e.prototype.getState=function(){var e=this,t=e._state;return{buffer:String.fromCharCode.apply(null,e._buffer8),buflen:e._bufferLength,length:e._dataLength,state:[t[0],t[1],t[2],t[3]]}},e.prototype.setState=function(e){var t,r=e.buffer,n=e.state,i=this._state;for(this._dataLength=e.length,this._bufferLength=e.buflen,i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3],t=0;t<r.length;t+=1)this._buffer8[t]=r.charCodeAt(t)},e.prototype.end=function(t){void 0===t&&(t=!1);var r,n=this._bufferLength,i=this._buffer8,o=this._buffer32,s=1+(n>>2);if(this._dataLength+=n,i[n]=128,i[n+1]=i[n+2]=i[n+3]=0,o.set(e.buffer32Identity.subarray(s),s),n>55&&(e._md5cycle(this._state,o),o.set(e.buffer32Identity)),(r=8*this._dataLength)<=4294967295)o[14]=r;else{var a=r.toString(16).match(/(.*?)(.{0,8})$/);if(null===a)return;var u=parseInt(a[2],16),c=parseInt(a[1],16)||0;o[14]=u,o[15]=c}return e._md5cycle(this._state,o),t?this._state:e._hex(this._state)},e.stateIdentity=new Int32Array([1732584193,-271733879,-1732584194,271733878]),e.buffer32Identity=new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),e.hexChars="0123456789abcdef",e.hexOut=[],e.onePassHasher=new e,e}();t.V=r,"5d41402abc4b2a76b9719d911017c592"!==r.hashStr("hello")&&console.error("Md5 self test failed.")},72:(e,t,r)=>{function n(e){try{if(!r.g.localStorage)return!1}catch(e){return!1}var t=r.g.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}e.exports=function(e,t){if(n("noDeprecation"))return e;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}}},769:e=>{e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},8143:(e,t,r)=>{var n=r(6944);e.exports=function(e){if(!n(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},9611:(e,t,r)=>{var n=r(3706),i=r(2361),o=r(3376),s=n("unscopables"),a=Array.prototype;null==a[s]&&o.f(a,s,{configurable:!0,value:i(null)}),e.exports=function(e){a[s][e]=!0}},2482:e=>{e.exports=function(e,t,r){if(!(e instanceof t))throw TypeError("Incorrect "+(r?r+" ":"")+"invocation");return e}},47:(e,t,r)=>{var n=r(6944);e.exports=function(e){if(!n(e))throw TypeError(String(e)+" is not an object");return e}},1774:(e,t,r)=>{"use strict";var n=r(4833),i=r(4680),o=r(3960),s=r(1008),a=r(4954),u=r(2076),c=r(3126);e.exports=function(e){var t,r,l,h,f,d,p=i(e),m="function"==typeof this?this:Array,g=arguments.length,y=g>1?arguments[1]:void 0,b=void 0!==y,v=c(p),w=0;if(b&&(y=n(y,g>2?arguments[2]:void 0,2)),null==v||m==Array&&s(v))for(r=new m(t=a(p.length));t>w;w++)d=b?y(p[w],w):p[w],u(r,w,d);else for(f=(h=v.call(p)).next,r=new m;!(l=f.call(h)).done;w++)d=b?o(h,y,[l.value,w],!0):l.value,u(r,w,d);return r.length=w,r}},1270:(e,t,r)=>{var n=r(8852),i=r(4954),o=r(2145),s=function(e){return function(t,r,s){var a,u=n(t),c=i(u.length),l=o(s,c);if(e&&r!=r){for(;c>l;)if((a=u[l++])!=a)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===r)return e||l||0;return!e&&-1}};e.exports={includes:s(!0),indexOf:s(!1)}},3960:(e,t,r)=>{var n=r(47),i=r(2608);e.exports=function(e,t,r,o){try{return o?t(n(r)[0],r[1]):t(r)}catch(t){throw i(e),t}}},3565:e=>{var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},8753:(e,t,r)=>{var n=r(939),i=r(3565),o=r(3706)("toStringTag"),s="Arguments"==i(function(){return arguments}());e.exports=n?i:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),o))?r:s?i(t):"Object"==(n=i(t))&&"function"==typeof t.callee?"Arguments":n}},7918:(e,t,r)=>{var n=r(5884),i=r(8204),o=r(7825),s=r(3376);e.exports=function(e,t){for(var r=i(t),a=s.f,u=o.f,c=0;c<r.length;c++){var l=r[c];n(e,l)||a(e,l,u(t,l))}}},9241:(e,t,r)=>{var n=r(7841);e.exports=!n((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},9670:(e,t,r)=>{"use strict";var n=r(888).IteratorPrototype,i=r(2361),o=r(976),s=r(9400),a=r(873),u=function(){return this};e.exports=function(e,t,r){var c=t+" Iterator";return e.prototype=i(n,{next:o(1,r)}),s(e,c,!1,!0),a[c]=u,e}},4791:(e,t,r)=>{var n=r(5542),i=r(3376),o=r(976);e.exports=n?function(e,t,r){return i.f(e,t,o(1,r))}:function(e,t,r){return e[t]=r,e}},976:e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},2076:(e,t,r)=>{"use strict";var n=r(2694),i=r(3376),o=r(976);e.exports=function(e,t,r){var s=n(t);s in e?i.f(e,s,o(0,r)):e[s]=r}},3131:(e,t,r)=>{"use strict";var n=r(1082),i=r(9670),o=r(8186),s=r(2686),a=r(9400),u=r(4791),c=r(1249),l=r(3706),h=r(6852),f=r(873),d=r(888),p=d.IteratorPrototype,m=d.BUGGY_SAFARI_ITERATORS,g=l("iterator"),y="keys",b="values",v="entries",w=function(){return this};e.exports=function(e,t,r,l,d,_,S){i(r,t,l);var E,x,R,T=function(e){if(e===d&&I)return I;if(!m&&e in O)return O[e];switch(e){case y:case b:case v:return function(){return new r(this,e)}}return function(){return new r(this)}},C=t+" Iterator",k=!1,O=e.prototype,P=O[g]||O["@@iterator"]||d&&O[d],I=!m&&P||T(d),L="Array"==t&&O.entries||P;if(L&&(E=o(L.call(new e)),p!==Object.prototype&&E.next&&(h||o(E)===p||(s?s(E,p):"function"!=typeof E[g]&&u(E,g,w)),a(E,C,!0,!0),h&&(f[C]=w))),d==b&&P&&P.name!==b&&(k=!0,I=function(){return P.call(this)}),h&&!S||O[g]===I||u(O,g,I),f[t]=I,d)if(x={values:T(b),keys:_?I:T(y),entries:T(v)},S)for(R in x)(m||k||!(R in O))&&c(O,R,x[R]);else n({target:t,proto:!0,forced:m||k},x);return x}},5542:(e,t,r)=>{var n=r(7841);e.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},3879:(e,t,r)=>{var n=r(6874),i=r(6944),o=n.document,s=i(o)&&i(o.createElement);e.exports=function(e){return s?o.createElement(e):{}}},4229:(e,t,r)=>{var n=r(4578);e.exports=n("navigator","userAgent")||""},579:(e,t,r)=>{var n,i,o=r(6874),s=r(4229),a=o.process,u=o.Deno,c=a&&a.versions||u&&u.version,l=c&&c.v8;l?i=(n=l.split("."))[0]<4?1:n[0]+n[1]:s&&(!(n=s.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=s.match(/Chrome\/(\d+)/))&&(i=n[1]),e.exports=i&&+i},9752:e=>{e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},1082:(e,t,r)=>{var n=r(6874),i=r(7825).f,o=r(4791),s=r(1249),a=r(1278),u=r(7918),c=r(2350);e.exports=function(e,t){var r,l,h,f,d,p=e.target,m=e.global,g=e.stat;if(r=m?n:g?n[p]||a(p,{}):(n[p]||{}).prototype)for(l in t){if(f=t[l],h=e.noTargetGet?(d=i(r,l))&&d.value:r[l],!c(m?l:p+(g?".":"#")+l,e.forced)&&void 0!==h){if(typeof f==typeof h)continue;u(f,h)}(e.sham||h&&h.sham)&&o(f,"sham",!0),s(r,l,f,e)}}},7841:e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},4833:(e,t,r)=>{var n=r(769);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 0:return function(){return e.call(t)};case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}}},4578:(e,t,r)=>{var n=r(6874),i=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?i(n[e]):n[e]&&n[e][t]}},3126:(e,t,r)=>{var n=r(8753),i=r(873),o=r(3706)("iterator");e.exports=function(e){if(null!=e)return e[o]||e["@@iterator"]||i[n(e)]}},7053:(e,t,r)=>{var n=r(47),i=r(3126);e.exports=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return n(t.call(e))}},6874:(e,t,r)=>{var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof r.g&&r.g)||function(){return this}()||Function("return this")()},5884:(e,t,r)=>{var n=r(4680),i={}.hasOwnProperty;e.exports=Object.hasOwn||function(e,t){return i.call(n(e),t)}},5644:e=>{e.exports={}},7666:(e,t,r)=>{var n=r(4578);e.exports=n("document","documentElement")},6056:(e,t,r)=>{var n=r(5542),i=r(7841),o=r(3879);e.exports=!n&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},8517:(e,t,r)=>{var n=r(7841),i=r(3565),o="".split;e.exports=n((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==i(e)?o.call(e,""):Object(e)}:Object},6090:(e,t,r)=>{var n=r(4925),i=Function.toString;"function"!=typeof n.inspectSource&&(n.inspectSource=function(e){return i.call(e)}),e.exports=n.inspectSource},6619:(e,t,r)=>{var n,i,o,s=r(9957),a=r(6874),u=r(6944),c=r(4791),l=r(5884),h=r(4925),f=r(8698),d=r(5644),p="Object already initialized",m=a.WeakMap;if(s||h.state){var g=h.state||(h.state=new m),y=g.get,b=g.has,v=g.set;n=function(e,t){if(b.call(g,e))throw new TypeError(p);return t.facade=e,v.call(g,e,t),t},i=function(e){return y.call(g,e)||{}},o=function(e){return b.call(g,e)}}else{var w=f("state");d[w]=!0,n=function(e,t){if(l(e,w))throw new TypeError(p);return t.facade=e,c(e,w,t),t},i=function(e){return l(e,w)?e[w]:{}},o=function(e){return l(e,w)}}e.exports={set:n,get:i,has:o,enforce:function(e){return o(e)?i(e):n(e,{})},getterFor:function(e){return function(t){var r;if(!u(t)||(r=i(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return r}}}},1008:(e,t,r)=>{var n=r(3706),i=r(873),o=n("iterator"),s=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||s[o]===e)}},2350:(e,t,r)=>{var n=r(7841),i=/#|\.prototype\./,o=function(e,t){var r=a[s(e)];return r==c||r!=u&&("function"==typeof t?n(t):!!t)},s=o.normalize=function(e){return String(e).replace(i,".").toLowerCase()},a=o.data={},u=o.NATIVE="N",c=o.POLYFILL="P";e.exports=o},6944:e=>{e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},6852:e=>{e.exports=!1},8377:(e,t,r)=>{var n=r(4578),i=r(4587);e.exports=i?function(e){return"symbol"==typeof e}:function(e){var t=n("Symbol");return"function"==typeof t&&Object(e)instanceof t}},2608:(e,t,r)=>{var n=r(47);e.exports=function(e){var t=e.return;if(void 0!==t)return n(t.call(e)).value}},888:(e,t,r)=>{"use strict";var n,i,o,s=r(7841),a=r(8186),u=r(4791),c=r(5884),l=r(3706),h=r(6852),f=l("iterator"),d=!1;[].keys&&("next"in(o=[].keys())?(i=a(a(o)))!==Object.prototype&&(n=i):d=!0);var p=null==n||s((function(){var e={};return n[f].call(e)!==e}));p&&(n={}),h&&!p||c(n,f)||u(n,f,(function(){return this})),e.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:d}},873:e=>{e.exports={}},1453:(e,t,r)=>{var n=r(579),i=r(7841);e.exports=!!Object.getOwnPropertySymbols&&!i((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&n&&n<41}))},1781:(e,t,r)=>{var n=r(7841),i=r(3706),o=r(6852),s=i("iterator");e.exports=!n((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,r="";return e.pathname="c%20d",t.forEach((function(e,n){t.delete("b"),r+=n+e})),o&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[s]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==r||"x"!==new URL("http://x",void 0).host}))},9957:(e,t,r)=>{var n=r(6874),i=r(6090),o=n.WeakMap;e.exports="function"==typeof o&&/native code/.test(i(o))},5277:(e,t,r)=>{"use strict";var n=r(5542),i=r(7841),o=r(965),s=r(1913),a=r(3626),u=r(4680),c=r(8517),l=Object.assign,h=Object.defineProperty;e.exports=!l||i((function(){if(n&&1!==l({b:1},l(h({},"a",{enumerable:!0,get:function(){h(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},r=Symbol(),i="abcdefghijklmnopqrst";return e[r]=7,i.split("").forEach((function(e){t[e]=e})),7!=l({},e)[r]||o(l({},t)).join("")!=i}))?function(e,t){for(var r=u(e),i=arguments.length,l=1,h=s.f,f=a.f;i>l;)for(var d,p=c(arguments[l++]),m=h?o(p).concat(h(p)):o(p),g=m.length,y=0;g>y;)d=m[y++],n&&!f.call(p,d)||(r[d]=p[d]);return r}:l},2361:(e,t,r)=>{var n,i=r(47),o=r(7852),s=r(9752),a=r(5644),u=r(7666),c=r(3879),l=r(8698)("IE_PROTO"),h=function(){},f=function(e){return"<script>"+e+"<\/script>"},d=function(e){e.write(f("")),e.close();var t=e.parentWindow.Object;return e=null,t},p=function(){try{n=new ActiveXObject("htmlfile")}catch(e){}var e,t;p="undefined"!=typeof document?document.domain&&n?d(n):((t=c("iframe")).style.display="none",u.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(f("document.F=Object")),e.close(),e.F):d(n);for(var r=s.length;r--;)delete p.prototype[s[r]];return p()};a[l]=!0,e.exports=Object.create||function(e,t){var r;return null!==e?(h.prototype=i(e),r=new h,h.prototype=null,r[l]=e):r=p(),void 0===t?r:o(r,t)}},7852:(e,t,r)=>{var n=r(5542),i=r(3376),o=r(47),s=r(965);e.exports=n?Object.defineProperties:function(e,t){o(e);for(var r,n=s(t),a=n.length,u=0;a>u;)i.f(e,r=n[u++],t[r]);return e}},3376:(e,t,r)=>{var n=r(5542),i=r(6056),o=r(47),s=r(2694),a=Object.defineProperty;t.f=n?a:function(e,t,r){if(o(e),t=s(t),o(r),i)try{return a(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},7825:(e,t,r)=>{var n=r(5542),i=r(3626),o=r(976),s=r(8852),a=r(2694),u=r(5884),c=r(6056),l=Object.getOwnPropertyDescriptor;t.f=n?l:function(e,t){if(e=s(e),t=a(t),c)try{return l(e,t)}catch(e){}if(u(e,t))return o(!i.f.call(e,t),e[t])}},8401:(e,t,r)=>{var n=r(8104),i=r(9752).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},1913:(e,t)=>{t.f=Object.getOwnPropertySymbols},8186:(e,t,r)=>{var n=r(5884),i=r(4680),o=r(8698),s=r(9241),a=o("IE_PROTO"),u=Object.prototype;e.exports=s?Object.getPrototypeOf:function(e){return e=i(e),n(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?u:null}},8104:(e,t,r)=>{var n=r(5884),i=r(8852),o=r(1270).indexOf,s=r(5644);e.exports=function(e,t){var r,a=i(e),u=0,c=[];for(r in a)!n(s,r)&&n(a,r)&&c.push(r);for(;t.length>u;)n(a,r=t[u++])&&(~o(c,r)||c.push(r));return c}},965:(e,t,r)=>{var n=r(8104),i=r(9752);e.exports=Object.keys||function(e){return n(e,i)}},3626:(e,t)=>{"use strict";var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,i=n&&!r.call({1:2},1);t.f=i?function(e){var t=n(this,e);return!!t&&t.enumerable}:r},2686:(e,t,r)=>{var n=r(47),i=r(8143);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(r,[]),t=r instanceof Array}catch(e){}return function(r,o){return n(r),i(o),t?e.call(r,o):r.__proto__=o,r}}():void 0)},2392:(e,t,r)=>{var n=r(6944);e.exports=function(e,t){var r,i;if("string"===t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;if("function"==typeof(r=e.valueOf)&&!n(i=r.call(e)))return i;if("string"!==t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},8204:(e,t,r)=>{var n=r(4578),i=r(8401),o=r(1913),s=r(47);e.exports=n("Reflect","ownKeys")||function(e){var t=i.f(s(e)),r=o.f;return r?t.concat(r(e)):t}},7490:(e,t,r)=>{var n=r(1249);e.exports=function(e,t,r){for(var i in t)n(e,i,t[i],r);return e}},1249:(e,t,r)=>{var n=r(6874),i=r(4791),o=r(5884),s=r(1278),a=r(6090),u=r(6619),c=u.get,l=u.enforce,h=String(String).split("String");(e.exports=function(e,t,r,a){var u,c=!!a&&!!a.unsafe,f=!!a&&!!a.enumerable,d=!!a&&!!a.noTargetGet;"function"==typeof r&&("string"!=typeof t||o(r,"name")||i(r,"name",t),(u=l(r)).source||(u.source=h.join("string"==typeof t?t:""))),e!==n?(c?!d&&e[t]&&(f=!0):delete e[t],f?e[t]=r:i(e,t,r)):f?e[t]=r:s(t,r)})(Function.prototype,"toString",(function(){return"function"==typeof this&&c(this).source||a(this)}))},164:e=>{e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},1278:(e,t,r)=>{var n=r(6874);e.exports=function(e,t){try{Object.defineProperty(n,e,{value:t,configurable:!0,writable:!0})}catch(r){n[e]=t}return t}},9400:(e,t,r)=>{var n=r(3376).f,i=r(5884),o=r(3706)("toStringTag");e.exports=function(e,t,r){e&&!i(e=r?e:e.prototype,o)&&n(e,o,{configurable:!0,value:t})}},8698:(e,t,r)=>{var n=r(3215),i=r(8435),o=n("keys");e.exports=function(e){return o[e]||(o[e]=i(e))}},4925:(e,t,r)=>{var n=r(6874),i=r(1278),o="__core-js_shared__",s=n[o]||i(o,{});e.exports=s},3215:(e,t,r)=>{var n=r(6852),i=r(4925);(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.16.2",mode:n?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},6174:(e,t,r)=>{var n=r(7896),i=r(401),o=r(164),s=function(e){return function(t,r){var s,a,u=i(o(t)),c=n(r),l=u.length;return c<0||c>=l?e?"":void 0:(s=u.charCodeAt(c))<55296||s>56319||c+1===l||(a=u.charCodeAt(c+1))<56320||a>57343?e?u.charAt(c):s:e?u.slice(c,c+2):a-56320+(s-55296<<10)+65536}};e.exports={codeAt:s(!1),charAt:s(!0)}},8:e=>{"use strict";var t=2147483647,r=/[^\0-\u007E]/,n=/[.\u3002\uFF0E\uFF61]/g,i="Overflow: input needs wider integers to process",o=Math.floor,s=String.fromCharCode,a=function(e){return e+22+75*(e<26)},u=function(e,t,r){var n=0;for(e=r?o(e/700):e>>1,e+=o(e/t);e>455;n+=36)e=o(e/35);return o(n+36*e/(e+38))},c=function(e){var r,n,c=[],l=(e=function(e){for(var t=[],r=0,n=e.length;r<n;){var i=e.charCodeAt(r++);if(i>=55296&&i<=56319&&r<n){var o=e.charCodeAt(r++);56320==(64512&o)?t.push(((1023&i)<<10)+(1023&o)+65536):(t.push(i),r--)}else t.push(i)}return t}(e)).length,h=128,f=0,d=72;for(r=0;r<e.length;r++)(n=e[r])<128&&c.push(s(n));var p=c.length,m=p;for(p&&c.push("-");m<l;){var g=t;for(r=0;r<e.length;r++)(n=e[r])>=h&&n<g&&(g=n);var y=m+1;if(g-h>o((t-f)/y))throw RangeError(i);for(f+=(g-h)*y,h=g,r=0;r<e.length;r++){if((n=e[r])<h&&++f>t)throw RangeError(i);if(n==h){for(var b=f,v=36;;v+=36){var w=v<=d?1:v>=d+26?26:v-d;if(b<w)break;var _=b-w,S=36-w;c.push(s(a(w+_%S))),b=o(_/S)}c.push(s(a(b))),d=u(f,y,m==p),f=0,++m}}++f,++h}return c.join("")};e.exports=function(e){var t,i,o=[],s=e.toLowerCase().replace(n,".").split(".");for(t=0;t<s.length;t++)i=s[t],o.push(r.test(i)?"xn--"+c(i):i);return o.join(".")}},2145:(e,t,r)=>{var n=r(7896),i=Math.max,o=Math.min;e.exports=function(e,t){var r=n(e);return r<0?i(r+t,0):o(r,t)}},8852:(e,t,r)=>{var n=r(8517),i=r(164);e.exports=function(e){return n(i(e))}},7896:e=>{var t=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:t)(e)}},4954:(e,t,r)=>{var n=r(7896),i=Math.min;e.exports=function(e){return e>0?i(n(e),9007199254740991):0}},4680:(e,t,r)=>{var n=r(164);e.exports=function(e){return Object(n(e))}},2034:(e,t,r)=>{var n=r(6944),i=r(8377),o=r(2392),s=r(3706)("toPrimitive");e.exports=function(e,t){if(!n(e)||i(e))return e;var r,a=e[s];if(void 0!==a){if(void 0===t&&(t="default"),r=a.call(e,t),!n(r)||i(r))return r;throw TypeError("Can't convert object to primitive value")}return void 0===t&&(t="number"),o(e,t)}},2694:(e,t,r)=>{var n=r(2034),i=r(8377);e.exports=function(e){var t=n(e,"string");return i(t)?t:String(t)}},939:(e,t,r)=>{var n={};n[r(3706)("toStringTag")]="z",e.exports="[object z]"===String(n)},401:(e,t,r)=>{var n=r(8377);e.exports=function(e){if(n(e))throw TypeError("Cannot convert a Symbol value to a string");return String(e)}},8435:e=>{var t=0,r=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++t+r).toString(36)}},4587:(e,t,r)=>{var n=r(1453);e.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3706:(e,t,r)=>{var n=r(6874),i=r(3215),o=r(5884),s=r(8435),a=r(1453),u=r(4587),c=i("wks"),l=n.Symbol,h=u?l:l&&l.withoutSetter||s;e.exports=function(e){return o(c,e)&&(a||"string"==typeof c[e])||(a&&o(l,e)?c[e]=l[e]:c[e]=h("Symbol."+e)),c[e]}},2837:(e,t,r)=>{"use strict";var n=r(8852),i=r(9611),o=r(873),s=r(6619),a=r(3131),u="Array Iterator",c=s.set,l=s.getterFor(u);e.exports=a(Array,"Array",(function(e,t){c(this,{type:u,target:n(e),index:0,kind:t})}),(function(){var e=l(this),t=e.target,r=e.kind,n=e.index++;return!t||n>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==r?{value:n,done:!1}:"values"==r?{value:t[n],done:!1}:{value:[n,t[n]],done:!1}}),"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},6949:(e,t,r)=>{"use strict";var n=r(6174).charAt,i=r(401),o=r(6619),s=r(3131),a="String Iterator",u=o.set,c=o.getterFor(a);s(String,"String",(function(e){u(this,{type:a,string:i(e),index:0})}),(function(){var e,t=c(this),r=t.string,i=t.index;return i>=r.length?{value:void 0,done:!0}:(e=n(r,i),t.index+=e.length,{value:e,done:!1})}))},2303:(e,t,r)=>{"use strict";r(2837);var n=r(1082),i=r(4578),o=r(1781),s=r(1249),a=r(7490),u=r(9400),c=r(9670),l=r(6619),h=r(2482),f=r(5884),d=r(4833),p=r(8753),m=r(47),g=r(6944),y=r(401),b=r(2361),v=r(976),w=r(7053),_=r(3126),S=r(3706),E=i("fetch"),x=i("Request"),R=x&&x.prototype,T=i("Headers"),C=S("iterator"),k="URLSearchParams",O="URLSearchParamsIterator",P=l.set,I=l.getterFor(k),L=l.getterFor(O),B=/\+/g,A=Array(4),U=function(e){return A[e-1]||(A[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},j=function(e){try{return decodeURIComponent(e)}catch(t){return e}},M=function(e){var t=e.replace(B," "),r=4;try{return decodeURIComponent(t)}catch(e){for(;r;)t=t.replace(U(r--),j);return t}},D=/[!'()~]|%20/g,N={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},F=function(e){return N[e]},q=function(e){return encodeURIComponent(e).replace(D,F)},$=function(e,t){if(t)for(var r,n,i=t.split("&"),o=0;o<i.length;)(r=i[o++]).length&&(n=r.split("="),e.push({key:M(n.shift()),value:M(n.join("="))}))},H=function(e){this.entries.length=0,$(this.entries,e)},W=function(e,t){if(e<t)throw TypeError("Not enough arguments")},z=c((function(e,t){P(this,{type:O,iterator:w(I(e).entries),kind:t})}),"Iterator",(function(){var e=L(this),t=e.kind,r=e.iterator.next(),n=r.value;return r.done||(r.value="keys"===t?n.key:"values"===t?n.value:[n.key,n.value]),r})),G=function(){h(this,G,k);var e,t,r,n,i,o,s,a,u,c=arguments.length>0?arguments[0]:void 0,l=this,d=[];if(P(l,{type:k,entries:d,updateURL:function(){},updateSearchParams:H}),void 0!==c)if(g(c))if("function"==typeof(e=_(c)))for(r=(t=e.call(c)).next;!(n=r.call(t)).done;){if((s=(o=(i=w(m(n.value))).next).call(i)).done||(a=o.call(i)).done||!o.call(i).done)throw TypeError("Expected sequence with length 2");d.push({key:y(s.value),value:y(a.value)})}else for(u in c)f(c,u)&&d.push({key:u,value:y(c[u])});else $(d,"string"==typeof c?"?"===c.charAt(0)?c.slice(1):c:y(c))},V=G.prototype;if(a(V,{append:function(e,t){W(arguments.length,2);var r=I(this);r.entries.push({key:y(e),value:y(t)}),r.updateURL()},delete:function(e){W(arguments.length,1);for(var t=I(this),r=t.entries,n=y(e),i=0;i<r.length;)r[i].key===n?r.splice(i,1):i++;t.updateURL()},get:function(e){W(arguments.length,1);for(var t=I(this).entries,r=y(e),n=0;n<t.length;n++)if(t[n].key===r)return t[n].value;return null},getAll:function(e){W(arguments.length,1);for(var t=I(this).entries,r=y(e),n=[],i=0;i<t.length;i++)t[i].key===r&&n.push(t[i].value);return n},has:function(e){W(arguments.length,1);for(var t=I(this).entries,r=y(e),n=0;n<t.length;)if(t[n++].key===r)return!0;return!1},set:function(e,t){W(arguments.length,1);for(var r,n=I(this),i=n.entries,o=!1,s=y(e),a=y(t),u=0;u<i.length;u++)(r=i[u]).key===s&&(o?i.splice(u--,1):(o=!0,r.value=a));o||i.push({key:s,value:a}),n.updateURL()},sort:function(){var e,t,r,n=I(this),i=n.entries,o=i.slice();for(i.length=0,r=0;r<o.length;r++){for(e=o[r],t=0;t<r;t++)if(i[t].key>e.key){i.splice(t,0,e);break}t===r&&i.push(e)}n.updateURL()},forEach:function(e){for(var t,r=I(this).entries,n=d(e,arguments.length>1?arguments[1]:void 0,3),i=0;i<r.length;)n((t=r[i++]).value,t.key,this)},keys:function(){return new z(this,"keys")},values:function(){return new z(this,"values")},entries:function(){return new z(this,"entries")}},{enumerable:!0}),s(V,C,V.entries),s(V,"toString",(function(){for(var e,t=I(this).entries,r=[],n=0;n<t.length;)e=t[n++],r.push(q(e.key)+"="+q(e.value));return r.join("&")}),{enumerable:!0}),u(G,k),n({global:!0,forced:!o},{URLSearchParams:G}),!o&&"function"==typeof T){var Y=function(e){if(g(e)){var t,r=e.body;if(p(r)===k)return(t=e.headers?new T(e.headers):new T).has("content-type")||t.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),b(e,{body:v(0,String(r)),headers:v(0,t)})}return e};if("function"==typeof E&&n({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return E(e,arguments.length>1?Y(arguments[1]):{})}}),"function"==typeof x){var J=function(e){return h(this,J,"Request"),new x(e,arguments.length>1?Y(arguments[1]):{})};R.constructor=J,J.prototype=R,n({global:!0,forced:!0},{Request:J})}}e.exports={URLSearchParams:G,getState:I}},2743:(e,t,r)=>{"use strict";r(6949);var n,i=r(1082),o=r(5542),s=r(1781),a=r(6874),u=r(7852),c=r(1249),l=r(2482),h=r(5884),f=r(5277),d=r(1774),p=r(6174).codeAt,m=r(8),g=r(401),y=r(9400),b=r(2303),v=r(6619),w=a.URL,_=b.URLSearchParams,S=b.getState,E=v.set,x=v.getterFor("URL"),R=Math.floor,T=Math.pow,C="Invalid scheme",k="Invalid host",O="Invalid port",P=/[A-Za-z]/,I=/[\d+-.A-Za-z]/,L=/\d/,B=/^0x/i,A=/^[0-7]+$/,U=/^\d+$/,j=/^[\dA-Fa-f]+$/,M=/[\0\t\n\r #%/:<>?@[\\\]^|]/,D=/[\0\t\n\r #/:<>?@[\\\]^|]/,N=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,F=/[\t\n\r]/g,q=function(e,t){var r,n,i;if("["==t.charAt(0)){if("]"!=t.charAt(t.length-1))return k;if(!(r=H(t.slice(1,-1))))return k;e.host=r}else if(X(e)){if(t=m(t),M.test(t))return k;if(null===(r=$(t)))return k;e.host=r}else{if(D.test(t))return k;for(r="",n=d(t),i=0;i<n.length;i++)r+=J(n[i],z);e.host=r}},$=function(e){var t,r,n,i,o,s,a,u=e.split(".");if(u.length&&""==u[u.length-1]&&u.pop(),(t=u.length)>4)return e;for(r=[],n=0;n<t;n++){if(""==(i=u[n]))return e;if(o=10,i.length>1&&"0"==i.charAt(0)&&(o=B.test(i)?16:8,i=i.slice(8==o?1:2)),""===i)s=0;else{if(!(10==o?U:8==o?A:j).test(i))return e;s=parseInt(i,o)}r.push(s)}for(n=0;n<t;n++)if(s=r[n],n==t-1){if(s>=T(256,5-t))return null}else if(s>255)return null;for(a=r.pop(),n=0;n<r.length;n++)a+=r[n]*T(256,3-n);return a},H=function(e){var t,r,n,i,o,s,a,u=[0,0,0,0,0,0,0,0],c=0,l=null,h=0,f=function(){return e.charAt(h)};if(":"==f()){if(":"!=e.charAt(1))return;h+=2,l=++c}for(;f();){if(8==c)return;if(":"!=f()){for(t=r=0;r<4&&j.test(f());)t=16*t+parseInt(f(),16),h++,r++;if("."==f()){if(0==r)return;if(h-=r,c>6)return;for(n=0;f();){if(i=null,n>0){if(!("."==f()&&n<4))return;h++}if(!L.test(f()))return;for(;L.test(f());){if(o=parseInt(f(),10),null===i)i=o;else{if(0==i)return;i=10*i+o}if(i>255)return;h++}u[c]=256*u[c]+i,2!=++n&&4!=n||c++}if(4!=n)return;break}if(":"==f()){if(h++,!f())return}else if(f())return;u[c++]=t}else{if(null!==l)return;h++,l=++c}}if(null!==l)for(s=c-l,c=7;0!=c&&s>0;)a=u[c],u[c--]=u[l+s-1],u[l+--s]=a;else if(8!=c)return;return u},W=function(e){var t,r,n,i;if("number"==typeof e){for(t=[],r=0;r<4;r++)t.unshift(e%256),e=R(e/256);return t.join(".")}if("object"==typeof e){for(t="",n=function(e){for(var t=null,r=1,n=null,i=0,o=0;o<8;o++)0!==e[o]?(i>r&&(t=n,r=i),n=null,i=0):(null===n&&(n=o),++i);return i>r&&(t=n,r=i),t}(e),r=0;r<8;r++)i&&0===e[r]||(i&&(i=!1),n===r?(t+=r?":":"::",i=!0):(t+=e[r].toString(16),r<7&&(t+=":")));return"["+t+"]"}return e},z={},G=f({},z,{" ":1,'"':1,"<":1,">":1,"`":1}),V=f({},G,{"#":1,"?":1,"{":1,"}":1}),Y=f({},V,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),J=function(e,t){var r=p(e,0);return r>32&&r<127&&!h(t,e)?e:encodeURIComponent(e)},K={ftp:21,file:null,http:80,https:443,ws:80,wss:443},X=function(e){return h(K,e.scheme)},Z=function(e){return""!=e.username||""!=e.password},Q=function(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme},ee=function(e,t){var r;return 2==e.length&&P.test(e.charAt(0))&&(":"==(r=e.charAt(1))||!t&&"|"==r)},te=function(e){var t;return e.length>1&&ee(e.slice(0,2))&&(2==e.length||"/"===(t=e.charAt(2))||"\\"===t||"?"===t||"#"===t)},re=function(e){var t=e.path,r=t.length;!r||"file"==e.scheme&&1==r&&ee(t[0],!0)||t.pop()},ne=function(e){return"."===e||"%2e"===e.toLowerCase()},ie={},oe={},se={},ae={},ue={},ce={},le={},he={},fe={},de={},pe={},me={},ge={},ye={},be={},ve={},we={},_e={},Se={},Ee={},xe={},Re=function(e,t,r,i){var o,s,a,u,c,l=r||ie,f=0,p="",m=!1,g=!1,y=!1;for(r||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(N,"")),t=t.replace(F,""),o=d(t);f<=o.length;){switch(s=o[f],l){case ie:if(!s||!P.test(s)){if(r)return C;l=se;continue}p+=s.toLowerCase(),l=oe;break;case oe:if(s&&(I.test(s)||"+"==s||"-"==s||"."==s))p+=s.toLowerCase();else{if(":"!=s){if(r)return C;p="",l=se,f=0;continue}if(r&&(X(e)!=h(K,p)||"file"==p&&(Z(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=p,r)return void(X(e)&&K[e.scheme]==e.port&&(e.port=null));p="","file"==e.scheme?l=ye:X(e)&&i&&i.scheme==e.scheme?l=ae:X(e)?l=he:"/"==o[f+1]?(l=ue,f++):(e.cannotBeABaseURL=!0,e.path.push(""),l=Se)}break;case se:if(!i||i.cannotBeABaseURL&&"#"!=s)return C;if(i.cannotBeABaseURL&&"#"==s){e.scheme=i.scheme,e.path=i.path.slice(),e.query=i.query,e.fragment="",e.cannotBeABaseURL=!0,l=xe;break}l="file"==i.scheme?ye:ce;continue;case ae:if("/"!=s||"/"!=o[f+1]){l=ce;continue}l=fe,f++;break;case ue:if("/"==s){l=de;break}l=_e;continue;case ce:if(e.scheme=i.scheme,s==n)e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query=i.query;else if("/"==s||"\\"==s&&X(e))l=le;else if("?"==s)e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query="",l=Ee;else{if("#"!=s){e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.path.pop(),l=_e;continue}e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query=i.query,e.fragment="",l=xe}break;case le:if(!X(e)||"/"!=s&&"\\"!=s){if("/"!=s){e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,l=_e;continue}l=de}else l=fe;break;case he:if(l=fe,"/"!=s||"/"!=p.charAt(f+1))continue;f++;break;case fe:if("/"!=s&&"\\"!=s){l=de;continue}break;case de:if("@"==s){m&&(p="%40"+p),m=!0,a=d(p);for(var b=0;b<a.length;b++){var v=a[b];if(":"!=v||y){var w=J(v,Y);y?e.password+=w:e.username+=w}else y=!0}p=""}else if(s==n||"/"==s||"?"==s||"#"==s||"\\"==s&&X(e)){if(m&&""==p)return"Invalid authority";f-=d(p).length+1,p="",l=pe}else p+=s;break;case pe:case me:if(r&&"file"==e.scheme){l=ve;continue}if(":"!=s||g){if(s==n||"/"==s||"?"==s||"#"==s||"\\"==s&&X(e)){if(X(e)&&""==p)return k;if(r&&""==p&&(Z(e)||null!==e.port))return;if(u=q(e,p))return u;if(p="",l=we,r)return;continue}"["==s?g=!0:"]"==s&&(g=!1),p+=s}else{if(""==p)return k;if(u=q(e,p))return u;if(p="",l=ge,r==me)return}break;case ge:if(!L.test(s)){if(s==n||"/"==s||"?"==s||"#"==s||"\\"==s&&X(e)||r){if(""!=p){var _=parseInt(p,10);if(_>65535)return O;e.port=X(e)&&_===K[e.scheme]?null:_,p=""}if(r)return;l=we;continue}return O}p+=s;break;case ye:if(e.scheme="file","/"==s||"\\"==s)l=be;else{if(!i||"file"!=i.scheme){l=_e;continue}if(s==n)e.host=i.host,e.path=i.path.slice(),e.query=i.query;else if("?"==s)e.host=i.host,e.path=i.path.slice(),e.query="",l=Ee;else{if("#"!=s){te(o.slice(f).join(""))||(e.host=i.host,e.path=i.path.slice(),re(e)),l=_e;continue}e.host=i.host,e.path=i.path.slice(),e.query=i.query,e.fragment="",l=xe}}break;case be:if("/"==s||"\\"==s){l=ve;break}i&&"file"==i.scheme&&!te(o.slice(f).join(""))&&(ee(i.path[0],!0)?e.path.push(i.path[0]):e.host=i.host),l=_e;continue;case ve:if(s==n||"/"==s||"\\"==s||"?"==s||"#"==s){if(!r&&ee(p))l=_e;else if(""==p){if(e.host="",r)return;l=we}else{if(u=q(e,p))return u;if("localhost"==e.host&&(e.host=""),r)return;p="",l=we}continue}p+=s;break;case we:if(X(e)){if(l=_e,"/"!=s&&"\\"!=s)continue}else if(r||"?"!=s)if(r||"#"!=s){if(s!=n&&(l=_e,"/"!=s))continue}else e.fragment="",l=xe;else e.query="",l=Ee;break;case _e:if(s==n||"/"==s||"\\"==s&&X(e)||!r&&("?"==s||"#"==s)){if(".."===(c=(c=p).toLowerCase())||"%2e."===c||".%2e"===c||"%2e%2e"===c?(re(e),"/"==s||"\\"==s&&X(e)||e.path.push("")):ne(p)?"/"==s||"\\"==s&&X(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&ee(p)&&(e.host&&(e.host=""),p=p.charAt(0)+":"),e.path.push(p)),p="","file"==e.scheme&&(s==n||"?"==s||"#"==s))for(;e.path.length>1&&""===e.path[0];)e.path.shift();"?"==s?(e.query="",l=Ee):"#"==s&&(e.fragment="",l=xe)}else p+=J(s,V);break;case Se:"?"==s?(e.query="",l=Ee):"#"==s?(e.fragment="",l=xe):s!=n&&(e.path[0]+=J(s,z));break;case Ee:r||"#"!=s?s!=n&&("'"==s&&X(e)?e.query+="%27":e.query+="#"==s?"%23":J(s,z)):(e.fragment="",l=xe);break;case xe:s!=n&&(e.fragment+=J(s,G))}f++}},Te=function(e){var t,r,n=l(this,Te,"URL"),i=arguments.length>1?arguments[1]:void 0,s=g(e),a=E(n,{type:"URL"});if(void 0!==i)if(i instanceof Te)t=x(i);else if(r=Re(t={},g(i)))throw TypeError(r);if(r=Re(a,s,null,t))throw TypeError(r);var u=a.searchParams=new _,c=S(u);c.updateSearchParams(a.query),c.updateURL=function(){a.query=String(u)||null},o||(n.href=ke.call(n),n.origin=Oe.call(n),n.protocol=Pe.call(n),n.username=Ie.call(n),n.password=Le.call(n),n.host=Be.call(n),n.hostname=Ae.call(n),n.port=Ue.call(n),n.pathname=je.call(n),n.search=Me.call(n),n.searchParams=De.call(n),n.hash=Ne.call(n))},Ce=Te.prototype,ke=function(){var e=x(this),t=e.scheme,r=e.username,n=e.password,i=e.host,o=e.port,s=e.path,a=e.query,u=e.fragment,c=t+":";return null!==i?(c+="//",Z(e)&&(c+=r+(n?":"+n:"")+"@"),c+=W(i),null!==o&&(c+=":"+o)):"file"==t&&(c+="//"),c+=e.cannotBeABaseURL?s[0]:s.length?"/"+s.join("/"):"",null!==a&&(c+="?"+a),null!==u&&(c+="#"+u),c},Oe=function(){var e=x(this),t=e.scheme,r=e.port;if("blob"==t)try{return new Te(t.path[0]).origin}catch(e){return"null"}return"file"!=t&&X(e)?t+"://"+W(e.host)+(null!==r?":"+r:""):"null"},Pe=function(){return x(this).scheme+":"},Ie=function(){return x(this).username},Le=function(){return x(this).password},Be=function(){var e=x(this),t=e.host,r=e.port;return null===t?"":null===r?W(t):W(t)+":"+r},Ae=function(){var e=x(this).host;return null===e?"":W(e)},Ue=function(){var e=x(this).port;return null===e?"":String(e)},je=function(){var e=x(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},Me=function(){var e=x(this).query;return e?"?"+e:""},De=function(){return x(this).searchParams},Ne=function(){var e=x(this).fragment;return e?"#"+e:""},Fe=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};if(o&&u(Ce,{href:Fe(ke,(function(e){var t=x(this),r=g(e),n=Re(t,r);if(n)throw TypeError(n);S(t.searchParams).updateSearchParams(t.query)})),origin:Fe(Oe),protocol:Fe(Pe,(function(e){var t=x(this);Re(t,g(e)+":",ie)})),username:Fe(Ie,(function(e){var t=x(this),r=d(g(e));if(!Q(t)){t.username="";for(var n=0;n<r.length;n++)t.username+=J(r[n],Y)}})),password:Fe(Le,(function(e){var t=x(this),r=d(g(e));if(!Q(t)){t.password="";for(var n=0;n<r.length;n++)t.password+=J(r[n],Y)}})),host:Fe(Be,(function(e){var t=x(this);t.cannotBeABaseURL||Re(t,g(e),pe)})),hostname:Fe(Ae,(function(e){var t=x(this);t.cannotBeABaseURL||Re(t,g(e),me)})),port:Fe(Ue,(function(e){var t=x(this);Q(t)||(""==(e=g(e))?t.port=null:Re(t,e,ge))})),pathname:Fe(je,(function(e){var t=x(this);t.cannotBeABaseURL||(t.path=[],Re(t,g(e),we))})),search:Fe(Me,(function(e){var t=x(this);""==(e=g(e))?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",Re(t,e,Ee)),S(t.searchParams).updateSearchParams(t.query)})),searchParams:Fe(De),hash:Fe(Ne,(function(e){var t=x(this);""!=(e=g(e))?("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",Re(t,e,xe)):t.fragment=null}))}),c(Ce,"toJSON",(function(){return ke.call(this)}),{enumerable:!0}),c(Ce,"toString",(function(){return ke.call(this)}),{enumerable:!0}),w){var qe=w.createObjectURL,$e=w.revokeObjectURL;qe&&c(Te,"createObjectURL",(function(e){return qe.apply(w,arguments)})),$e&&c(Te,"revokeObjectURL",(function(e){return $e.apply(w,arguments)}))}y(Te,"URL"),i({global:!0,forced:!s,sham:!o},{URL:Te})},462:()=>{},6029:()=>{}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};return(()=>{"use strict";r.r(n),r.d(n,{AACDepay:()=>P,BasicDepay:()=>L,CanvasSink:()=>D,H264Depay:()=>J,Html5CanvasPipeline:()=>wr,Html5VideoMetadataPipeline:()=>Er,Html5VideoPipeline:()=>Sr,HttpMsePipeline:()=>Ur,HttpSource:()=>ee,Inspector:()=>re,JPEGDepay:()=>ve,MessageType:()=>k,MetadataPipeline:()=>Tr,Mp4Capture:()=>Se,Mp4Muxer:()=>et,MseSink:()=>St,ONVIFDepay:()=>xt,Pipeline:()=>ar,RTCPPacketType:()=>it,RTSPResponseError:()=>tr,RTSP_METHOD:()=>er,RtspMjpegPipeline:()=>fr,RtspMp4Pipeline:()=>hr,RtspParser:()=>Vt,RtspPipeline:()=>cr,RtspSession:()=>rr,SDESItem:()=>dt,SR:()=>at,Scheduler:()=>j,Sink:()=>f,Source:()=>l,Tube:()=>h,WSSource:()=>or,WsSdpPipeline:()=>kr,addRTSPRetry:()=>jr,bodyOffset:()=>$t,cSrc:()=>x,cSrcCount:()=>b,components:()=>e,connectionEnded:()=>Ft,contentBase:()=>Dt,contentLocation:()=>Nt,createTransform:()=>O,extHeader:()=>T,extHeaderLength:()=>R,extension:()=>y,extractHeaderValue:()=>Bt,extractURIs:()=>Pt,getTime:()=>Kt,isRtcpApp:()=>vt,isRtcpBye:()=>yt,isRtcpRR:()=>ft,isRtcpSDES:()=>mt,isRtcpSR:()=>lt,marker:()=>v,messageFromBuffer:()=>Lt,padding:()=>g,parse:()=>It,parseRtcp:()=>ot,payload:()=>C,payloadType:()=>w,pipelines:()=>t,range:()=>qt,rtcpMessageFromBuffer:()=>st,sSrc:()=>E,sequence:()=>At,sequenceNumber:()=>_,sessionId:()=>Ut,sessionTimeout:()=>jt,statusCode:()=>Mt,timestamp:()=>S,utils:()=>i,version:()=>m});var e={};r.r(e),r.d(e,{AACDepay:()=>P,BasicDepay:()=>L,CanvasSink:()=>D,H264Depay:()=>J,HttpSource:()=>ee,Inspector:()=>re,JPEGDepay:()=>ve,MessageType:()=>k,Mp4Capture:()=>Se,Mp4Muxer:()=>et,MseSink:()=>St,ONVIFDepay:()=>xt,RTSPResponseError:()=>tr,RTSP_METHOD:()=>er,RtspParser:()=>Vt,RtspSession:()=>rr,Sink:()=>f,Source:()=>l,Tube:()=>h,WSSource:()=>or,createTransform:()=>O});var t={};r.r(t),r.d(t,{Html5CanvasPipeline:()=>wr,Html5VideoMetadataPipeline:()=>Er,Html5VideoPipeline:()=>Sr,HttpMsePipeline:()=>Ur,MetadataPipeline:()=>Tr,Pipeline:()=>ar,RtspMjpegPipeline:()=>fr,RtspMp4Pipeline:()=>hr,RtspPipeline:()=>cr,WsSdpPipeline:()=>kr});var i={};r.r(i),r.d(i,{RTCPPacketType:()=>it,SDESItem:()=>dt,SR:()=>at,Scheduler:()=>j,addRTSPRetry:()=>jr,bodyOffset:()=>$t,cSrc:()=>x,cSrcCount:()=>b,connectionEnded:()=>Ft,contentBase:()=>Dt,contentLocation:()=>Nt,extHeader:()=>T,extHeaderLength:()=>R,extension:()=>y,extractHeaderValue:()=>Bt,extractURIs:()=>Pt,getTime:()=>Kt,isRtcpApp:()=>vt,isRtcpBye:()=>yt,isRtcpRR:()=>ft,isRtcpSDES:()=>mt,isRtcpSR:()=>lt,marker:()=>v,messageFromBuffer:()=>Lt,padding:()=>g,parse:()=>It,parseRtcp:()=>ot,payload:()=>C,payloadType:()=>w,range:()=>qt,rtcpMessageFromBuffer:()=>st,sSrc:()=>E,sequence:()=>At,sequenceNumber:()=>_,sessionId:()=>Ut,sessionTimeout:()=>jt,statusCode:()=>Mt,timestamp:()=>S,version:()=>m});var o=r(8981),s=r(7866).Buffer;class a{static consumer(e=(()=>{})){return new o.Writable({objectMode:!0,write(t,r,n){e(t),n()}})}static peeker(e){if("function"!=typeof e)throw new Error("you must supply a function");return new o.Transform({objectMode:!0,transform(t,r,n){e(t),n(void 0,t)}})}static producer(e){let t=0;return new o.Readable({objectMode:!0,read(){void 0!==e&&(t<e.length?this.push(e[t++]):this.push(null))}})}static recorder(e,t){return new o.Transform({objectMode:!0,transform(r,n,i){const o=Date.now(),s=Object.assign({},r,{data:r.data.toString("base64")});t.write(JSON.stringify({type:e,timestamp:o,message:s},null,2)),t.write(",\n"),i(void 0,r)}})}static replayer(e){let t=0,r=e[0].timestamp;return new o.Readable({objectMode:!0,read(){const n=e[t++];if(n){const{type:e,timestamp:t,message:i}=n,o=t-r;if(r=t,i){const t=i.data?s.from(i.data,"base64"):s.alloc(0),r=Object.assign({},i,{data:t});this.push({type:e,delay:o,msg:r})}else this.push({type:e,delay:o,msg:null})}else this.push(null)}})}}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class c{constructor(){u(this,"incoming",void 0),u(this,"outgoing",void 0),u(this,"next",void 0),u(this,"prev",void 0),u(this,"_incomingErrorHandler",void 0),u(this,"_outgoingErrorHandler",void 0)}}class l extends c{static fromMessages(e){return new l(a.producer(e),a.consumer())}constructor(e=new o.Readable({objectMode:!0}),t=new o.Writable({objectMode:!0})){super(),u(this,"incoming",void 0),u(this,"outgoing",void 0),u(this,"next",void 0),u(this,"prev",void 0),this.incoming=e,this.outgoing=t,this.next=null,this.prev=null}connect(e){if(null===e)return this;if(null!==this.next||null!==e.prev)throw new Error("connection failed: component(s) already connected");if(!this.incoming.readable||!this.outgoing.writable)throw new Error("connection failed: this component not compatible");if(!e.incoming.writable||!e.outgoing.readable)throw new Error("connection failed: next component not compatible");try{this.incoming.pipe(e.incoming),e.outgoing.pipe(this.outgoing)}catch(e){throw new Error(`connection failed: ${e.message}`)}const t=e=>{this.incoming.emit("error",e)};e.incoming.on("error",t);const r=t=>{e.outgoing.emit("error",t)};return this.outgoing.on("error",r),this.next=e,e.prev=this,this._incomingErrorHandler=t,this._outgoingErrorHandler=r,e}disconnect(){const e=this.next;return null!==e&&(this.incoming.unpipe(e.incoming),e.outgoing.unpipe(this.outgoing),void 0!==this._incomingErrorHandler&&e.incoming.removeListener("error",this._incomingErrorHandler),void 0!==this._outgoingErrorHandler&&this.outgoing.removeListener("error",this._outgoingErrorHandler),this.next=null,e.prev=null,delete this._incomingErrorHandler,delete this._outgoingErrorHandler),this}}class h extends l{static fromHandlers(e,t){const r=e?a.peeker(e):void 0,n=t?a.peeker(t):void 0;return new h(r,n)}constructor(e=new o.PassThrough({objectMode:!0}),t=new o.PassThrough({objectMode:!0})){super(e,t),u(this,"incoming",void 0),u(this,"outgoing",void 0),this.incoming=e,this.outgoing=t}}class f extends c{static fromHandler(e){const t=new f(a.consumer(e),a.producer(void 0));return t.incoming.on("finish",(()=>{t.outgoing.push(null)})),t}constructor(e=new o.Writable({objectMode:!0}),t=new o.Readable({objectMode:!0})){super(),u(this,"incoming",void 0),u(this,"outgoing",void 0),u(this,"next",void 0),u(this,"prev",void 0),this.incoming=e,this.outgoing=t,this.next=null,this.prev=null}connect(){throw new Error("connection failed: attempting to connect after a sink")}disconnect(){return this}}const d=[128,64,32,16,8,4,2,1];var p=r(7866).Buffer;const m=e=>e[0]>>>6,g=e=>!!(e[0]&d[2]),y=e=>!!(e[0]&d[3]),b=e=>15&e[0],v=e=>!!(e[1]&d[0]),w=e=>127&e[1],_=e=>e.readUInt16BE(2),S=e=>e.readUInt32BE(4),E=e=>e.readUInt32BE(8),x=(e,t=0)=>b(e)>t?e.readUInt32BE(12+4*t):0,R=e=>y(e)?e.readUInt16BE(12+4*b(e)+2):0,T=e=>0===R(e)?p.from([]):e.slice(12+4*b(e),12+4*b(e)+4+4*R(e)),C=e=>y(e)?e.slice(12+4*b(e)+4+4*R(e)):e.slice(12+4*b(e));let k;!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.RAW=1]="RAW",e[e.RTP=2]="RTP",e[e.RTCP=3]="RTCP",e[e.RTSP=4]="RTSP",e[e.SDP=5]="SDP",e[e.ELEMENTARY=6]="ELEMENTARY",e[e.H264=7]="H264",e[e.ISOM=8]="ISOM",e[e.XML=9]="XML",e[e.JPEG=10]="JPEG"}(k||(k={}));const O=e=>new o.Transform({objectMode:!0,transform:e});class P extends h{constructor(){let e,t;super(O((function(r,n,i){if(r.type===k.SDP){let n;for(const e of r.sdp.media)"audio"===e.type&&e.fmtp&&e.fmtp.parameters&&"AAC-hbr"===e.fmtp.parameters.mode&&(n=e);if(n&&void 0!==n.rtpmap){e=Number(n.rtpmap.payloadType);const r=n.fmtp.parameters,i=Number(r.sizelength)||0,o=Number(r.indexlength)||0,s=Number(r.indexdeltalength)||0,a=Number(r.ctsdeltalength)||0,u=Number(r.dtsdeltalength)||0,c=Number(r.randomaccessindication)||0,l=Number(r.streamstateindication)||0,h=Number(r.auxiliarydatasizelength)||0;t=i+Math.max(o,s)+a+u+c+l+h>0}i(void 0,r)}else r.type===k.RTP&&w(r.data)===e?(function(e,t,r){const n=C(e.data);let i=0;if(t){const e=n.readUInt16BE(0);i=2+(e+e%8)/8}r({type:k.ELEMENTARY,data:n.slice(i),payloadType:w(e.data),timestamp:S(e.data),ntpTimestamp:e.ntpTimestamp})}(r,t,this.push.bind(this)),i()):i(void 0,r)})))}}var I=r(7866).Buffer;class L extends h{constructor(e){if(void 0===e)throw new Error("you must supply a payload type to BasicDepayComponent");let t=I.alloc(0);super(O((function(r,n,i){if(r.type===k.RTP&&w(r.data)===e){const e=C(r.data);t=I.concat([t,e]),v(r.data)&&(t.length>0&&this.push({data:t,timestamp:S(r.data),ntpTimestamp:r.ntpTimestamp,payloadType:w(r.data),type:k.ELEMENTARY}),t=I.alloc(0)),i()}else i(void 0,r)})))}}function B(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r(2743);class A{constructor(){B(this,"started",void 0),B(this,"stopped",void 0),B(this,"elapsed",void 0),this.elapsed=0,this.started=0,this.stopped=!0}start(){this.stopped&&(this.started=window.performance.now(),this.stopped=!1)}stop(){this.stopped||(this.elapsed=this.now(),this.stopped=!0)}reset(){this.elapsed=0,this.started=0,this.stopped=!0}now(){return this.stopped?this.elapsed:this.elapsed+(window.performance.now()-this.started)}play(){this.start()}pause(){this.stop()}get currentTime(){return this.now()/1e3}}function U(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class j{constructor(e,t,r=10){U(this,"_clock",void 0),U(this,"_handler",void 0),U(this,"_tolerance",void 0),U(this,"_nextRun",void 0),U(this,"_nextPlay",void 0),U(this,"_fifo",void 0),U(this,"_ntpPresentationTime",void 0),U(this,"_suspended",void 0),this._clock=e,this._handler=t,this._tolerance=r,this._nextRun=0,this._nextPlay=0,this._fifo=[],this._ntpPresentationTime=0,this._suspended=!1}reset(){clearTimeout(this._nextRun),clearTimeout(this._nextPlay),this._fifo=[],this._ntpPresentationTime=0,this._suspended=!1}init(e){this._ntpPresentationTime=e}suspend(){clearTimeout(this._nextPlay),this._suspended=!0}resume(){this._suspended=!1,this.run(void 0)}run(e){if(clearTimeout(this._nextRun),void 0===this._ntpPresentationTime)return;if(void 0!==e&&this._fifo.push(e),this._suspended)return;if(0===this._fifo.length)return;let t,r=0;do{const e=this._fifo.shift();if(void 0===e)throw new Error("internal error: message should never be undefined");t=e;const n=t.ntpTimestamp;void 0!==n&&(r=n-this._ntpPresentationTime-1e3*this._clock.currentTime,Math.abs(r)<this._tolerance&&this._handler&&this._handler(t))}while(r<this._tolerance&&this._fifo.length>0);r<-this._tolerance?(clearTimeout(this._nextPlay),this._clock.pause(),this._nextPlay=window.setTimeout((()=>this._clock.play()),-r)):r>this._tolerance&&(this._fifo.unshift(t),this._nextRun=window.setTimeout((()=>this.run(void 0)),r))}}function M(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class D extends f{constructor(e){if(void 0===e)throw new Error("canvas element argument missing");let t=0,r=0,n=0;const i={bitrate:0,framerate:0,renderedFrames:0};let s,a,u=null;if(void 0!==window.createImageBitmap&&(u=e.getContext("bitmaprenderer")),null===u&&(u=e.getContext("2d")),null===u)a=()=>{};else if("transferFromImageBitmap"in u){const e=u;a=({blob:t})=>{i.renderedFrames++,window.createImageBitmap(t).then((t=>{e.transferFromImageBitmap(t)})).catch((()=>{}))}}else{const e=u,t=new Image;t.onload=()=>{e.drawImage(t,0,0)},a=({blob:e})=>{i.renderedFrames++;const r=window.URL.createObjectURL(e);t.src=r}}const c=new A,l=new j(c,a);let h=0;const f=()=>{this.onCanplay&&this.onCanplay()},d=e=>{this.onSync&&this.onSync(e)},p=new o.Writable({objectMode:!0,write:(o,a,u)=>{if(o.type===k.SDP){c.reset(),l.reset(),t=0;const e=o.sdp.media.find((e=>"video"===e.type&&void 0!==e.rtpmap&&"JPEG"===e.rtpmap.encodingName));void 0!==e&&void 0!==e.rtpmap&&(n=e.rtpmap.clockrate,(e=>{e.bitrate=0,e.framerate=0,e.renderedFrames=0})(i),s=(e=>{let t=0,r=0,n=0;return(i,{byteLength:o,duration:s})=>{if(t+=o,r+=s,n++,r>=e){const o=8*t,s=n,a=r/e;i.bitrate=o/a,i.framerate=s/a,t=0,r=0,n=0}}})(n)),u()}else if(o.type===k.JPEG){const{timestamp:a,ntpTimestamp:c}=o;if(!t){t=a,r=a;const{width:n,height:i}=o.framesize;e.width=n,e.height=i,l.init(0)}const p=1e3*(a-t)/n,m=new window.Blob([o.data],{type:"image/jpeg"});!h&&c&&(h=c-p,d(h)),l.run({ntpTimestamp:p,blob:m}),a===t&&f(),s(i,{byteLength:o.data.length,duration:a-r}),r=a,u()}else u()}}),m=new o.Readable({objectMode:!0,read:function(){}});m.on("error",(()=>{console.warn("outgoing stream broke somewhere")})),super(p,m),M(this,"onCanplay",void 0),M(this,"onSync",void 0),M(this,"_clock",void 0),M(this,"_scheduler",void 0),M(this,"_info",void 0),this._clock=c,this._scheduler=l,this._info=i,this.onCanplay=void 0,this.onSync=void 0}get currentTime(){return this._clock.currentTime}pause(){this._scheduler.suspend(),this._clock.pause()}play(){this._clock.play(),this._scheduler.resume()}get bitrate(){return this._info.bitrate}get framerate(){return this._info.framerate}}var N=r(7997),F=r.n(N),q=r(7866).Buffer;let $;!function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.NON_IDR_PICTURE=1]="NON_IDR_PICTURE",e[e.IDR_PICTURE=5]="IDR_PICTURE",e[e.SPS=7]="SPS",e[e.PPS=8]="PPS"}($||($={}));const H=F()("msl:h264depay");class W{constructor(){var e,t;t=void 0,(e="_buffer")in this?Object.defineProperty(this,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):this[e]=t,this._buffer=q.alloc(0)}parse(e){const t=C(e.data),r=31&t[0];if(28===r){const r=t[0],n=t[1],i=31&n,o=224&r|i,s=64&n;if(n>>7)return this._buffer=q.concat([q.from([0,0,0,0,o]),t.slice(2)]),null;if(s){const r=q.concat([this._buffer,t.slice(2)]);r.writeUInt32BE(r.length-4,0);const n={data:r,type:k.H264,timestamp:S(e.data),ntpTimestamp:e.ntpTimestamp,payloadType:w(e.data),nalType:i};return this._buffer=q.alloc(0),n}return this._buffer=q.concat([this._buffer,t.slice(2)]),null}if(r!==$.NON_IDR_PICTURE&&r!==$.IDR_PICTURE||0!==this._buffer.length)return H(`H264depayComponent can only extract types 1,5 and 28, got ${r}`),this._buffer=q.alloc(0),null;{const n=q.concat([q.from([0,0,0,0]),t]);n.writeUInt32BE(n.length-4,0);const i={data:n,type:k.H264,timestamp:S(e.data),ntpTimestamp:e.ntpTimestamp,payloadType:w(e.data),nalType:r};return this._buffer=q.alloc(0),i}}}var z=r(7866).Buffer;function G(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function V(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?G(Object(r),!0).forEach((function(t){Y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class J extends h{constructor(){let e,t=!1,r=[];const n=new W;super(new o.Transform({objectMode:!0,transform:function(i,o,s){if(i.type===k.SDP){const t=i.sdp.media.find((e=>"video"===e.type&&void 0!==e.rtpmap&&"H264"===e.rtpmap.encodingName));void 0!==t&&void 0!==t.rtpmap&&(e=t.rtpmap.payloadType),s(void 0,i)}else if(i.type===k.RTP&&w(i.data)===e){const e=v(i.data),o=n.parse(i);if(null===o||!t&&o.nalType!==$.IDR_PICTURE)return void s();t=!0,r.push(o.data),e&&(this.push(V(V({},o),{},{data:1===r.length?r[0]:z.concat(r)})),r=[]),s()}else s(void 0,i)}}))}}var K=r(7866).Buffer;function X(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Z(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Q=F()("msl:http-source");class ee extends l{constructor(e){const{uri:t,options:r}=e,n=new o.Readable({objectMode:!0,read:function(){}});n.on("error",(e=>{console.warn("closing socket due to incoming error",e),this._reader&&this._reader.cancel()})),super(n),Z(this,"uri",void 0),Z(this,"options",void 0),Z(this,"length",void 0),Z(this,"onHeaders",void 0),Z(this,"onServerClose",void 0),Z(this,"_reader",void 0),Z(this,"_abortController",void 0),Z(this,"_allDone",void 0),n._read=()=>{this._pull()},this.uri=t,this.options=r,this._allDone=!1}play(){if(void 0===this.uri)throw new Error("cannot start playing when there is no URI");this._abortController=new AbortController,this.length=0,fetch(this.uri,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?X(Object(r),!0).forEach((function(t){Z(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({credentials:"include",signal:this._abortController.signal},this.options)).then((e=>{if(null===e.body)throw new Error("empty response body");this.onHeaders&&this.onHeaders(e.headers),this._reader=e.body.getReader(),this._pull()})).catch((e=>{console.error("http-source: fetch failed: ",e)}))}abort(){this._reader&&this._reader.cancel().catch((e=>{console.log("http-source: cancel reader failed: ",e)})),this._abortController&&this._abortController.abort()}_isClosed(){return this._allDone}_close(){var e;this._reader=void 0,this._allDone=!0,this.incoming.push(null),null===(e=this.onServerClose)||void 0===e||e.call(this)}_pull(){void 0!==this._reader&&this._reader.read().then((({done:e,value:t})=>{if(e)return void(this._isClosed()||(Q("fetch completed, total downloaded: ",this.length," bytes"),this._close()));if(void 0===t)throw new Error("expected value to be defined");if(void 0===this.length)throw new Error("expected length to be defined");this.length+=t.length;const r=K.from(t);this.incoming.push({data:r,type:k.RAW})?this._pull():Q("downstream back pressure: pausing read")})).catch((e=>{Q("http-source: read failed: ",e),this._isClosed()||this._close()}))}}const te=(e,t)=>{let r=Date.now();const n=t=>{const n=Date.now();console.log(`${e}: +${n-r}ms`,t),r=n};return void 0===t?n:e=>e.type===t&&n(e)};class re extends h{constructor(e){const t=te("incoming",e),r=new o.Transform({objectMode:!0,transform:function(e,r,n){t(e),n(void 0,e)}}),n=te("outgoing",e);super(r,new o.Transform({objectMode:!0,transform:function(e,t,r){n(e),r(void 0,e)}}))}}var ne=r(7866).Buffer;const ie=[0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],oe=[0,1,2,3,4,5,6,7,8,9,10,11],se=[0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],ae=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],ue=[0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],ce=[0,1,2,3,4,5,6,7,8,9,10,11],le=[0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],he=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function fe(e,t,r){return e>r?r:e<t?t:e}var de=r(7866).Buffer;const pe=[16,11,12,14,12,10,16,14,13,14,18,17,16,19,24,40,26,24,22,22,24,49,35,37,29,40,58,51,61,60,57,51,56,55,64,72,92,78,64,68,87,69,55,56,80,109,81,87,95,98,103,104,103,62,77,113,121,112,100,120,92,101,103,99],me=[17,18,18,24,21,24,47,26,26,47,99,66,56,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99];function ge(e){const t=fe(e,1,99),r=de.alloc(128),n=e<50?Math.floor(5e3/t):200-2*t;for(let e=0;e<64;e++){const t=Math.floor((pe[e]*n+50)/100),i=Math.floor((me[e]*n+50)/100);r.writeUInt8(fe(t,1,255),e),r.writeUInt8(fe(i,1,255),e+64)}return r}var ye=r(7866).Buffer;function be(e=0,t=0){const r=ne.from([255,216]),n=function(){const e=[[255,196,0,3+ie.length+oe.length,0],ie,oe],t=[[255,196,0,3+se.length+ae.length,16],se,ae],r=[[255,196,0,3+ue.length+ce.length,1],ue,ce],n=[[255,196,0,3+le.length+he.length,17],le,he];return ne.concat([...e.map(ne.from),...t.map(ne.from),...r.map(ne.from),...n.map(ne.from)])}(),i=ne.from([255,218,0,12,3,0,0,1,17,2,17,0,63,0]);return function(o){let s;const a=[];for(const r of o){let n=C(r);const i=n.readUInt8(0),o=n.readUInt8(1)<<16|n.readUInt8(2)<<8|n.readUInt8(3),u=n.readUInt8(4),c=n.readUInt8(5),l=8*n.readUInt8(6)||e,h=8*n.readUInt8(7)||t;n=n.slice(8);let f=0;if(u>=64&&u<=127&&(f=n.readUInt16BE(0),n=n.slice(4)),c>=128&&0===o){const e=n.readUInt8(1),t=n.readUInt16BE(2);s={typeSpecific:i,type:u,width:l,height:h,DRI:f,precision:e,qTable:n.slice(4,4+t)},n=n.slice(4+t)}else c<128&&0===o&&(s={typeSpecific:i,type:u,width:l,height:h,DRI:f,precision:0,qTable:ge(c)});a.push(n)}if(void 0===s)throw new Error("no quantization header present");const{precision:u,qTable:c,type:l,width:h,height:f}=s,d=function(e,t){const r=1&e?128:64,n=2&e?128:64;if(t.length!==r+n)throw new Error("invalid quantization table");const i=ne.from([255,219,0,r+3,0]),o=ne.from([255,219,0,n+3,1]);return ne.concat([i,t.slice(0,r),o,t.slice(r)])}(u,c),p=0===s.DRI?ye.alloc(0):(m=s.DRI,ne.from([255,221,0,4,m>>8,255&m]));var m;const g=function(e,t,r){return ne.from([255,192,0,17,8,t>>8,t,e>>8,e,3,0,0===r?33:34,0,1,17,1,2,17,1])}(h,f,l);return{size:{width:h,height:f},data:ye.concat([r,d,p,g,n,i,...a])}}}class ve extends h{constructor(){let e,t,r=[];super(new o.Transform({objectMode:!0,transform:function(n,i,o){if(n.type===k.SDP){const r=n.sdp.media.find((e=>"video"===e.type&&void 0!==e.rtpmap&&"JPEG"===e.rtpmap.encodingName));if(void 0!==r&&void 0!==r.rtpmap){e=Number(r.rtpmap.payloadType);const n=r.framesize;if(void 0!==n){const[e,r]=n;t=be(e,r)}else t=be()}o(void 0,n)}else if(n.type===k.RTP&&w(n.data)===e){if(r.push(n.data),v(n.data)&&r.length>0){const e=t(r);this.push({timestamp:S(n.data),ntpTimestamp:n.ntpTimestamp,payloadType:w(n.data),data:e.data,framesize:e.size,type:k.JPEG}),r=[]}o()}else o(void 0,n)}}))}}var we=r(7866).Buffer;function _e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Se extends h{constructor(e=225e6){const t=new o.Transform({objectMode:!0,transform:(e,t,r)=>{this._active&&e.type===k.ISOM&&void 0!==e.tracks&&(this._capture=!0),this._capture&&e.type===k.ISOM&&(this._bufferOffset<this._buffer.byteLength-e.data.byteLength?(e.data.copy(this._buffer,this._bufferOffset),this._bufferOffset+=e.data.byteLength):this.stop()),r(void 0,e)}});t.on("finish",(()=>{this.stop()})),super(t),_e(this,"_active",void 0),_e(this,"_capture",void 0),_e(this,"_captureCallback",void 0),_e(this,"_bufferOffset",void 0),_e(this,"_bufferSize",void 0),_e(this,"_buffer",void 0),this._buffer=we.allocUnsafe(0),this._bufferSize=e,this._bufferOffset=0,this._active=!1,this._capture=!1,this._captureCallback=()=>{}}start(e){this._active||(F()("msl:capture:start")(e),this._captureCallback=e,this._buffer=we.allocUnsafe(this._bufferSize),this._bufferOffset=0,this._active=!0)}stop(){if(this._active){F()("msl:capture:stop")(`captured bytes: ${this._bufferOffset}`);try{this._captureCallback(this._buffer.slice(0,this._bufferOffset))}catch(e){console.error(e)}this._buffer=we.allocUnsafe(0),this._bufferOffset=0,this._active=!1,this._capture=!1}}}var Ee=r(7866).Buffer;function xe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Re=Math.pow(2,32);class Te{constructor(e){xe(this,"byteLength",void 0),xe(this,"value",void 0),this.byteLength=e}}class Ce extends Te{constructor(e=0){super(e),xe(this,"copy",((e,t)=>{e.fill(0,t,t+this.byteLength)}))}load(){}}class ke extends Te{constructor(e){super(e.length),xe(this,"value",void 0),xe(this,"copy",((e,t)=>{for(let r=0;r<this.byteLength;r+=1)e[t+r]=this.value.charCodeAt(r)})),xe(this,"load",((e,t)=>{this.value=e.slice(t,t+this.byteLength).toString("ascii")})),this.value=e}}class Oe extends Te{constructor(e=0){super(1),xe(this,"value",void 0),xe(this,"copy",((e,t)=>{e.writeUInt8(this.value,t)})),xe(this,"load",((e,t)=>{this.value=e.readUInt8(t)})),this.value=e}}class Pe extends Te{constructor(e){super(e.length),xe(this,"value",void 0),xe(this,"copy",((e,t)=>{for(let r=0;r<this.value.length;++r)e.writeUInt8(this.value[r],t+r)})),xe(this,"load",((e,t)=>{for(let r=0;r<this.value.length;++r)this.value[r]=e.readUInt8(t+r)})),this.value=e}}class Ie extends Te{constructor(e=0){super(2),xe(this,"value",void 0),xe(this,"copy",((e,t)=>{e.writeUInt16BE(this.value,t)})),xe(this,"load",((e,t)=>{this.value=e.readUInt16BE(t)})),this.value=e}}class Le extends Te{constructor(e=0){super(3),xe(this,"value",void 0),xe(this,"copy",((e,t)=>{e.writeUInt8(this.value>>16&255,t),e.writeUInt8(this.value>>8&255,t+1),e.writeUInt8(255&this.value,t+2)})),xe(this,"load",((e,t)=>{this.value=e.readUInt8(t)<<16+e.readUInt8(t+1)<<8+e.readUInt8(t+2)})),this.value=e}}class Be extends Te{constructor(e=0){super(4),xe(this,"value",void 0),xe(this,"copy",((e,t)=>{e.writeUInt32BE(this.value,t)})),xe(this,"load",((e,t)=>{this.value=e.readUInt32BE(t)})),this.value=e}}class Ae extends Te{constructor(e){super(4*e.length),xe(this,"value",void 0),xe(this,"copy",((e,t)=>{for(let r=0;r<this.value.length;++r)e.writeUInt32BE(this.value[r],t+4*r)})),xe(this,"load",((e,t)=>{for(let r=0;r<this.value.length;++r)this.value[r]=e.readUInt32BE(t+4*r)})),this.value=e}}const Ue=function(e=0){return class extends Te{constructor(t){super(0),xe(this,"value",void 0),xe(this,"copy",((e,t)=>{let r=0;for(const n of this.value)n.copy(e,t+r),r+=n.byteLength})),xe(this,"load",(()=>{})),this.value=t.reduce(((e,t)=>e.concat(new Ie(t.length),new Pe(t))),[new Oe(e|t.length)]),this.byteLength=this.value.reduce(((e,t)=>e+t.byteLength),0)}}},je={ftyp:{container:"file",mandatory:!0,quantity:"one",box:"Box",is_container:!0,body:[["major_brand",ke,"isom"],["minor_version",Be,0],["compatible_brands",ke,"mp41"]]},moov:{container:"file",mandatory:!0,quantity:"one",box:"Box",is_container:!0},mdat:{container:"file",mandatory:!1,quantity:"any",box:"Box",is_container:!1,body:[]},mvhd:{container:"moov",mandatory:!0,quantity:"one",box:"FullBox",is_container:!1,body:[["creation_time",Be,0],["modification_time",Be,0],["timescale",Be,1e3],["duration",Be,4294967295],["rate",Be,65536],["volume",Ie,256],["reserved",Ce,10],["matrix",Ae,[65536,0,0,0,65536,0,0,0,1073741824]],["pre_defined",Ce,24],["next_track_ID",Be,4294967295]]},trak:{container:"moov",mandatory:!0,quantity:"one+",box:"Box",is_container:!0},tkhd:{container:"trak",mandatory:!0,quantity:"one",box:"FullBox",is_container:!1,config:{flags:3},body:[["creation_time",Be,0],["modification_time",Be,0],["track_ID",Be,1],["reserved",Ce,4],["duration",Be,0],["reserved2",Ce,8],["layer",Ie,0],["alternate_group",Ie,0],["volume",Ie,256],["reserved3",Ce,2],["matrix",Ae,[65536,0,0,0,65536,0,0,0,1073741824]],["width",Be,0],["height",Be,0]]},tref:{container:"trak",mandatory:!1,quantity:"one-",box:"Box",is_container:!1},mdia:{container:"trak",mandatory:!1,quantity:"one",box:"Box",is_container:!0},mdhd:{container:"mdia",mandatory:!1,quantity:"one",box:"FullBox",is_container:!1,body:[["creation_time",Be,0],["modification_time",Be,0],["timescale",Be,1e3],["duration",Be,4294967295],["language",Ie,0],["pre_defined",Ie,0]]},hdlr:{container:"mdia",mandatory:!0,quantity:"one",box:"FullBox",is_container:!1,body:[["predefined",Be,0],["handler_type",ke,"vide"],["reserved",Ce,12],["name",ke,"VideoHandler\0"]]},minf:{container:"mdia",mandatory:!0,quantity:"one",box:"Box",is_container:!0},vmhd:{container:"minf",mandatory:!0,quantity:"one",box:"FullBox",is_container:!1,config:{flags:1},body:[["graphicsmode",Ie,0],["opcolor",class extends Te{constructor(e){super(2*e.length),xe(this,"value",void 0),xe(this,"copy",((e,t)=>{for(let r=0;r<this.value.length;++r)e.writeUInt16BE(this.value[r],t+2*r)})),xe(this,"load",((e,t)=>{for(let r=0;r<this.value.length;++r)this.value[r]=e.readUInt16BE(t+2*r)})),this.value=e}},[0,0,0]]]},smhd:{container:"minf",mandatory:!0,quantity:"one",box:"FullBox",is_container:!1,body:[["balance",Ie,0],["reserved",Ie]]},dinf:{container:"minf",mandatory:!0,quantity:"one",box:"Box",is_container:!0},dref:{container:"dinf",mandatory:!0,quantity:"one",box:"FullBox",is_container:!0,body:[["entry_count",Be,0]]},"url ":{container:"dref",mandatory:!0,quantity:"one+",box:"FullBox",is_container:!1,config:{flags:1},body:[]},stbl:{container:"minf",mandatory:!0,quantity:"one",box:"Box",is_container:!0},stts:{container:"stbl",mandatory:!0,quantity:"one",box:"FullBox",is_container:!1,body:[["entry_count",Be,0]]},stsd:{container:"stbl",mandatory:!0,quantity:"one",box:"FullBox",is_container:!0,body:[["entry_count",Be,1]]},avc1:{container:"stsd",mandatory:!1,quantity:"one",box:"Box",is_container:!0,body:[["reserved",Ce,6],["data_reference_index",Ie,1],["pre_defined",Ie,0],["reserved2",Ce,2],["pre_defined2",Ae,[0,0,0]],["width",Ie,1920],["height",Ie,1080],["horizresolution",Be,4718592],["vertresolution",Be,4718592],["reserved3",Be,0],["frame_count",Ie,1],["compressorname",Pe,Ee.alloc(32)],["depth",Ie,24],["pre_defined3",Ie,65535]]},avcC:{container:"avc1",mandatory:!1,quantity:"one",box:"Box",is_container:!1,body:[["configurationVersion",Oe,1],["AVCProfileIndication",Oe,77],["profile_compatibility",Oe,0],["AVCLevelIndication",Oe,41],["lengthSizeMinusOne",Oe,255],["sequenceParameterSets",Ue(224),[]],["pictureParameterSets",Ue(),[]]]},mp4a:{container:"stsd",mandatory:!1,quantity:"one",box:"Box",is_container:!0,body:[["reserved",Ce,6],["data_reference_index",Ie,1],["reserved2",Ae,[0,0]],["channelcount",Ie,2],["samplesize",Ie,16],["pre_defined",Ie,0],["reserved3",Ie,0],["samplerate",Be,0]]},esds:{container:"mp4a",mandatory:!1,quantity:"one",box:"FullBox",is_container:!1,body:[["ES_DescrTag",Oe,3],["ES_DescrLength",Oe,25],["ES_ID",Ie,1],["flagsAndStreamPriority",Oe,0],["DecoderConfigDescrTag",Oe,4],["DecoderConfigDescrLength",Oe,17],["objectProfileIndication",Oe,64],["streamTypeUpstreamReserved",Oe,21],["bufferSizeDB",Pe,[0,0,0]],["maxBitRate",Be,0],["avgBitRate",Be,0],["DecSpecificInfoShortTag",Oe,5],["DecSpecificInfoShortLength",Oe,2],["audioConfigBytes",Ie,0],["SLConfigDescrTag",Oe,6],["SLConfigDescrLength",Oe,1],["SLConfigDescrPredefined",Oe,2]]},stsz:{container:"stbl",mandatory:!0,quantity:"one",box:"FullBox",is_container:!1,body:[["sample_size",Be,0],["sample_count",Be,0]]},stsc:{container:"stbl",mandatory:!0,quantity:"one",box:"FullBox",is_container:!1,body:[["entry_count",Be,0]]},stco:{container:"stbl",mandatory:!0,quantity:"one",box:"FullBox",is_container:!1,body:[["entry_count",Be,0]]},stss:{container:"stbl",mandatory:!1,quantity:"one-",box:"FullBox",is_container:!1,body:[["entry_count",Be,0]]},edts:{container:"trak",mandatory:!1,quantity:"one-",box:"Box",is_container:!0},elst:{container:"edts",mandatory:!1,quantity:"one-",box:"FullBox",is_container:!1,body:[["entry_count",Be,1],["segment_duration",Be,0],["media_time",Be,4294967295],["media_rate_integer",Ie,1],["media_rate_fraction",Ie,0]]},mvex:{container:"moov",mandatory:!1,quantity:"one-",box:"Box",is_container:!0},mehd:{container:"mvex",mandatory:!1,quantity:"one-",box:"FullBox",is_container:!1,body:[["fragment_duration",Be,0]]},trex:{container:"mvex",mandatory:!0,quantity:"one+",box:"FullBox",is_container:!1,body:[["track_ID",Be,1],["default_sample_description_index",Be,1],["default_sample_duration",Be,0],["default_sample_size",Be,0],["default_sample_flags",Be,0]]},moof:{container:"file",mandatory:!1,quantity:"zero+",box:"Box",is_container:!1},mfhd:{container:"moof",mandatory:!0,quantity:"one",box:"FullBox",is_container:!1,body:[["sequence_number",Be,0]]},traf:{container:"moof",mandatory:!1,quantity:"zero+",box:"Box",is_container:!0},tfhd:{container:"traf",mandatory:!0,quantity:"one",box:"FullBox",is_container:!1,config:{flags:32},body:[["track_ID",Be,1],["default_sample_flags",Be,0]]},tfdt:{container:"traf",mandatory:!1,quantity:"one-",box:"FullBox",is_container:!1,config:{version:1},body:[["baseMediaDecodeTime",class extends Te{constructor(e=0){super(8),xe(this,"value",void 0),xe(this,"copy",((e,t)=>{const r=this.value/Re|0,n=this.value-r*Re;e.writeUInt32BE(r,t),e.writeUInt32BE(n,t+4)})),xe(this,"load",((e,t)=>{const r=e.readUInt32BE(t),n=e.readUInt32BE(t+4);this.value=r*Re+n})),this.value=e}},0]]},trun:{container:"traf",mandatory:!1,quantity:"zero+",box:"FullBox",is_container:!1,config:{flags:773},body:[["sample_count",Be,1],["data_offset",Be,0],["first_sample_flags",Be,0],["sample_duration",Be,0],["sample_size",Be,0]]},"....":{box:"Box",is_container:!1,body:[]},file:{box:"None",is_container:!0,mandatory:!0,quantity:"one"}};class Me extends Te{constructor(e,t){super(0),xe(this,"type",void 0),xe(this,"config",void 0),xe(this,"struct",void 0),this.type=e;const r=je[this.type];if(void 0===r)throw new Error(`unknown box type: ${e}`);this.config=Object.assign({},r.config,t);const n=class{static None(){return[]}static Box(e){return[["size",Be,0],["type",ke,e]]}static FullBox(e){return[].concat(this.Box(e),[["version",Oe,0],["flags",Le,0]])}}[r.box](this.type),i=r.body||[];this.struct=new Map;let o=0;for(const[e,t,r]of[].concat(n,i)){if(this.has(e))throw new Error("Trying to add existing key");let n=r;this.config[e]&&(n=this.config[e]);const i=new t(n);this.struct.set(e,{offset:o,element:i}),o+=i.byteLength}this.byteLength=o}element(e){const t=this.struct.get(e);if(void 0===t)throw new Error("invalid key");return t.element}set(e,t){this.element(e).value=t}get(e){return this.element(e).value}offset(e){const t=this.struct.get(e);if(void 0===t)throw new Error("invalid key");return t.offset}has(e){return this.struct.has(e)}add(e,t){if(this.has(e))throw new Error("Trying to add existing key");return this.struct.set(e,{offset:this.byteLength,element:t}),this.byteLength+=t.byteLength,this}buffer(){const e=Ee.allocUnsafe(this.byteLength);return this.copy(e),e}copy(e,t=0){this.set("size",this.byteLength);for(const r of this.struct.values())r.element.copy(e,t+r.offset)}load(e,t=0){for(const r of this.struct.values())void 0!==r.element.load&&r.element.load(e,t+r.offset)}format(e=0){const t=[" ".repeat(e)+`[${this.type}] (${this.byteLength})`];for(const[r,n]of this.struct){const i=n.element;void 0!==i.format?t.push(i.format(e+2)):t.push(" ".repeat(e+2)+`${r} = ${i.value} (${i.byteLength})`)}return t.join("\n")}print(e){console.warn(this.format(e))}}class De extends Me{constructor(e,t,...r){super(e,t),xe(this,"boxSize",void 0),this.boxSize=0,this.append(...r)}append(...e){for(const t of e)this.add("box_"+this.boxSize++,t);return this}parse(e){const t=[];for(;e.byteLength>0;){const r=new ke("....");r.load(e,4);const n=r.value,i=je[n];let o;if(void 0!==i){if(i.is_container){o=new De(n),o.load(e);const r=o.parse(e.slice(o.byteLength,o.get("size")));t.push(...r)}else if(o=new Me(n),o.load(e),"avcC"===n){const e=o.element("AVCProfileIndication").value.toString(16).padStart(2,0),r=o.element("profile_compatibility").value.toString(16).padStart(2,0),n=o.element("AVCLevelIndication").value.toString(16).padStart(2,0);t.push({type:"video",mime:`avc1.${e}${r}${n}`})}else if("esds"===n){const e=o.element("audioConfigBytes").value>>>11&31;t.push({type:"audio",mime:`mp4a.40.${e}`})}}else o=new Me("...."),o.load(e),o.type=o.get("type");this.append(o),e=e.slice(o.get("size"))}return t}}const Ne={1:"AAC Main",2:"AAC LC"},Fe={0:"96 kHz",1:"88.2 kHz",2:"64 kHz",3:"48 kHz",4:"44.1 kHz",5:"32 kHz",6:"24 kHz",7:"22.05 kHz",8:"16 kHz",9:"12 kHz",10:"11.025 kHz",11:"8 kHz",12:"7.35 kHz"},qe={1:"Mono",2:"Stereo"},$e=e=>{const t=e>>>11&31,r=e>>>3&15;return{coding:Ne[t]||`AAC (${t})`,samplingRate:Fe[e>>>7&15]||"unknown",channels:qe[r]||r.toString()}};function He(e,t){const r=e.replace(/[^A-Za-z0-9+/]/g,""),n=r.length,i=t?Math.ceil((3*n+1>>2)/t)*t:3*n+1>>2,o=new Uint8Array(i);let s,a,u=0,c=0;for(let e=0;e<n;e++)if(a=3&e,u|=((l=r.charCodeAt(e))>64&&l<91?l-65:l>96&&l<123?l-71:l>47&&l<58?l+4:43===l?62:47===l?63:0)<<18-6*a,3===a||n-e==1){for(s=0;s<3&&c<i;s++,c++)o[c]=u>>>(16>>>s&24)&255;u=0}var l;return o}function We(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class ze{constructor(e){We(this,"_buffer",void 0),We(this,"_dataView",void 0),We(this,"_offset",void 0),We(this,"_bitpos",void 0),We(this,"_byte",void 0),this._buffer=e,this._dataView=new DataView(this._buffer),this._offset=0,this._bitpos=0,this._byte=0}readUint8(e){return this._dataView.getUint8(e)}readUint16(e){return this._dataView.getUint16(e)}readUint32(e){return this._dataView.getUint32(e)}readNext(){const e=this.readUint8(this._offset);return this._offset+=1,e}readBits(e){if(e>32||0===e)throw new Error("length has to be between 0 - 31 bits");let t=0;for(let r=1;r<=e;++r)0===this._bitpos&&(this._byte=this.readNext()),t=t<<1|this._byte>>8-++this._bitpos&1,this._bitpos%=8;return t}readUnsignedExpGolomb(){let e=0;for(;1!==this.readBits(1);)e++;if(0===e)return 0;if(e>=31)throw new Error("read unsigned exponential Golomb: internal error");let t=this.readBits(e);return t|=1<<e,t-1}readSignedExpGolomb(){let e=this.readUnsignedExpGolomb();return e=1&e?e+1>>1:-(e>>1),e}size(){return this._buffer.byteLength}getUint8Array(){return new Uint8Array(this._buffer)}getArrayBuffer(){return this._buffer}}class Ge{constructor(e){var t,r;r=void 0,(t="reader")in this?Object.defineProperty(this,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[t]=r,this.reader=new ze(e)}parse(){this.reader.readNext();const e=this.reader.readNext();this.reader.readNext();const t=this.reader.readNext();if(this.reader.readUnsignedExpGolomb(),[100,110,122,244,44,83,86,118].includes(e)){const e=this.reader.readUnsignedExpGolomb();if(3===e&&this.reader.readBits(1),this.reader.readUnsignedExpGolomb(),this.reader.readUnsignedExpGolomb(),this.reader.readBits(1),this.reader.readBits(1))for(let t=0;t<(3!==e?8:12);t++)this.reader.readBits(1)}this.reader.readUnsignedExpGolomb();const r=this.reader.readUnsignedExpGolomb();if(0===r)this.reader.readUnsignedExpGolomb();else if(1===r){let e=0;this.reader.readBits(1),this.reader.readSignedExpGolomb(),this.reader.readSignedExpGolomb(),e=this.reader.readUnsignedExpGolomb();for(let t=0;t<e;t++)this.reader.readSignedExpGolomb()}this.reader.readUnsignedExpGolomb(),this.reader.readBits(1);const n=this.reader.readUnsignedExpGolomb(),i=this.reader.readUnsignedExpGolomb(),o=this.reader.readBits(1);this.reader.readBits(1);const s=this.reader.readBits(1);return{profile:e,level:t/10,width:16*(n+1)-2*(s?this.reader.readUnsignedExpGolomb():0)-2*(s?this.reader.readUnsignedExpGolomb():0),height:(2-o)*(i+1)*16-2*(s?this.reader.readUnsignedExpGolomb():0)-2*(s?this.reader.readUnsignedExpGolomb():0)}}}const Ve={66:"Baseline",77:"Main",100:"High"},Ye=e=>{const t=parseInt(e.substr(0,2),16),r=parseInt(e.substr(4,2),16);return{coding:"H.264",profile:Ve[t]||t.toString(),level:(r/10).toFixed(1)}};function Je(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Ke={"MPEG4-GENERIC":(e,t,r)=>{const n=Number(e.fmtp.parameters.bitrate)||32e4,i=parseInt(e.fmtp.parameters.config.substr(0,4),16),o=i>>>11&31;return{tkhd:{track_ID:r,creation_time:t,modification_time:t,width:0,height:0,volume:1},mdhd:{timescale:Number(e.rtpmap.clockrate),creation_time:t,modification_time:t,duration:0},hdlr:{handler_type:"soun",name:"SoundHandler\0"},mediaHeaderBox:new Me("smhd"),sampleEntryBox:new De("mp4a",{samplerate:e.rtpmap.clockrate<<16>>>0},new Me("esds",{audioConfigBytes:i,maxBitRate:n,avgBitRate:n})),defaultFrameDuration:1024,mime:`mp4a.40.${o}`,codec:$e(i)}},H264:(e,t,r)=>{const n=e.fmtp.parameters["profile-level-id"],i=e.fmtp.parameters["sprop-parameter-sets"].split(",").map(He),o=i.slice(0,1),s=i.slice(1),a=new Ge(o[0].buffer).parse();return{mediaHeaderBox:new Me("vmhd"),sampleEntryBox:new De("avc1",{width:a.width,height:a.height},new Me("avcC",{AVCProfileIndication:o[0][1],profile_compatibility:o[0][2],AVCLevelIndication:o[0][3],sequenceParameterSets:o,pictureParameterSets:s})),tkhd:{track_ID:r,creation_time:t,modification_time:t,width:a.width<<16,height:a.height<<16,volume:0},hdlr:{},mdhd:{timescale:e.rtpmap.clockrate,creation_time:t,modification_time:t,duration:0},defaultFrameDuration:void 0!==e.framerate&&e.framerate>0&&Number(e.rtpmap.clockrate)/Number(e.framerate)||3600,mime:`avc1.${n}`,codec:Ye(n)}}};class Xe{constructor(){Je(this,"trackIdMap",void 0),Je(this,"sequenceNumber",void 0),Je(this,"ntpPresentationTime",void 0),Je(this,"trackData",void 0),Je(this,"videoTrackId",void 0),this.trackIdMap={},this.sequenceNumber=0,this.ntpPresentationTime=0,this.trackData=[]}trak(e){const t=new De("trak"),r=new De("mdia"),n=new De("minf"),i=new De("dinf"),o=new De("dref"),s=new De("stbl");return o.set("entry_count",1),t.append(new Me("tkhd",e.tkhd),r.append(new Me("mdhd",e.mdhd),new Me("hdlr",e.hdlr),n.append(e.mediaHeaderBox,i.append(o.append(new Me("url "))),s.append(new De("stsd",void 0,e.sampleEntryBox),new Me("stts"),new Me("stsc"),new Me("stco"),new Me("stsz"),new Me("stss"))))),t}moov(e,t){const r=new De("moov");r.append(new Me("mvhd",{creation_time:t,modification_time:t,duration:0}));const n=new De("mvex");this.trackIdMap={},this.sequenceNumber=0,this.ntpPresentationTime=0;let i=0;return this.trackData=[],e.media.forEach((e=>{if(void 0===e.rtpmap)return;const o=e.rtpmap.payloadType,s=e.rtpmap.encodingName;if(console.log(`encoding ${s}, payloadType: ${o}, format: ${Ke[s]}`),void 0!==Ke[s]){this.trackIdMap[o]=++i,"video"===e.type.toLowerCase()&&(this.videoTrackId=i);const a=Ke[s](e,t,i);e.mime=a.mime,e.codec=a.codec;const u={lastTimestamp:0,baseMediaDecodeTime:0,defaultFrameDuration:0,clockrate:0,bitrate:0,framerate:0,cumulativeByteLength:0,cumulativeDuration:0,cumulativeFrames:0};u.clockrate=e.rtpmap.clockrate,u.defaultFrameDuration=a.defaultFrameDuration,this.trackData.push(u);const c=this.trak(a);r.append(c),n.append(new Me("trex",{track_ID:i}))}})),r.append(n),r}moof(e){const{trackId:t,timestamp:r,byteLength:n}=e,i=t-1,o=this.trackData[i],s=0!==o.lastTimestamp?r-o.lastTimestamp|0:o.defaultFrameDuration,a=s>0?s:o.defaultFrameDuration;o.lastTimestamp=s>0?r:o.lastTimestamp+a;const u=new De("moof"),c=new De("traf"),l=new Me("trun",{sample_duration:a,sample_size:n,first_sample_flags:64});return u.append(new Me("mfhd",{sequence_number:this.sequenceNumber++}),c.append(new Me("tfhd",{track_ID:t}),new Me("tfdt",{baseMediaDecodeTime:o.baseMediaDecodeTime}),l)),o.baseMediaDecodeTime+=a,l.set("data_offset",u.byteLength+8),((e,{byteLength:t,duration:r})=>{if(e.cumulativeByteLength+=t,e.cumulativeDuration+=r,e.cumulativeFrames++,e.cumulativeDuration>=e.clockrate){const t=8*e.cumulativeByteLength,r=e.cumulativeFrames,n=e.cumulativeDuration/e.clockrate;e.bitrate=t/n,e.framerate=r/n,e.cumulativeByteLength=0,e.cumulativeDuration=0,e.cumulativeFrames=0}})(o,{byteLength:n,duration:a}),u}mdat(e){const t=new Me("mdat");return t.add("data",e),t}setPresentationTime(e,t){if(!this.ntpPresentationTime&&t&&e===this.videoTrackId){const r=e-1,n=this.trackData[r];this.ntpPresentationTime=t-n.baseMediaDecodeTime/n.clockrate*1e3}}}var Ze=r(7866).Buffer;function Qe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class et extends h{constructor(){const e=new Xe,t=e=>{this.onSync&&this.onSync(e)};super(new o.Transform({objectMode:!0,transform:function(r,n,i){if(r.type===k.SDP){const t=Math.floor((new Date).getTime()/1e3+2082852e3),n=new Me("ftyp"),i=e.moov(r.sdp,t),o=Ze.allocUnsafe(n.byteLength+i.byteLength);n.copy(o,0),i.copy(o,n.byteLength),F()("msl:mp4:isom")(`ftyp: ${n.format()}`),F()("msl:mp4:isom")(`moov: ${i.format()}`);const s=r.sdp.media.map((e=>({type:e.type,encoding:e.rtpmap&&e.rtpmap.encodingName,mime:e.mime,codec:e.codec})));this.push({type:k.ISOM,data:o,tracks:s,ftyp:n,moov:i})}else if(r.type===k.ELEMENTARY||r.type===k.H264){const{payloadType:n,timestamp:i,ntpTimestamp:o}=r,s=e.trackIdMap[n];if(s){let n;e.ntpPresentationTime||(e.setPresentationTime(s,o),e.ntpPresentationTime&&t(e.ntpPresentationTime));const a=r.type===k.H264?r.nalType===$.IDR_PICTURE:void 0;e.ntpPresentationTime&&a&&void 0!==r.ntpTimestamp&&(n=(r.ntpTimestamp-e.ntpPresentationTime)/1e3);const u=r.data.byteLength,c=e.moof({trackId:s,timestamp:i,byteLength:u}),l=e.mdat(r.data),h=Ze.allocUnsafe(c.byteLength+l.byteLength);c.copy(h,0),l.copy(h,c.byteLength),this.push({type:k.ISOM,data:h,moof:c,mdat:l,ntpTimestamp:o,checkpointTime:n})}}else this.push(r);i()}})),Qe(this,"boxBuilder",void 0),Qe(this,"onSync",void 0),this.boxBuilder=e}get bitrate(){return this.boxBuilder.trackData&&this.boxBuilder.trackData.map((e=>e.bitrate))}get framerate(){return this.boxBuilder.trackData&&this.boxBuilder.trackData.map((e=>e.framerate))}get ntpPresentationTime(){return this.boxBuilder.ntpPresentationTime}}function tt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function rt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(r),!0).forEach((function(t){nt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function nt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let it;!function(e){e[e.SR=200]="SR",e[e.RR=201]="RR",e[e.SDES=202]="SDES",e[e.BYE=203]="BYE",e[e.APP=204]="APP"}(it||(it={}));const ot=e=>{const t=(e=>({version:e[0]>>>6,padding:!!(e[0]&d[2]),count:31&e[0],packetType:e.readUInt8(1),length:e.readUInt16BE(2)}))(e);switch(t.packetType){case it.SR:return ct(e,t);case it.RR:return ht(e,t);case it.SDES:return pt(e,t);case it.BYE:return gt(e,t);case it.APP:return bt(e,t);default:return t}},st=(e,t)=>({type:k.RTCP,data:t,channel:e,rtcp:ot(t)}),at={packetType:200},ut=(e,t,r)=>{const n=[];for(let i=0;i<e;i++){const e=r+24*i;n.push({syncSource:t.readUInt32BE(e+0),fractionLost:t.readUInt8(e+4),cumulativeNumberOfPacketsLost:t.readUIntBE(e+5,3),extendedHighestSequenceNumberReceived:t.readUInt32BE(e+8),interarrivalJitter:t.readUInt32BE(e+12),lastSRTimestamp:t.readUInt32BE(e+16),delaySinceLastSR:t.readUInt32BE(e+20)})}return n},ct=(e,t)=>rt(rt({},t),{},{syncSource:e.readUInt32BE(4),ntpMost:e.readUInt32BE(8),ntpLeast:e.readUInt32BE(12),rtpTimestamp:e.readUInt32BE(16),sendersPacketCount:e.readUInt32BE(20),sendersOctetCount:e.readUInt32BE(24),reports:ut(t.count,e,28)}),lt=e=>e.packetType===it.SR,ht=(e,t)=>rt(rt({},t),{},{syncSource:e.readUInt32BE(4),reports:ut(t.count,e,8)}),ft=e=>e.packetType===it.RR;let dt;!function(e){e[e.CNAME=1]="CNAME",e[e.NAME=2]="NAME",e[e.EMAIL=3]="EMAIL",e[e.PHONE=4]="PHONE",e[e.LOC=5]="LOC",e[e.TOOL=6]="TOOL",e[e.NOTE=7]="NOTE",e[e.PRIV=8]="PRIV"}(dt||(dt={}));const pt=(e,t)=>{const r=[];let n=4;for(let i=0;i<t.count;i++){const t={source:e.readUInt32BE(n),items:[]};for(n+=4;;){const r=e.readUInt8(n++);if(0===r){n%4!=0&&(n+=4-n%4);break}const i=e.readUInt8(n++);if(r===dt.PRIV){const r=e.readUInt8(n),o=e.toString("utf8",n+1,n+1+r),s=e.toString("utf8",n+1+r,n+i);t.items.push([dt.PRIV,o,s])}else{const o=e.toString("utf8",n,n+i);t.items.push([r,o])}n+=i}r.push(t)}return rt(rt({},t),{},{syncSource:e.readUInt32BE(4),sourceDescriptions:r})},mt=e=>e.packetType===it.SDES,gt=(e,t)=>{const r=[];for(let n=0;n<t.count;n++)r.push(e.readUInt32BE(4+4*n));let n;if(t.length>t.count){const r=4+4*t.count,i=e.readUInt8(r);n=e.toString("utf-8",r+1,r+1+i)}return rt(rt({},t),{},{sources:r,reason:n})},yt=e=>e.packetType===it.BYE,bt=(e,t)=>rt(rt({},t),{},{subtype:t.count,source:e.readUInt32BE(4),name:e.toString("ascii",8,12),data:e.slice(12)}),vt=e=>e.packetType===it.APP;function wt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const _t=F()("msl:mse");class St extends f{constructor(e){if(void 0===e)throw new Error("video element argument missing");let t,r;const n=new o.Writable({objectMode:!0,write:(i,o,s)=>{if(i.type===k.ISOM)if(this._done=s,void 0!==i.tracks||void 0!==i.mime){const o=i.tracks??[],s=o.map((e=>e.mime)).filter((e=>e)),a=0!==s.length?s.join(", "):"avc1.640029, mp4a.40.2",u=i.mime??`video/mp4; codecs="${a}"`;if(!MediaSource.isTypeSupported(u))return void n.emit("error",`unsupported media type: ${u}`);this._lastCheckpointTime=0,t=new MediaSource,e.src=window.URL.createObjectURL(t);const c=()=>{if(void 0!==t){window.URL.revokeObjectURL(e.src),t.removeEventListener("sourceopen",c),this.onSourceOpen&&this.onSourceOpen(t,o),r=this.addSourceBuffer(e,t,u),r.onerror=e=>{console.error("error on SourceBuffer: ",e),n.emit("error")};try{r.appendBuffer(i.data)}catch(e){_t("failed to append to SourceBuffer: ",e,i)}}else n.emit("error","no MediaSource instance")};t.addEventListener("sourceopen",c)}else{this._lastCheckpointTime=void 0!==i.checkpointTime?i.checkpointTime:this._lastCheckpointTime;try{var a;null===(a=r)||void 0===a||a.appendBuffer(i.data)}catch(e){_t("failed to append to SourceBuffer: ",e,i)}}else if(i.type===k.RTCP){var u;yt(i.rtcp)&&"open"===(null===(u=t)||void 0===u?void 0:u.readyState)&&t.endOfStream(),s()}else s()}});n.on("finish",(()=>{console.warn("incoming stream finished: end stream"),t&&"open"===t.readyState&&t.endOfStream()})),n.on("error",(e=>{var n;console.error("error on incoming stream: ",e),r&&r.updating?r.addEventListener("updateend",(()=>{var e;"open"===(null===(e=t)||void 0===e?void 0:e.readyState)&&t.endOfStream()})):"open"===(null===(n=t)||void 0===n?void 0:n.readyState)&&t.endOfStream()}));const i=new o.Readable({objectMode:!0,read:function(){}});i.on("error",(()=>{console.warn("outgoing stream broke somewhere")})),super(n,i),wt(this,"_videoEl",void 0),wt(this,"_done",void 0),wt(this,"_lastCheckpointTime",void 0),wt(this,"onSourceOpen",void 0),this._videoEl=e,this._lastCheckpointTime=0}addSourceBuffer(e,t,r){const n=t.addSourceBuffer(r);let i=0;return n.addEventListener("updateend",(()=>{if(++i,i>100&&n.buffered.length){i=0;const t=n.buffered.length-1,r=n.buffered.start(t),o=Math.min(e.currentTime,this._lastCheckpointTime)-10;try{if(o>r)return void n.remove(r,o)}catch(e){console.warn(e)}}this._done&&this._done()})),n}get currentTime(){return this._videoEl.currentTime}async play(){return await this._videoEl.play()}pause(){return this._videoEl.pause()}}var Et=r(7866).Buffer;class xt extends h{constructor(){let e,t=[];super(new o.Transform({objectMode:!0,transform:function(r,n,i){if(r.type===k.SDP){let t;for(const e of r.sdp.media)"application"===e.type&&e.rtpmap&&"VND.ONVIF.METADATA"===e.rtpmap.encodingName&&(t=e);t&&t.rtpmap&&(e=Number(t.rtpmap.payloadType)),i(void 0,r)}else if(r.type===k.RTP&&w(r.data)===e){if(t.push(C(r.data)),v(r.data)&&t.length>0)return i(void 0,{timestamp:S(r.data),ntpTimestamp:r.ntpTimestamp,payloadType:w(r.data),data:Et.concat(t),type:k.XML}),void(t=[]);i()}else i(void 0,r)}}))}}var Rt=r(7866).Buffer;const Tt=e=>e.match(/^m=/),Ct=(e,t)=>{const r=t.indexOf(e);return r<0?[t.slice(0)]:[t.slice(0,r),t.slice(r+1)]},kt={fmtp:e=>{const[t,r]=Ct(" ",e);{const e=r.trim().split(";"),n={};return e.forEach((e=>{const[t,r]=Ct("=",e),i=t.trim().toLowerCase();""!==i&&(n[i]=r.trim())})),{format:t,parameters:n}}},framerate:Number,rtpmap:e=>{const[t,r]=Ct(" ",e),[n,i,o]=r.toUpperCase().split("/");return void 0===o?{payloadType:Number(t),encodingName:n,clockrate:Number(i)}:{payloadType:Number(t),encodingName:n,clockrate:Number(i),encodingParameters:o}},transform:e=>e.split(";").map((e=>e.split(",").map(Number))),"x-sensor-transform":e=>e.split(";").map((e=>e.split(",").map(Number))),framesize:e=>e.split(" ")[1].split("-").map(Number)},Ot=e=>{const t=e.slice(0,1),r=e.slice(2);switch(t){case"v":return{version:r};case"o":const[e,t,n,i,o,s]=r.split(" ");return{origin:{addrType:o,netType:i,sessionId:t,sessionVersion:n,unicastAddress:s,username:e}};case"s":return{sessionName:r};case"i":return{sessionInformation:r};case"u":return{uri:r};case"e":return{email:r};case"p":return{phone:r};case"c":const[a,u,c]=r.split(" ");return{connectionData:{addrType:u,connectionAddress:c,netType:a}};case"b":const[l,h]=r.split(":");return{bwtype:l,bandwidth:h};case"t":const[f,d]=r.split(" ").map(Number);return{time:{startTime:f,stopTime:d}};case"r":const[p,m,...g]=r.split(" ").map(Number);return{repeatTimes:{repeatInterval:p,activeDuration:m,offsets:g}};case"z":case"k":return;case"a":return(e=>{const[t,r]=Ct(":",e);return void 0===r?{[t]:!0}:void 0!==kt[t]?{[t]:kt[t](r)}:{[t]:r}})(r);case"m":const[y,b,v,w]=r.split(" ");return{type:y,port:Number(b),protocol:v,fmt:Number(w)}}},Pt=e=>{const t=e.indexOf("\nm=");return((e,t,r=0)=>{const n=`\n${"a=control:"}`;r=e.indexOf(n,r);let i=0;const o=[];for(;r>=0;)i=e.indexOf("\n",r+n.length),o.push(e.toString("ascii",r+n.length,i).trim()),r=e.indexOf(n,i);return o})(e,0,t)},It=e=>{const t=e.toString("ascii").split("\n").map((e=>e.trim())),r={session:{},media:[]};let n=0,i=r.session;for(const e of t)Tt(e)&&(r.media[n]={},i=r.media[n],++n),i=Object.assign(i,Ot(e));return r},Lt=e=>({type:k.SDP,data:e,sdp:It(e)}),Bt=(e,t)=>{const r=`\n${t.toLowerCase()}: `,n=e.toString().toLowerCase().indexOf(r);if(n>=0){const t=e.indexOf("\n",n+r.length);return e.toString("ascii",n+r.length,t).trim()}return null},At=e=>{const t=Bt(e,"CSeq");return null!==t?Number(t):null},Ut=e=>{const t=Bt(e,"Session");return t?t.split(";")[0]:null},jt=e=>{const t=Bt(e,"Session");if(null===t)return null;const r="timeout=",n=t.toLowerCase().indexOf(r);if(-1!==n){let e=t.substring(n+r.length);e=e.split(";")[0];const i=parseInt(e);return isNaN(i)?60:i}return 60},Mt=e=>Number(e.toString("ascii",9,12)),Dt=e=>Bt(e,"Content-Base"),Nt=e=>Bt(e,"Content-Location"),Ft=e=>{const t=Bt(e,"Connection");return null!==t&&"close"===t.toLowerCase()},qt=e=>{const t=Bt(e,"Range");if(null!==t)return t.split("=")[1].split("-")},$t=e=>{const t=["\n\n","\r\r","\r\n\r\n"].map((t=>{const r=e.indexOf(t);return-1!==r?r+t.length:r})).filter((e=>-1!==e));return t.length>0?t.reduce(((e,t)=>Math.min(e,t))):-1};var Ht,Wt=r(7866).Buffer;function zt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}!function(e){e[e.IDLE=0]="IDLE",e[e.INTERLEAVED=1]="INTERLEAVED",e[e.RTSP=2]="RTSP"}(Ht||(Ht={}));class Gt{constructor(){zt(this,"_chunks",[]),zt(this,"_length",0),zt(this,"_state",Ht.IDLE),zt(this,"_packet",void 0),this._init()}_init(){this._chunks=[],this._length=0,this._state=Ht.IDLE}_push(e){this._chunks.push(e),this._length+=e.length}_parseRtsp(){const e=[],t=Wt.concat(this._chunks),r=$t(t);if(-1===r)return e;const n=r,i=Bt(t,"Content-Length");if(i&&parseInt(i)>t.length-n)return e;if(this._init(),n===t.length||36===t[n]){const r=t.slice(0,n);e.push({type:k.RTSP,data:r});const i=t.slice(n);this._push(i)}else{const r=t,i=t.slice(n);e.push({type:k.RTSP,data:r}),e.push(Lt(i))}return e}_parseInterleaved(){const e=[];if(this._length<4)return e;if(this._packet||(this._packet=(e=>{const t=Wt.alloc(4);let r=0,n=0;for(;n<t.length;){const i=e[r++],o=Math.min(i.length,t.length-n);i.copy(t,n,0,o),n+=o}const i=t[1],o=t.length;return{channel:i,begin:o,end:o+t.readUInt16BE(2)}})(this._chunks)),this._length<this._packet.end)return e;const t=Wt.concat(this._chunks),r=t.slice(this._packet.begin,this._packet.end),n=t.slice(this._packet.end),i=this._packet.channel;if(delete this._packet,this._init(),this._push(n),i%2==0)e.push({type:k.RTP,data:r,channel:i});else{let t=r;do{const r=4*t.readUInt16BE(2)+4;e.push(st(i,t.slice(0,r))),t=t.slice(r)}while(t.length>0)}return e}_setState(){for(;this._chunks.length>0&&0===this._chunks[0].length;)this._chunks.shift();const e=this._chunks[0];if(0===this._chunks.length)this._state=Ht.IDLE;else if(36===e[0])this._state=Ht.INTERLEAVED;else{if("RTSP"!==e.toString("ascii",0,4))throw new Error(`Unknown chunk of length ${e.length}`);this._state=Ht.RTSP}}parse(e){this._push(e),this._state===Ht.IDLE&&this._setState();let t=[],r=!1;for(;!r;){let e=[];switch(this._state){case Ht.IDLE:break;case Ht.INTERLEAVED:e=this._parseInterleaved();break;case Ht.RTSP:e=this._parseRtsp();break;default:throw new Error("internal error: unknown state")}e.length>0?t=t.concat(e):r=!0,this._setState()}return t}}class Vt extends h{constructor(){const e=new Gt,t=new o.Transform({objectMode:!0,transform:function(r,n,i){if(r.type===k.RAW)try{e.parse(r.data).forEach((e=>t.push(e))),i()}catch(e){i(e)}else i(void 0,r)}}),r=new o.Transform({objectMode:!0,transform:function(e,t,r){if(e.type===k.RTSP){const t=(e=>{if(!e.method||!e.uri)throw new Error("message needs to contain a method and a uri");const t=e.protocol||"RTSP/1.0",r=e.headers||{},n=[`${e.method} ${e.uri} ${t}`,Object.entries(r).map((([e,t])=>e+": "+t)).join("\r\n"),"\r\n"].join("\r\n");return F()("msl:rtsp:outgoing")(n),Rt.from(n)})(e);r(void 0,{type:k.RAW,data:t})}else r(void 0,e)}});super(t,r)}}const Yt=(e,t)=>{let r;if(void 0!==t){if("object"!=typeof t)throw new Error("merge expects override to be an object!");r=Object.keys(t).reduce(((e,r)=>(void 0!==t[r]&&(e[r]=t[r]),e)),{})}return Object.assign({},e,r)},Jt=Date.UTC(1900,0,1);function Kt(e,t){return Jt+1e3*(e+t/4294967296)}var Xt,Zt=r(7866).Buffer;function Qt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let er;!function(e){e.IDLE="idle",e.PLAYING="playing",e.PAUSED="paused"}(Xt||(Xt={})),function(e){e.OPTIONS="OPTIONS",e.DESCRIBE="DESCRIBE",e.SETUP="SETUP",e.PLAY="PLAY",e.PAUSE="PAUSE",e.TEARDOWN="TEARDOWN"}(er||(er={}));class tr extends Error{constructor(e,t){super(e),Qt(this,"code",void 0),this.name="RTSPResponseError",this.code=t}}class rr extends h{constructor(e={}){const{uri:t,headers:r,defaultHeaders:n}=Yt(((e=("undefined"==typeof window?"":window.location.hostname),t=[])=>({uri:t.length>0?`rtsp://${e}/axis-media/media.amp?${t.join("&")}`:`rtsp://${e}/axis-media/media.amp`}))(e.hostname,e.parameters),e),i=new o.Transform({objectMode:!0,transform:(e,t,r)=>{e.type===k.RTSP?(this._onRtsp(e),r()):e.type===k.RTCP?(this._onRtcp(e),this.onRtcp&&this.onRtcp(e.rtcp),r(void 0,e)):e.type===k.RTP?(this._onRtp(e),r(void 0,e)):e.type===k.SDP?(this._onSdp(e),this.onSdp&&this.onSdp(e.sdp),r(void 0,e)):r(void 0,e)}});i.on("end",(()=>{this._outgoingClosed=!0})),super(i),Qt(this,"uri",void 0),Qt(this,"headers",void 0),Qt(this,"defaultHeaders",void 0),Qt(this,"t0",void 0),Qt(this,"n0",void 0),Qt(this,"clockrates",void 0),Qt(this,"startTime",void 0),Qt(this,"onRtcp",void 0),Qt(this,"onSdp",void 0),Qt(this,"onError",void 0),Qt(this,"onPlay",void 0),Qt(this,"retry",void 0),Qt(this,"_outgoingClosed",void 0),Qt(this,"_sequence",void 0),Qt(this,"_callStack",void 0),Qt(this,"_callHistory",void 0),Qt(this,"_state",void 0),Qt(this,"_waiting",void 0),Qt(this,"_contentBase",void 0),Qt(this,"_contentLocation",void 0),Qt(this,"_sessionId",void 0),Qt(this,"_sessionControlURL",void 0),Qt(this,"_renewSessionInterval",void 0),this._outgoingClosed=!1,this._reset(),this.update(t,r,n),this._sessionControlURL=this._controlURL()}update(e,t={},r={}){if(void 0===e)throw new Error("You must supply an uri when creating a RtspSessionComponent");this.uri=e,this.defaultHeaders=r,this.headers=Object.assign({[er.OPTIONS]:{},[er.PLAY]:{},[er.SETUP]:{Blocksize:"64000"},[er.DESCRIBE]:{Accept:"application/sdp"},[er.PAUSE]:{}},t)}_reset(){this._sequence=1,this.retry=()=>console.error("No request sent, can't retry"),this._callStack=[],this._callHistory=[],this._state=Xt.IDLE,this._waiting=!1,this._contentBase=null,this._sessionId=null,null!==this._renewSessionInterval&&clearInterval(this._renewSessionInterval),this._renewSessionInterval=null,this.t0=void 0,this.n0=void 0,this.clockrates=void 0}_controlURL(e){if(void 0!==e&&/^[^:]+:\/\//.test(e))return e;const t=this._contentBase??this._contentLocation??this.uri;if(null==t)throw new Error("relative or missing control attribute but no base URL available");return void 0===e||"*"===e?t:new URL(e,t).href}_onRtsp(e){this._waiting=!1;const t=Mt(e.data),r=Ft(e.data),n=At(e.data);if(null===n)throw new Error("rtsp: expected sequence number");if(void 0===this._callHistory)throw new Error("rtsp: internal error");const i=this._callHistory[n-1];if(F()("msl:rtsp:incoming")(`${e.data}`),!this._sessionId&&!r){this._sessionId=Ut(e.data);const t=jt(e.data);null!==t&&(null!==this._renewSessionInterval&&clearInterval(this._renewSessionInterval),this._renewSessionInterval=setInterval((()=>{this._enqueue({method:er.OPTIONS}),this._dequeue()}),1e3*Math.max(5,t-5)))}this._contentBase||(this._contentBase=Dt(e.data)),this._contentLocation||(this._contentLocation=Nt(e.data)),t>=400&&this.onError&&this.onError(new tr(e.data.toString("ascii"),t)),i===er.PLAY&&this.onPlay&&this.onPlay(qt(e.data)),r&&(F()("msl:rtsp:incoming")(`RTSP Session ${this._sessionId} ended with statusCode: ${t}`),this._sessionId=null),this._dequeue()}_onRtcp(e){if(void 0===this.t0||void 0===this.n0)throw new Error("rtsp: internal error");if(lt(e.rtcp)){const t=e.channel-1;this.t0[t]=e.rtcp.rtpTimestamp,this.n0[t]=Kt(e.rtcp.ntpMost,e.rtcp.ntpLeast)}}_onRtp(e){if(void 0===this.t0||void 0===this.n0||void 0===this.clockrates)throw new Error("rtsp: internal error");const t=e.channel,r=this.t0[t],n=this.n0[t];if(void 0!==r&&void 0!==n){const i=this.clockrates[t],o=S(e.data)-r|0;e.ntpTimestamp=o/i*1e3+n}}_onSdp(e){this.n0={},this.t0={},this.clockrates={},this._sessionControlURL=this._controlURL(e.sdp.session.control),e.sdp.media.forEach(((e,t)=>{if(void 0===e.rtpmap)return;const{clockrate:r}=e.rtpmap,n=2*t,i=n+1,o=void 0===e.control?this._sessionControlURL:this._controlURL(e.control);this._enqueue({method:er.SETUP,headers:{Transport:"RTP/AVP/TCP;unicast;interleaved="+n+"-"+i},uri:o}),void 0!==this.clockrates&&(this.clockrates[n]=r)})),this._state===Xt.PLAYING&&this._enqueue({method:er.PLAY,headers:{Range:`npt=${this.startTime||0}-`},uri:this._sessionControlURL}),this._dequeue()}play(e=0){if(this._state===Xt.IDLE)this.startTime=Number(e)||0,this._enqueue({method:er.OPTIONS}),this._enqueue({method:er.DESCRIBE});else if(this._state===Xt.PAUSED){if(null===this._sessionId||void 0===this._sessionId)throw new Error("rtsp: internal error");this._enqueue({method:er.PLAY,headers:{Session:this._sessionId},uri:this._sessionControlURL})}this._state=Xt.PLAYING,this._dequeue()}pause(){this._enqueue({method:er.PAUSE}),this._state=Xt.PAUSED,this._dequeue()}stop(){this._sessionId?this._enqueue({method:er.TEARDOWN}):this._callStack=[],this._state=Xt.IDLE,null!==this._renewSessionInterval&&(clearInterval(this._renewSessionInterval),this._renewSessionInterval=null),this._dequeue()}send(e){const{method:t,headers:r,uri:n}=e;if(void 0===t)throw new Error("missing method when send request");if(this._waiting=!0,this.retry=this.send.bind(this,e),void 0===this._sequence||void 0===this.headers||void 0===this._callHistory)throw new Error("rtsp: internal error");const i=Object.assign({type:k.RTSP,uri:n||this._sessionControlURL,data:Zt.alloc(0)},{method:t,headers:r},{headers:Object.assign({CSeq:this._sequence++},this.defaultHeaders,this.headers[t],r)});this._sessionId&&(i.headers.Session=this._sessionId),this._callHistory.push(t),this._outgoingClosed?F()("msl:rtsp:outgoing")(`Unable to send ${t}, connection closed`):this.outgoing.push(i)}_enqueue(e){if(void 0===this._callStack)throw new Error("rtsp: internal error");this._callStack.push(e)}_dequeue(){if(void 0===this._callStack)throw new Error("rtsp: internal error");if(!this._waiting&&this._callStack.length>0){const e=this._callStack.shift();void 0!==e&&this.send(e)}}}const nr=async(e={})=>{const{uri:t,tokenUri:r,protocol:n,timeout:i}=Yt(((e=window.location.host,t=window.location.protocol)=>({uri:`${"https:"===t?"wss:":"ws:"}//${e}/rtsp-over-websocket`,tokenUri:`${t}//${e}/axis-cgi/rtspwssession.cgi`,protocol:"binary",timeout:10007}))(e.host,e.scheme),e);if(void 0===t)throw new Error("ws: internal error");return await new Promise(((e,o)=>{try{const s=new WebSocket(t,n),a=setTimeout((()=>{clearTimeout(a),s.readyState===WebSocket.CONNECTING&&(s.onerror=null,o(new Error("websocket connection timed out")))}),i);s.binaryType="arraybuffer",s.onerror=i=>{clearTimeout(a);const s=new XMLHttpRequest;s.addEventListener("load",(function(){if(this.status>=400)return console.warn("failed to load token",this.status,this.responseText),void o(i);const r=this.responseText.trim(),s=new WebSocket(`${t}?rtspwssession=${r}`,n);s.binaryType="arraybuffer",s.onerror=e=>{o(e)},s.onopen=()=>e(s)})),s.addEventListener("error",(e=>{console.warn("failed to get token"),o(e)})),s.addEventListener("abort",(()=>o(i))),s.open("GET",`${r}?${Date.now()}`);try{s.send()}catch(e){o(i)}},s.onopen=()=>{clearTimeout(a),e(s)}}catch(e){o(e)}}))};var ir=r(7866).Buffer;class or extends l{constructor(e){if(void 0===e)throw new Error("socket argument missing");const t=new o.Readable({objectMode:!0,read:function(){}});e.onmessage=r=>{const n=ir.from(r.data);t.push({data:n,type:k.RAW})||e.readyState===WebSocket.OPEN&&(F()("msl:websocket:incoming")("downstream frozen"),e.close())},t.on("error",(t=>{console.warn("closing socket due to incoming error",t),e.close()}));const r=new o.Writable({objectMode:!0,write:function(t,r,n){try{e.send(t.data)}catch(e){console.warn("message lost during send:",t)}n()}});var n,i;r.on("error",(e=>{console.warn("error during websocket send, ignoring:",e)})),r.on("finish",(()=>{F()("msl:websocket:outgoing")("finish"),e.readyState!==WebSocket.CLOSED&&e.close()})),e.onclose=e=>{F()("msl:websocket:close")(`${e.code}`),1001===e.code&&this.onServerClose&&this.onServerClose(),t.push(null),r.end()},super(t,r),i=void 0,(n="onServerClose")in this?Object.defineProperty(this,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):this[n]=i}static async open(e){return await nr(e).then((e=>new or(e)))}}function sr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class ar{constructor(...e){sr(this,"firstComponent",void 0),sr(this,"lastComponent",void 0),sr(this,"_set",void 0);const[t,...r]=e;this._set=new Set(e),this.firstComponent=t,this.lastComponent=r.reduce(((e,t)=>e.connect(t)),t)}init(...e){const[t,...r]=e;this._set=new Set(e),this.firstComponent=t,this.lastComponent=r.reduce(((e,t)=>e.connect(t)),t)}insertAfter(e,t){if(!this._set.has(e))throw new Error("insertion point not part of pipeline");if(this._set.has(t))throw new Error("new component already in the pipeline");const r=e.next;return null===r?(e.connect(t),this.lastComponent=t):(e.disconnect(),e.connect(t).connect(r)),this._set.add(t),this}insertBefore(e,t){if(!this._set.has(e))throw new Error("insertion point not part of pipeline");if(this._set.has(t))throw new Error("new component already in the pipeline");const r=e.prev;return null===r?(t.connect(e),this.firstComponent=t):(r.disconnect(),r.connect(t).connect(e)),this._set.add(t),this}remove(e){if(!this._set.has(e))throw new Error("component not part of pipeline");const t=e.prev,r=e.next;if(null===t&&null===r)throw new Error("cannot remove last component");return null===t&&null!==r?(e.disconnect(),this.firstComponent=r):null!==t&&null===r?(t.disconnect(),this.lastComponent=t):null!==t&&null!==r&&(t.disconnect(),e.disconnect(),t.connect(r)),this._set.delete(e),this}append(...e){return e.forEach((e=>{this.insertAfter(this.lastComponent,e)})),this}prepend(...e){return e.forEach((e=>{this.insertBefore(this.firstComponent,e)})),this}}function ur(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class cr extends ar{constructor(e){const t=new Vt,r=new rr(e);r.onSdp=e=>{this.onSdp&&this.onSdp(e)},r.onPlay=e=>{this.onPlay&&this.onPlay(e)},super(t,r),ur(this,"onSdp",void 0),ur(this,"onPlay",void 0),ur(this,"rtsp",void 0),this.rtsp=r}}function lr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class hr extends cr{constructor(e){super(e),lr(this,"onSync",void 0),lr(this,"_mp4Muxer",void 0);const t=new J,r=new P,n=new et;n.onSync=e=>{this.onSync&&this.onSync(e)},this.append(t,r,n),this._mp4Muxer=n}get bitrate(){return this._mp4Muxer.bitrate}get framerate(){return this._mp4Muxer.framerate}}class fr extends cr{constructor(e){super(e);const t=new ve;this.append(t)}}var dr=r(2993);function pr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class mr{constructor(e,t,r){pr(this,"realm",void 0),pr(this,"nonce",void 0),pr(this,"opaque",void 0),pr(this,"algorithm",void 0),pr(this,"qop",void 0),pr(this,"username",void 0),pr(this,"ha1Base",void 0),pr(this,"count",void 0),pr(this,"nc",(()=>(++this.count,this.count.toString(16).padStart(8,"0")))),pr(this,"cnonce",(()=>new Array(4).fill(0).map((()=>Math.floor(256*Math.random()))).map((e=>e.toString(16))).join(""))),pr(this,"ha1",(e=>{let t=this.ha1Base;return"md5-sess"===this.algorithm&&(t=(new dr.V).appendStr(`${t}:${this.nonce}:${e}`).end().toString()),t})),pr(this,"ha2",((e,t,r="")=>{let n=(new dr.V).appendStr(`${e}:${t}`).end().toString();if("md5-sess"===this.algorithm){const i=(new dr.V).appendStr(r).end().toString();n=(new dr.V).appendStr(`${e}:${t}:${i}`).end().toString()}return n})),pr(this,"authorization",((e="GET",t="",r)=>{const n=this.nc(),i=this.cnonce(),o=this.ha1(i),s=this.ha2(e,t,r),a=void 0===this.qop?(new dr.V).appendStr(`${o}:${this.nonce}:${s}`).end().toString():(new dr.V).appendStr(`${o}:${this.nonce}:${n}:${i}:${this.qop}:${s}`).end().toString(),u=[];return u.push(`username="${this.username}"`),u.push(`realm="${this.realm}"`),u.push(`nonce="${this.nonce}"`),u.push(`uri="${t}"`),void 0!==this.qop&&(u.push(`qop=${this.qop}`),u.push(`nc=${n}`),u.push(`cnonce="${i}"`)),u.push(`response="${a}"`),void 0!==this.opaque&&u.push(`opaque="${this.opaque}"`),`Digest ${u.join(", ")}`}));const n=e.get("realm");if(void 0===n)throw new Error("no realm in digest challenge");this.realm=n,this.ha1Base=(new dr.V).appendStr(`${t}:${n}:${r}`).end().toString();const i=e.get("nonce");if(void 0===i)throw new Error("no nonce in digest challenge");this.nonce=i,this.opaque=e.get("opaque");const o=e.get("algorithm");void 0!==o?"md5"===o?this.algorithm="md5":"md5-sess"===o&&(this.algorithm="md5-sess"):this.algorithm="md5";const s=e.get("qop");if(void 0!==s){const e=s.split(",").map((e=>e.trim()));e.some((e=>"auth"===e))?this.qop="auth":e.some((e=>"auth-int"===e))&&(this.qop="auth-int")}this.count=0,this.username=t}}var gr=r(7866).Buffer;const yr={username:"root",password:"pass"};class br extends h{constructor(e={}){const{username:t,password:r}=Yt(yr,e);if(void 0===t||void 0===r)throw new Error("need username and password");let n,i;const o=O((function(e,t,r){e.type===k.RTSP&&(n=e,i&&e.headers&&(e.headers.Authorization=i)),r(void 0,e)}));super(O((function(e,s,a){if(e.type===k.RTSP&&401===Mt(e.data)){const s=e.data.toString().split("\n").find((e=>/WWW-Auth/i.test(e)));if(void 0===s)throw new Error("cannot find WWW-Authenticate header");const u=(e=>{const[,t,...r]=e.split(" "),n=[],i=/\s*([^=]+)="([^"]*)",?/gm;let o;do{if(o=i.exec(r.join(" ")),null!==o){const[,e,t]=o;n.push([e,t])}}while(null!==o);const s=new Map(n);return{type:t.toLowerCase(),params:s}})(s);if("basic"===u.type)i="Basic "+gr.from(t+":"+r).toString("base64");else{if("digest"!==u.type)return;{const e=new mr(u.params,t,r);i=e.authorization(n.method,n.uri)}}o.write(n,(()=>a()))}else a(void 0,e)})),o)}}function vr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class wr extends fr{constructor(e){const{ws:t,rtsp:r,mediaElement:n,auth:i}=e;if(super(r),vr(this,"onCanplay",void 0),vr(this,"onSync",void 0),vr(this,"onServerClose",void 0),vr(this,"ready",void 0),vr(this,"_src",void 0),vr(this,"_sink",void 0),i){const e=new br(i);this.insertBefore(this.rtsp,e)}const o=new D(n);o.onCanplay=()=>{o.play(),this.onCanplay&&this.onCanplay()},o.onSync=e=>{this.onSync&&this.onSync(e)},this.append(o),this._sink=o;const s=or.open(t);this.ready=s.then((e=>{e.onServerClose=()=>{this.onServerClose&&this.onServerClose()},this.prepend(e),this._src=e}))}close(){this._src&&this._src.outgoing.end()}get currentTime(){return this._sink.currentTime}play(){return this._sink.play()}pause(){return this._sink.pause()}get bitrate(){return this._sink.bitrate}get framerate(){return this._sink.framerate}}function _r(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Sr extends hr{constructor(e){const{ws:t,rtsp:r,mediaElement:n,auth:i}=e;if(super(r),_r(this,"onSourceOpen",void 0),_r(this,"onServerClose",void 0),_r(this,"ready",void 0),_r(this,"tracks",void 0),_r(this,"_src",void 0),_r(this,"_sink",void 0),i){const e=new br(i);this.insertBefore(this.rtsp,e)}const o=new St(n);o.onSourceOpen=(e,t)=>{this.tracks=t,this.onSourceOpen&&this.onSourceOpen(e,t)},this.append(o),this._sink=o;const s=or.open(t);this.ready=s.then((e=>{e.onServerClose=()=>{this.onServerClose&&this.onServerClose()},this.prepend(e),this._src=e}))}close(){this._src&&this._src.outgoing.end()}get currentTime(){return this._sink.currentTime}async play(){return await this._sink.play()}pause(){return this._sink.pause()}}class Er extends Sr{constructor(e){const{metadataHandler:t}=e;super(e);const r=new xt;this.insertAfter(this.rtsp,r);const n=h.fromHandlers((e=>{e.type===k.XML&&t(e)}),void 0);this.insertAfter(r,n)}}function xr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Rr={parameters:["audio=0","video=0","event=on","ptz=all"]};class Tr extends cr{constructor(e){const{ws:t,rtsp:r,metadataHandler:n}=e;super(Object.assign({},Rr,r)),xr(this,"onServerClose",void 0),xr(this,"ready",void 0),xr(this,"_src",void 0);const i=new xt;this.append(i);const o=f.fromHandler((e=>{e.type===k.XML&&n(e)}));this.append(o);const s=or.open(t);this.ready=s.then((e=>{e.onServerClose=()=>{this.onServerClose&&this.onServerClose()},this.prepend(e),this._src=e}))}close(){this._src&&this._src.outgoing.end()}}function Cr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class kr extends cr{constructor(e){const{ws:t,rtsp:r,auth:n}=e;if(super(r),Cr(this,"onServerClose",void 0),Cr(this,"ready",void 0),Cr(this,"_src",void 0),n){const e=new br(n);this.insertBefore(this.rtsp,e)}const i=or.open(t);this.ready=i.then((e=>{e.onServerClose=()=>{this.onServerClose&&this.onServerClose()},this.prepend(e),this._src=e}))}close(){this._src&&this._src.outgoing.end()}get sdp(){return this.ready.then((async()=>{const e=new Promise((e=>{this.rtsp.onSdp=e}));return this.rtsp.send({method:er.DESCRIBE}),this.rtsp.send({method:er.TEARDOWN}),e}))}}var Or=r(7866).Buffer;function Pr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ir(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Lr=F()("msl:http-mp4");class Br extends l{constructor(e){const{uri:t,options:r}=e,n=new o.Readable({objectMode:!0,read:function(){}});n.on("error",(e=>{console.warn("closing socket due to incoming error",e),this._reader&&this._reader.cancel()})),super(n),Ir(this,"uri",void 0),Ir(this,"options",void 0),Ir(this,"length",void 0),Ir(this,"onHeaders",void 0),Ir(this,"onServerClose",void 0),Ir(this,"_reader",void 0),Ir(this,"_abortController",void 0),Ir(this,"_allDone",void 0),n._read=()=>{this._pull()},this.uri=t,this.options=r,this._allDone=!1}play(){if(void 0===this.uri)throw new Error("cannot start playing when there is no URI");this._abortController=new AbortController,this.length=0,fetch(this.uri,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Pr(Object(r),!0).forEach((function(t){Ir(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({credentials:"include",signal:this._abortController.signal},this.options)).then((e=>{if(null===e.body)throw new Error("empty response body");const t=e.headers.get("Content-Type");this.incoming.push({data:Or.alloc(0),type:k.ISOM,mime:t}),this.onHeaders&&this.onHeaders(e.headers),this._reader=e.body.getReader(),this._pull()})).catch((e=>{console.error("http-source: fetch failed: ",e)}))}abort(){this._reader&&this._reader.cancel().catch((e=>{console.log("http-source: cancel reader failed: ",e)})),this._abortController&&this._abortController.abort()}_isClosed(){return this._allDone}_close(){var e;this._reader=void 0,this._allDone=!0,this.incoming.push(null),null===(e=this.onServerClose)||void 0===e||e.call(this)}_pull(){void 0!==this._reader&&this._reader.read().then((({done:e,value:t})=>{if(e)return void(this._isClosed()||(Lr("fetch completed, total downloaded: ",this.length," bytes"),this._close()));if(void 0===t)throw new Error("expected value to be defined");if(void 0===this.length)throw new Error("expected length to be defined");this.length+=t.length;const r=Or.from(t);this.incoming.push({data:r,type:k.ISOM})?this._pull():Lr("downstream back pressure: pausing read")})).catch((e=>{Lr("http-source: read failed: ",e),this._isClosed()||this._close()}))}}function Ar(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Ur extends ar{constructor(e){const{http:t,mediaElement:r}=e,n=new Br(t),i=new St(r);n.onHeaders=e=>{this.onHeaders&&this.onHeaders(e)},n.onServerClose=()=>{var e;return null===(e=this.onServerClose)||void 0===e?void 0:e.call(this)},super(n,i),Ar(this,"onHeaders",void 0),Ar(this,"onServerClose",void 0),Ar(this,"http",void 0),Ar(this,"_src",void 0),Ar(this,"_sink",void 0),this._src=n,this._sink=i,this.http=n}close(){this._src&&this._src.abort()}get currentTime(){return this._sink.currentTime}async play(){return await this._sink.play()}pause(){return this._sink.pause()}}const jr=(e,{maxRetries:t,errors:r}={maxRetries:20,errors:[503]})=>{let n=0;const i=e.onError;e.onError=o=>{null==i||i(o),r.includes(o.code)&&((n+=1)>t?console.log("retry, too many",n,t):setTimeout((()=>{var t;return null===(t=e.retry)||void 0===t?void 0:t.call(e)}),100*n))}}})(),n})()}));
\ No newline at end of file
